{
  "version": 3,
  "sources": ["../../../@strapi/email/admin/src/utils/prefixPluginTranslations.ts", "../../../@strapi/email/admin/src/index.ts", "../../../@strapi/i18n/admin/src/components/CheckboxConfirmation.tsx", "../../../@strapi/i18n/admin/src/utils/fields.ts", "../../../@strapi/i18n/admin/src/utils/strings.ts", "../../../@strapi/i18n/admin/src/hooks/useI18n.ts", "../../../@strapi/i18n/admin/src/services/relations.ts", "../../../@strapi/i18n/admin/src/utils/clean.ts", "../../../@strapi/i18n/admin/src/components/BulkLocaleActionModal.tsx", "../../../@strapi/i18n/admin/src/components/CMHeaderActions.tsx", "../../../@strapi/i18n/admin/src/components/CMListViewModalsAdditionalInformation.tsx", "../../../@strapi/i18n/admin/src/components/LocalePicker.tsx", "../../../@strapi/i18n/admin/src/contentManagerHooks/editView.tsx", "../../../@strapi/i18n/admin/src/components/LocaleListCell.tsx", "../../../@strapi/i18n/admin/src/contentManagerHooks/listView.tsx", "../../../@strapi/i18n/admin/src/contentReleasesHooks/releaseDetailsView.ts", "../../../@strapi/i18n/admin/src/middlewares/extendCTBAttributeInitialData.ts", "../../../@strapi/i18n/admin/src/middlewares/extendCTBInitialData.ts", "../../../@strapi/i18n/admin/src/middlewares/rbac-middleware.ts", "../../../@strapi/i18n/admin/src/utils/prefixPluginTranslations.ts", "../../../@strapi/i18n/admin/src/utils/schemas.ts", "../../../@strapi/i18n/admin/src/index.ts", "../../../@strapi/content-releases/admin/src/components/ReleaseActionModal.tsx", "../../../@strapi/content-releases/admin/src/components/ReleaseAction.tsx", "../../../@strapi/content-releases/admin/src/components/ReleaseListCell.tsx", "../../../@strapi/content-releases/admin/src/components/ReleasesPanel.tsx", "../../../@strapi/content-releases/admin/src/utils/prefixPluginTranslations.ts", "../../../@strapi/content-releases/admin/src/index.ts", "../../../@strapi/review-workflows/admin/src/routes/content-manager/model/id/components/constants.ts", "../../../@strapi/review-workflows/admin/src/routes/content-manager/model/id/components/AssigneeSelect.tsx", "../../../@strapi/review-workflows/admin/src/routes/content-manager/model/id/components/StageSelect.tsx", "../../../@strapi/review-workflows/admin/src/routes/content-manager/model/id/components/Header.tsx", "../../../@strapi/review-workflows/admin/src/routes/content-manager/model/id/components/Panel.tsx", "../../../@strapi/review-workflows/admin/src/routes/content-manager/model/constants.tsx", "../../../@strapi/review-workflows/admin/src/utils/cm-hooks.ts", "../../../@strapi/review-workflows/admin/src/utils/translations.ts", "../../../@strapi/review-workflows/admin/src/index.ts", "../../../@strapi/strapi/src/admin.ts"],
  "sourcesContent": ["type TradOptions = Record<string, string>;\n\nconst prefixPluginTranslations = (trad: TradOptions, pluginId: string): TradOptions => {\n  if (!pluginId) {\n    throw new TypeError(\"pluginId can't be empty\");\n  }\n  return Object.keys(trad).reduce((acc, current) => {\n    acc[`${pluginId}.${current}`] = trad[current];\n    return acc;\n  }, {} as TradOptions);\n};\n\nexport { prefixPluginTranslations };\n", "import { PERMISSIONS } from './constants';\nimport { prefixPluginTranslations } from './utils/prefixPluginTranslations';\n\nimport type { Plugin } from '@strapi/types';\n\nconst admin: Plugin.Config.AdminInput = {\n  // TODO typing app in strapi/types as every plugin needs it\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  register(app: any) {\n    // Create the email settings section\n    app.createSettingSection(\n      {\n        id: 'email',\n        intlLabel: { id: 'email.SettingsNav.section-label', defaultMessage: 'Email Plugin' },\n      },\n      [\n        {\n          intlLabel: {\n            id: 'email.Settings.email.plugin.title',\n            defaultMessage: 'Settings',\n          },\n          id: 'settings',\n          to: 'email',\n          Component: () =>\n            import('./pages/Settings').then((mod) => ({\n              default: mod.ProtectedSettingsPage,\n            })),\n          permissions: PERMISSIONS.settings,\n        },\n      ]\n    );\n    app.registerPlugin({\n      id: 'email',\n      name: 'email',\n    });\n  },\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  bootstrap() {},\n  async registerTrads({ locales }: { locales: string[] }) {\n    const importedTrads = await Promise.all(\n      locales.map((locale) => {\n        return import(`./translations/${locale}.json`)\n          .then(({ default: data }) => {\n            return {\n              data: prefixPluginTranslations(data, 'email'),\n              locale,\n            };\n          })\n          .catch(() => {\n            return {\n              data: {},\n              locale,\n            };\n          });\n      })\n    );\n\n    return Promise.resolve(importedTrads);\n  },\n};\n\n// eslint-disable-next-line import/no-default-export\nexport default admin;\n", "import * as React from 'react';\n\nimport { Button, Checkbox, Dialog, Field, Flex, Typography } from '@strapi/design-system';\nimport { WarningCircle } from '@strapi/icons';\nimport { MessageDescriptor, useIntl } from 'react-intl';\nimport { styled } from 'styled-components';\n\nimport { getTranslation } from '../utils/getTranslation';\n\nconst TextAlignTypography = styled(Typography)`\n  text-align: center;\n`;\n\ninterface IntlMessage extends MessageDescriptor {\n  values: object;\n}\n\ninterface CheckboxConfirmationProps {\n  description: IntlMessage;\n  intlLabel: IntlMessage;\n  isCreating?: boolean;\n  name: string;\n  onChange: (event: { target: { name: string; value: boolean; type: string } }) => void;\n  value: boolean;\n}\n\nconst CheckboxConfirmation = ({\n  description,\n  isCreating = false,\n  intlLabel,\n  name,\n  onChange,\n  value,\n}: CheckboxConfirmationProps) => {\n  const { formatMessage } = useIntl();\n  const [isOpen, setIsOpen] = React.useState(false);\n\n  const handleChange = (value: boolean) => {\n    if (isCreating || value) {\n      return onChange({ target: { name, value, type: 'checkbox' } });\n    }\n\n    if (!value) {\n      return setIsOpen(true);\n    }\n\n    return null;\n  };\n\n  const handleConfirm = () => {\n    onChange({ target: { name, value: false, type: 'checkbox' } });\n  };\n\n  const label = intlLabel.id\n    ? formatMessage(\n        { id: intlLabel.id, defaultMessage: intlLabel.defaultMessage },\n        { ...intlLabel.values }\n      )\n    : name;\n\n  const hint = description\n    ? formatMessage(\n        { id: description.id, defaultMessage: description.defaultMessage },\n        { ...description.values }\n      )\n    : '';\n\n  return (\n    <Dialog.Root open={isOpen} onOpenChange={setIsOpen}>\n      <Field.Root hint={hint} name={name}>\n        <Checkbox onCheckedChange={handleChange} checked={value}>\n          {label}\n        </Checkbox>\n        <Field.Hint />\n      </Field.Root>\n      <Dialog.Content>\n        <Dialog.Header>\n          {formatMessage({\n            id: getTranslation('CheckboxConfirmation.Modal.title'),\n            defaultMessage: 'Disable localization',\n          })}\n        </Dialog.Header>\n        <Dialog.Body icon={<WarningCircle />}>\n          <Flex direction=\"column\" alignItems=\"stretch\" gap={2}>\n            <Flex justifyContent=\"center\">\n              <TextAlignTypography>\n                {formatMessage({\n                  id: getTranslation('CheckboxConfirmation.Modal.content'),\n                  defaultMessage:\n                    'Disabling localization will engender the deletion of all your content but the one associated to your default locale (if existing).',\n                })}\n              </TextAlignTypography>\n            </Flex>\n            <Flex justifyContent=\"center\">\n              <Typography fontWeight=\"semiBold\">\n                {formatMessage({\n                  id: getTranslation('CheckboxConfirmation.Modal.body'),\n                  defaultMessage: 'Do you want to disable it?',\n                })}\n              </Typography>\n            </Flex>\n          </Flex>\n        </Dialog.Body>\n        <Dialog.Footer>\n          <Dialog.Cancel>\n            <Button variant=\"tertiary\">\n              {formatMessage({\n                id: 'components.popUpWarning.button.cancel',\n                defaultMessage: 'No, cancel',\n              })}\n            </Button>\n          </Dialog.Cancel>\n          <Dialog.Action>\n            <Button variant=\"danger-light\" onClick={handleConfirm}>\n              {formatMessage({\n                id: getTranslation('CheckboxConfirmation.Modal.button-confirm'),\n                defaultMessage: 'Yes, disable',\n              })}\n            </Button>\n          </Dialog.Action>\n        </Dialog.Footer>\n      </Dialog.Content>\n    </Dialog.Root>\n  );\n};\n\nexport { CheckboxConfirmation };\n", "import has from 'lodash/has';\n\nconst LOCALIZED_FIELDS = [\n  'biginteger',\n  'boolean',\n  'component',\n  'date',\n  'datetime',\n  'decimal',\n  'dynamiczone',\n  'email',\n  'enumeration',\n  'float',\n  'integer',\n  'json',\n  'media',\n  'number',\n  'password',\n  'richtext',\n  'blocks',\n  'string',\n  'text',\n  'time',\n];\n\nconst doesPluginOptionsHaveI18nLocalized = (\n  opts?: object\n): opts is { i18n: { localized: boolean } } => has(opts, ['i18n', 'localized']);\n\nexport { LOCALIZED_FIELDS, doesPluginOptionsHaveI18nLocalized };\n", "const capitalize = (str: string) => str.charAt(0).toUpperCase() + str.slice(1);\n\nexport { capitalize };\n", "import * as React from 'react';\n\nimport { useAuth } from '@strapi/admin/strapi-admin';\nimport { unstable_useDocument as useDocument } from '@strapi/content-manager/strapi-admin';\nimport { useParams } from 'react-router-dom';\n\nimport { doesPluginOptionsHaveI18nLocalized } from '../utils/fields';\nimport { capitalize } from '../utils/strings';\n\ntype UseI18n = () => {\n  hasI18n: boolean;\n  canCreate: string[];\n  canRead: string[];\n  canUpdate: string[];\n  canDelete: string[];\n  canPublish: string[];\n};\n\n/**\n * @alpha\n * @description This hook is used to get the i18n status of a content type.\n * Also returns the CRUDP permission locale properties for the content type\n * so we know which locales the user can perform actions on.\n */\nconst useI18n: UseI18n = () => {\n  // Extract the params from the URL to pass to our useDocument hook\n  const params = useParams<{ collectionType: string; slug: string; model: string }>();\n\n  const userPermissions = useAuth('useI18n', (state) => state.permissions);\n  const actions = React.useMemo(() => {\n    const permissions = userPermissions.filter((permission) => permission.subject === params.slug);\n\n    return permissions.reduce<Omit<ReturnType<UseI18n>, 'hasI18n'>>(\n      (acc, permission) => {\n        const [actionShorthand] = permission.action.split('.').slice(-1);\n\n        return {\n          ...acc,\n          [`can${capitalize(actionShorthand)}`]: permission.properties?.locales ?? [],\n        };\n      },\n      { canCreate: [], canRead: [], canUpdate: [], canDelete: [], canPublish: [] }\n    );\n  }, [params.slug, userPermissions]);\n\n  // TODO: use specific hook to get schema only\n  const { schema } = useDocument(\n    {\n      // We can non-null assert these because below we skip the query if they are not present\n      collectionType: params.collectionType!,\n      model: params.slug!,\n    },\n    {\n      skip: true,\n    }\n  );\n\n  if (doesPluginOptionsHaveI18nLocalized(schema?.pluginOptions)) {\n    return {\n      hasI18n: schema.pluginOptions.i18n.localized,\n      ...actions,\n    };\n  }\n\n  return {\n    hasI18n: false,\n    ...actions,\n  };\n};\n\nexport { useI18n };\n", "import { i18nApi } from './api';\n\nimport type { CountManyEntriesDraftRelations } from '../../../shared/contracts/content-manager';\n\nconst relationsApi = i18nApi.injectEndpoints({\n  overrideExisting: true,\n  endpoints: (builder) => ({\n    getManyDraftRelationCount: builder.query<\n      CountManyEntriesDraftRelations.Response['data'],\n      CountManyEntriesDraftRelations.Request['query'] & {\n        model: string;\n      }\n    >({\n      query: ({ model, ...params }) => ({\n        url: `/content-manager/collection-types/${model}/actions/countManyEntriesDraftRelations`,\n        method: 'GET',\n        config: {\n          params,\n        },\n      }),\n      transformResponse: (response: CountManyEntriesDraftRelations.Response) => response.data,\n    }),\n  }),\n});\n\nconst { useGetManyDraftRelationCountQuery } = relationsApi;\n\nexport { useGetManyDraftRelationCountQuery };\n", "import type { Schema } from '@strapi/types';\n\ntype Data = Record<keyof Schema.ContentType['attributes'], any>;\n\nconst cleanData = (\n  data: Data,\n  schema: Schema.ContentType,\n  components: Record<string, Schema.Component>\n) => {\n  const cleanedData = removeFields(data, [\n    'createdAt',\n    'createdBy',\n    'updatedAt',\n    'updatedBy',\n    'id',\n    'documentId',\n    'publishedAt',\n    'strapi_stage',\n    'strapi_assignee',\n    'locale',\n    'status',\n  ]);\n\n  const cleanedDataWithoutPasswordAndRelation = recursiveRemoveFieldTypes(\n    cleanedData,\n    schema,\n    components,\n    ['relation', 'password']\n  );\n\n  return cleanedDataWithoutPasswordAndRelation;\n};\n\nconst removeFields = (data: Data, fields: Array<keyof Schema.ContentType['attributes']>) => {\n  return Object.keys(data).reduce((acc, current) => {\n    if (fields.includes(current)) {\n      return acc;\n    }\n    acc[current] = data[current];\n    return acc;\n  }, {} as Data);\n};\n\nconst recursiveRemoveFieldTypes = (\n  data: Data,\n  schema: Schema.Schema,\n  components: Record<string, Schema.Component>,\n  fields: Array<keyof Schema.ContentType['attributes']>\n) => {\n  return Object.keys(data).reduce((acc, current) => {\n    const attribute = schema.attributes[current] ?? { type: undefined };\n\n    if (fields.includes(attribute.type)) {\n      return acc;\n    }\n\n    if (attribute.type === 'dynamiczone') {\n      acc[current] = data[current].map((componentValue: any, index: number) => {\n        const { id: _, ...rest } = recursiveRemoveFieldTypes(\n          componentValue,\n          components[componentValue.__component],\n          components,\n          fields\n        );\n\n        return {\n          ...rest,\n          __temp_key__: index + 1,\n        };\n      });\n    } else if (attribute.type === 'component') {\n      const { repeatable, component } = attribute;\n\n      if (repeatable) {\n        acc[current] = (data[current] ?? []).map((compoData: any, index: number) => {\n          const { id: _, ...rest } = recursiveRemoveFieldTypes(\n            compoData,\n            components[component],\n            components,\n            fields\n          );\n\n          return {\n            ...rest,\n            __temp_key__: index + 1,\n          };\n        });\n      } else {\n        const { id: _, ...rest } = recursiveRemoveFieldTypes(\n          data[current] ?? {},\n          components[component],\n          components,\n          fields\n        );\n\n        acc[current] = rest;\n      }\n    } else {\n      acc[current] = data[current];\n    }\n\n    return acc;\n  }, {} as any);\n};\n\nexport { cleanData };\n", "import * as React from 'react';\n\nimport { FormErrors, Table, useTable } from '@strapi/admin/strapi-admin';\nimport { Box, Typography, IconButton, Flex, Tooltip, Status, Modal } from '@strapi/design-system';\nimport { Pencil, CheckCircle, CrossCircle, ArrowsCounterClockwise } from '@strapi/icons';\nimport { stringify } from 'qs';\nimport { type MessageDescriptor, useIntl, PrimitiveType } from 'react-intl';\nimport { Link } from 'react-router-dom';\n\nimport { Locale } from '../../../shared/contracts/locales';\nimport { getTranslation } from '../utils/getTranslation';\nimport { capitalize } from '../utils/strings';\n\nimport { LocaleStatus } from './CMHeaderActions';\n\nimport type { Modules } from '@strapi/types';\n\ntype Status = Modules.Documents.Params.PublicationStatus.Kind | 'modified';\n\n/* -------------------------------------------------------------------------------------------------\n * EntryValidationText\n * -----------------------------------------------------------------------------------------------*/\n\ninterface EntryValidationTextProps {\n  status: Status;\n  validationErrors: FormErrors[string] | null;\n  action: 'bulk-publish' | 'bulk-unpublish';\n}\n\ninterface TranslationMessage extends MessageDescriptor {\n  values?: Record<string, PrimitiveType>;\n}\n\nconst isErrorMessageDescriptor = (object?: string | object): object is TranslationMessage => {\n  return (\n    typeof object === 'object' && object !== null && 'id' in object && 'defaultMessage' in object\n  );\n};\n\nconst EntryValidationText = ({\n  status = 'draft',\n  validationErrors,\n  action,\n}: EntryValidationTextProps) => {\n  const { formatMessage } = useIntl();\n\n  /**\n   * TODO: Should this be extracted an made into a factory to recursively get\n   * error messages??\n   */\n  const getErrorStr = (key: string, value?: FormErrors[string]): string => {\n    if (typeof value === 'string') {\n      return `${key}: ${value}`;\n    } else if (isErrorMessageDescriptor(value)) {\n      return `${key}: ${formatMessage(value)}`;\n    } else if (Array.isArray(value)) {\n      return value.map((v) => getErrorStr(key, v)).join(' ');\n    } else if (typeof value === 'object' && !Array.isArray(value)) {\n      return Object.entries(value)\n        .map(([k, v]) => getErrorStr(k, v))\n        .join(' ');\n    } else {\n      /**\n       * unlikely to happen, but we need to return something\n       */\n      return '';\n    }\n  };\n\n  if (validationErrors) {\n    const validationErrorsMessages = Object.entries(validationErrors)\n      .map(([key, value]) => {\n        return getErrorStr(key, value);\n      })\n      .join(' ');\n\n    return (\n      <Flex gap={2}>\n        <CrossCircle fill=\"danger600\" />\n        <Tooltip label={validationErrorsMessages}>\n          <Typography\n            maxWidth={'30rem'}\n            textColor=\"danger600\"\n            variant=\"omega\"\n            fontWeight=\"semiBold\"\n            ellipsis\n          >\n            {validationErrorsMessages}\n          </Typography>\n        </Tooltip>\n      </Flex>\n    );\n  }\n\n  const getStatusMessage = () => {\n    if (action === 'bulk-publish') {\n      if (status === 'published') {\n        return {\n          icon: <CheckCircle fill=\"success600\" />,\n          text: formatMessage({\n            id: 'content-manager.bulk-publish.already-published',\n            defaultMessage: 'Already Published',\n          }),\n          textColor: 'success600',\n          fontWeight: 'bold',\n        };\n      } else if (status === 'modified') {\n        return {\n          icon: <ArrowsCounterClockwise fill=\"alternative600\" />,\n          text: formatMessage({\n            id: 'app.utils.ready-to-publish-changes',\n            defaultMessage: 'Ready to publish changes',\n          }),\n        };\n      } else {\n        return {\n          icon: <CheckCircle fill=\"success600\" />,\n          text: formatMessage({\n            id: 'app.utils.ready-to-publish',\n            defaultMessage: 'Ready to publish',\n          }),\n        };\n      }\n    } else {\n      if (status === 'draft') {\n        return {\n          icon: <CheckCircle fill=\"success600\" />,\n          text: formatMessage({\n            id: 'content-manager.bulk-unpublish.already-unpublished',\n            defaultMessage: 'Already Unpublished',\n          }),\n          textColor: 'success600',\n          fontWeight: 'bold',\n        };\n      } else {\n        return {\n          icon: <CheckCircle fill=\"success600\" />,\n          text: formatMessage({\n            id: 'app.utils.ready-to-unpublish-changes',\n            defaultMessage: 'Ready to unpublish',\n          }),\n          textColor: 'success600',\n          fontWeight: 'bold',\n        };\n      }\n    }\n  };\n\n  const { icon, text, textColor = 'success600', fontWeight = 'normal' } = getStatusMessage();\n\n  return (\n    <Flex gap={2}>\n      {icon}\n      <Typography textColor={textColor} fontWeight={fontWeight}>\n        {text}\n      </Typography>\n    </Flex>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * BoldChunk\n * -----------------------------------------------------------------------------------------------*/\n\nconst BoldChunk = (chunks: React.ReactNode) => <Typography fontWeight=\"bold\">{chunks}</Typography>;\n\n/* -------------------------------------------------------------------------------------------------\n * BulkLocaleActionModal\n * -----------------------------------------------------------------------------------------------*/\n\ninterface BulkLocaleActionModalProps {\n  rows: LocaleStatus[];\n  headers: {\n    label: string;\n    name: string;\n  }[];\n  localesMetadata: Locale[];\n  validationErrors?: FormErrors;\n  action: 'bulk-publish' | 'bulk-unpublish';\n}\n\nconst BulkLocaleActionModal = ({\n  headers,\n  rows,\n  localesMetadata,\n  validationErrors = {},\n  action,\n}: BulkLocaleActionModalProps) => {\n  const { formatMessage } = useIntl();\n\n  const selectedRows = useTable<LocaleStatus[]>(\n    'BulkLocaleActionModal',\n    (state) => state.selectedRows\n  );\n\n  const getFormattedCountMessage = () => {\n    const currentStatusByLocale = rows.reduce<Record<string, string>>((acc, { locale, status }) => {\n      acc[locale] = status;\n      return acc;\n    }, {});\n    const localesWithErrors = Object.keys(validationErrors);\n\n    const publishedCount = selectedRows.filter(\n      ({ locale }) => currentStatusByLocale[locale] === 'published'\n    ).length;\n\n    const draftCount = selectedRows.filter(\n      ({ locale }) =>\n        (currentStatusByLocale[locale] === 'draft' ||\n          currentStatusByLocale[locale] === 'modified') &&\n        !localesWithErrors.includes(locale)\n    ).length;\n\n    const withErrorsCount = localesWithErrors.length;\n    const messageId =\n      action === 'bulk-publish'\n        ? 'content-manager.containers.list.selectedEntriesModal.selectedCount.publish'\n        : 'content-manager.containers.list.selectedEntriesModal.selectedCount.unpublish';\n\n    const defaultMessage =\n      action === 'bulk-publish'\n        ? '<b>{publishedCount}</b> {publishedCount, plural, =0 {entries} one {entry} other {entries}} already published. <b>{draftCount}</b> {draftCount, plural, =0 {entries} one {entry} other {entries}} ready to publish. <b>{withErrorsCount}</b> {withErrorsCount, plural, =0 {entries} one {entry} other {entries}} waiting for action.'\n        : '<b>{draftCount}</b> {draftCount, plural, =0 {entries} one {entry} other {entries}} already unpublished. <b>{publishedCount}</b> {publishedCount, plural, =0 {entries} one {entry} other {entries}} ready to unpublish.';\n\n    return formatMessage(\n      {\n        id: messageId,\n        defaultMessage,\n      },\n      {\n        withErrorsCount,\n        draftCount,\n        publishedCount,\n        b: BoldChunk,\n      }\n    );\n  };\n\n  return (\n    <Modal.Body>\n      <Typography>{getFormattedCountMessage()}</Typography>\n      <Box marginTop={5}>\n        <Table.Content>\n          <Table.Head>\n            <Table.HeaderCheckboxCell />\n            {headers.map((head) => (\n              <Table.HeaderCell key={head.name} {...head} />\n            ))}\n          </Table.Head>\n          <Table.Body>\n            {rows.map(({ locale, status }, index) => {\n              const error = validationErrors?.[locale] ?? null;\n\n              const statusVariant =\n                status === 'draft' ? 'primary' : status === 'published' ? 'success' : 'alternative';\n\n              return (\n                <Table.Row key={index}>\n                  <Table.CheckboxCell id={locale} aria-label={`Select ${locale}`} />\n                  <Table.Cell>\n                    <Typography variant=\"sigma\" textColor=\"neutral600\">\n                      {Array.isArray(localesMetadata)\n                        ? localesMetadata.find((localeEntry) => localeEntry.code === locale)?.name\n                        : locale}\n                    </Typography>\n                  </Table.Cell>\n                  <Table.Cell>\n                    <Box display=\"flex\">\n                      <Status\n                        display=\"flex\"\n                        paddingLeft=\"6px\"\n                        paddingRight=\"6px\"\n                        paddingTop=\"2px\"\n                        paddingBottom=\"2px\"\n                        size={'S'}\n                        variant={statusVariant}\n                      >\n                        <Typography tag=\"span\" variant=\"pi\" fontWeight=\"bold\">\n                          {capitalize(status)}\n                        </Typography>\n                      </Status>\n                    </Box>\n                  </Table.Cell>\n                  <Table.Cell>\n                    <EntryValidationText validationErrors={error} status={status} action={action} />\n                  </Table.Cell>\n                  <Table.Cell>\n                    <IconButton\n                      tag={Link}\n                      to={{\n                        search: stringify({ plugins: { i18n: { locale } } }),\n                      }}\n                      label={formatMessage(\n                        {\n                          id: getTranslation('Settings.list.actions.edit'),\n                          defaultMessage: 'Edit {name} locale',\n                        },\n                        {\n                          name: locale,\n                        }\n                      )}\n                      variant=\"ghost\"\n                    >\n                      <Pencil />\n                    </IconButton>\n                  </Table.Cell>\n                </Table.Row>\n              );\n            })}\n          </Table.Body>\n        </Table.Content>\n      </Box>\n    </Modal.Body>\n  );\n};\n\nexport { BulkLocaleActionModal };\nexport type { BulkLocaleActionModalProps };\n", "import * as React from 'react';\n\nimport { skipToken } from '@reduxjs/toolkit/query';\nimport {\n  useNotification,\n  useQueryParams,\n  Table,\n  useAPIErrorHandler,\n  FormErrors,\n  useForm,\n} from '@strapi/admin/strapi-admin';\nimport {\n  type DocumentActionComponent,\n  type DocumentActionProps,\n  unstable_useDocument as useDocument,\n  unstable_useDocumentActions as useDocumentActions,\n  buildValidParams,\n  HeaderActionProps,\n} from '@strapi/content-manager/strapi-admin';\nimport {\n  Flex,\n  Status,\n  Typography,\n  Button,\n  Modal,\n  Field,\n  SingleSelect,\n  SingleSelectOption,\n  Dialog,\n  type StatusVariant,\n} from '@strapi/design-system';\nimport { WarningCircle, ListPlus, Trash, Earth, Cross, Plus } from '@strapi/icons';\nimport { useIntl } from 'react-intl';\nimport { useNavigate } from 'react-router-dom';\nimport { styled } from 'styled-components';\n\nimport { useI18n } from '../hooks/useI18n';\nimport { useGetLocalesQuery } from '../services/locales';\nimport { useGetManyDraftRelationCountQuery } from '../services/relations';\nimport { cleanData } from '../utils/clean';\nimport { getTranslation } from '../utils/getTranslation';\nimport { capitalize } from '../utils/strings';\n\nimport { BulkLocaleActionModal } from './BulkLocaleActionModal';\n\nimport type { Locale } from '../../../shared/contracts/locales';\nimport type { I18nBaseQuery } from '../types';\nimport type { Modules } from '@strapi/types';\n\n/* -------------------------------------------------------------------------------------------------\n * LocalePickerAction\n * -----------------------------------------------------------------------------------------------*/\n\ninterface LocaleOptionProps {\n  isDraftAndPublishEnabled: boolean;\n  locale: Locale;\n  status: 'draft' | 'published' | 'modified';\n  entryExists: boolean;\n}\n\nconst statusVariants: Record<LocaleOptionProps['status'], StatusVariant> = {\n  draft: 'secondary',\n  published: 'success',\n  modified: 'alternative',\n};\n\nconst LocaleOption = ({\n  isDraftAndPublishEnabled,\n  locale,\n  status,\n  entryExists,\n}: LocaleOptionProps) => {\n  const { formatMessage } = useIntl();\n\n  if (!entryExists) {\n    return formatMessage(\n      {\n        id: getTranslation('CMEditViewLocalePicker.locale.create'),\n        defaultMessage: 'Create <bold>{locale}</bold> locale',\n      },\n      {\n        bold: (locale: React.ReactNode) => <b>{locale}</b>,\n        locale: locale.name,\n      }\n    );\n  }\n\n  return (\n    <Flex width=\"100%\" gap={1} justifyContent=\"space-between\">\n      <Typography>{locale.name}</Typography>\n      {isDraftAndPublishEnabled ? (\n        <Status\n          display=\"flex\"\n          paddingLeft=\"6px\"\n          paddingRight=\"6px\"\n          paddingTop=\"2px\"\n          paddingBottom=\"2px\"\n          size=\"S\"\n          variant={statusVariants[status]}\n        >\n          <Typography tag=\"span\" variant=\"pi\" fontWeight=\"bold\">\n            {capitalize(status)}\n          </Typography>\n        </Status>\n      ) : null}\n    </Flex>\n  );\n};\n\nconst LocalePickerAction = ({\n  document,\n  meta,\n  model,\n  collectionType,\n  documentId,\n}: HeaderActionProps) => {\n  const { formatMessage } = useIntl();\n  const [{ query }, setQuery] = useQueryParams<I18nBaseQuery>();\n  const { hasI18n, canCreate, canRead } = useI18n();\n  const { data: locales = [] } = useGetLocalesQuery();\n  const currentDesiredLocale = query.plugins?.i18n?.locale;\n  const { schema } = useDocument({\n    model,\n    collectionType,\n    documentId,\n    params: { locale: currentDesiredLocale },\n  });\n\n  const handleSelect = React.useCallback(\n    (value: string) => {\n      setQuery({\n        plugins: {\n          ...query.plugins,\n          i18n: {\n            locale: value,\n          },\n        },\n      });\n    },\n    [query.plugins, setQuery]\n  );\n\n  React.useEffect(() => {\n    if (!Array.isArray(locales) || !hasI18n) {\n      return;\n    }\n    /**\n     * Handle the case where the current locale query param doesn't exist\n     * in the list of available locales, so we redirect to the default locale.\n     */\n    const doesLocaleExist = locales.find((loc) => loc.code === currentDesiredLocale);\n    const defaultLocale = locales.find((locale) => locale.isDefault);\n    if (!doesLocaleExist && defaultLocale?.code) {\n      handleSelect(defaultLocale.code);\n    }\n  }, [handleSelect, hasI18n, locales, currentDesiredLocale]);\n\n  const currentLocale = Array.isArray(locales)\n    ? locales.find((locale) => locale.code === currentDesiredLocale)\n    : undefined;\n\n  const allCurrentLocales = [\n    { status: getDocumentStatus(document, meta), locale: currentLocale?.code },\n    ...(document?.localizations ?? []),\n  ];\n\n  if (!hasI18n || !Array.isArray(locales) || locales.length === 0) {\n    return null;\n  }\n\n  const displayedLocales = locales.filter((locale) => {\n    /**\n     * If you can read we allow you to see the locale exists\n     * otherwise the locale is hidden.\n     */\n    return canRead.includes(locale.code);\n  });\n\n  return {\n    label: formatMessage({\n      id: getTranslation('Settings.locales.modal.locales.label'),\n      defaultMessage: 'Locales',\n    }),\n    options: displayedLocales.map((locale) => {\n      const entryWithLocaleExists = allCurrentLocales.some((doc) => doc.locale === locale.code);\n\n      const currentLocaleDoc = allCurrentLocales.find((doc) =>\n        'locale' in doc ? doc.locale === locale.code : false\n      );\n\n      const permissionsToCheck = currentLocaleDoc ? canRead : canCreate;\n\n      return {\n        disabled: !permissionsToCheck.includes(locale.code),\n        value: locale.code,\n        label: (\n          <LocaleOption\n            isDraftAndPublishEnabled={!!schema?.options?.draftAndPublish}\n            locale={locale}\n            status={currentLocaleDoc?.status}\n            entryExists={entryWithLocaleExists}\n          />\n        ),\n        startIcon: !entryWithLocaleExists ? <Plus /> : null,\n      };\n    }),\n    customizeContent: () => currentLocale?.name,\n    onSelect: handleSelect,\n    value: currentLocale,\n  };\n};\n\ntype UseDocument = typeof useDocument;\n\nconst getDocumentStatus = (\n  document: ReturnType<UseDocument>['document'],\n  meta: ReturnType<UseDocument>['meta']\n): 'draft' | 'published' | 'modified' => {\n  const docStatus = document?.status;\n  const statuses = meta?.availableStatus ?? [];\n\n  /**\n   * Creating an entry\n   */\n  if (!docStatus) {\n    return 'draft';\n  }\n\n  /**\n   * We're viewing a draft, but the document could have a published version\n   */\n  if (docStatus === 'draft' && statuses.find((doc) => doc.publishedAt !== null)) {\n    return 'published';\n  }\n\n  return docStatus;\n};\n\n/* -------------------------------------------------------------------------------------------------\n * FillFromAnotherLocaleAction\n * -----------------------------------------------------------------------------------------------*/\n\nconst FillFromAnotherLocaleAction = ({\n  documentId,\n  meta,\n  model,\n  collectionType,\n}: HeaderActionProps) => {\n  const { formatMessage } = useIntl();\n  const [{ query }] = useQueryParams<I18nBaseQuery>();\n  const { hasI18n } = useI18n();\n  const currentDesiredLocale = query.plugins?.i18n?.locale;\n  const [localeSelected, setLocaleSelected] = React.useState<string | null>(null);\n  const setValues = useForm('FillFromAnotherLocale', (state) => state.setValues);\n\n  const { getDocument } = useDocumentActions();\n  const { schema, components } = useDocument({\n    model,\n    documentId,\n    collectionType,\n    params: { locale: currentDesiredLocale },\n  });\n  const { data: locales = [] } = useGetLocalesQuery();\n\n  const availableLocales = Array.isArray(locales)\n    ? locales.filter((locale) => meta?.availableLocales.some((l) => l.locale === locale.code))\n    : [];\n\n  const fillFromLocale = (onClose: () => void) => async () => {\n    const response = await getDocument({\n      collectionType,\n      model,\n      documentId,\n      params: { locale: localeSelected },\n    });\n    if (!response || !schema) {\n      return;\n    }\n\n    const { data } = response;\n\n    const cleanedData = cleanData(data, schema, components);\n\n    setValues(cleanedData);\n\n    onClose();\n  };\n\n  if (!hasI18n) {\n    return null;\n  }\n\n  return {\n    type: 'icon',\n    icon: <Earth />,\n    disabled: availableLocales.length === 0,\n    label: formatMessage({\n      id: getTranslation('CMEditViewCopyLocale.copy-text'),\n      defaultMessage: 'Fill in from another locale',\n    }),\n    dialog: {\n      type: 'dialog',\n      title: formatMessage({\n        id: getTranslation('CMEditViewCopyLocale.dialog.title'),\n        defaultMessage: 'Confirmation',\n      }),\n      content: ({ onClose }: { onClose: () => void }) => (\n        <>\n          <Dialog.Body>\n            <Flex direction=\"column\" gap={3}>\n              <WarningCircle width=\"24px\" height=\"24px\" fill=\"danger600\" />\n              <Typography textAlign=\"center\">\n                {formatMessage({\n                  id: getTranslation('CMEditViewCopyLocale.dialog.body'),\n                  defaultMessage:\n                    'Your current content will be erased and filled by the content of the selected locale:',\n                })}\n              </Typography>\n              <Field.Root width=\"100%\">\n                <Field.Label>\n                  {formatMessage({\n                    id: getTranslation('CMEditViewCopyLocale.dialog.field.label'),\n                    defaultMessage: 'Locale',\n                  })}\n                </Field.Label>\n                <SingleSelect\n                  value={localeSelected}\n                  placeholder={formatMessage({\n                    id: getTranslation('CMEditViewCopyLocale.dialog.field.placeholder'),\n                    defaultMessage: 'Select one locale...',\n                  })}\n                  // @ts-expect-error â€“ the DS will handle numbers, but we're not allowing the API.\n                  onChange={(value) => setLocaleSelected(value)}\n                >\n                  {availableLocales.map((locale) => (\n                    <SingleSelectOption key={locale.code} value={locale.code}>\n                      {locale.name}\n                    </SingleSelectOption>\n                  ))}\n                </SingleSelect>\n              </Field.Root>\n            </Flex>\n          </Dialog.Body>\n          <Dialog.Footer>\n            <Flex gap={2} width=\"100%\">\n              <Button flex=\"auto\" variant=\"tertiary\" onClick={onClose}>\n                {formatMessage({\n                  id: getTranslation('CMEditViewCopyLocale.cancel-text'),\n                  defaultMessage: 'No, cancel',\n                })}\n              </Button>\n              <Button flex=\"auto\" variant=\"success\" onClick={fillFromLocale(onClose)}>\n                {formatMessage({\n                  id: getTranslation('CMEditViewCopyLocale.submit-text'),\n                  defaultMessage: 'Yes, fill in',\n                })}\n              </Button>\n            </Flex>\n          </Dialog.Footer>\n        </>\n      ),\n    },\n  };\n};\n\n/* -------------------------------------------------------------------------------------------------\n * DeleteLocaleAction\n * -----------------------------------------------------------------------------------------------*/\n\nconst DeleteLocaleAction: DocumentActionComponent = ({\n  document,\n  documentId,\n  model,\n  collectionType,\n}) => {\n  const { formatMessage } = useIntl();\n  const navigate = useNavigate();\n  const { toggleNotification } = useNotification();\n  const { delete: deleteAction, isLoading } = useDocumentActions();\n  const { hasI18n, canDelete } = useI18n();\n\n  // Get the current locale object, using the URL instead of document so it works while creating\n  const [{ query }] = useQueryParams<I18nBaseQuery>();\n  const { data: locales = [] } = useGetLocalesQuery();\n  const currentDesiredLocale = query.plugins?.i18n?.locale;\n  const locale = !('error' in locales) && locales.find((loc) => loc.code === currentDesiredLocale);\n\n  if (!hasI18n) {\n    return null;\n  }\n\n  return {\n    disabled:\n      (document?.locale && !canDelete.includes(document.locale)) || !document || !document.id,\n    position: ['header', 'table-row'],\n    label: formatMessage(\n      {\n        id: getTranslation('actions.delete.label'),\n        defaultMessage: 'Delete entry ({locale})',\n      },\n      { locale: locale && locale.name }\n    ),\n    icon: <StyledTrash />,\n    variant: 'danger',\n    dialog: {\n      type: 'dialog',\n      title: formatMessage({\n        id: getTranslation('actions.delete.dialog.title'),\n        defaultMessage: 'Confirmation',\n      }),\n      content: (\n        <Flex direction=\"column\" gap={2}>\n          <WarningCircle width=\"24px\" height=\"24px\" fill=\"danger600\" />\n          <Typography tag=\"p\" variant=\"omega\" textAlign=\"center\">\n            {formatMessage({\n              id: getTranslation('actions.delete.dialog.body'),\n              defaultMessage: 'Are you sure?',\n            })}\n          </Typography>\n        </Flex>\n      ),\n      loading: isLoading,\n      onConfirm: async () => {\n        const unableToDelete =\n          // We are unable to delete a collection type without a document ID\n          // & unable to delete generally if there is no document locale\n          (collectionType !== 'single-types' && !documentId) || !document?.locale;\n\n        if (unableToDelete) {\n          console.error(\n            \"You're trying to delete a document without an id or locale, this is likely a bug with Strapi. Please open an issue.\"\n          );\n\n          toggleNotification({\n            message: formatMessage({\n              id: getTranslation('actions.delete.error'),\n              defaultMessage: 'An error occurred while trying to delete the document locale.',\n            }),\n            type: 'danger',\n          });\n\n          return;\n        }\n\n        const res = await deleteAction({\n          documentId,\n          model,\n          collectionType,\n          params: { locale: document.locale },\n        });\n\n        if (!('error' in res)) {\n          navigate({ pathname: `../${collectionType}/${model}` }, { replace: true });\n        }\n      },\n    },\n  };\n};\n\nexport type LocaleStatus = {\n  locale: string;\n  status: Modules.Documents.Params.PublicationStatus.Kind | 'modified';\n};\n\ninterface ExtendedDocumentActionProps extends DocumentActionProps {\n  action?: 'bulk-publish' | 'bulk-unpublish';\n}\n\n/* -------------------------------------------------------------------------------------------------\n * BulkLocaleAction\n *\n * This component is used to handle bulk publish and unpublish actions on locales.\n * -----------------------------------------------------------------------------------------------*/\n\nconst BulkLocaleAction: DocumentActionComponent = ({\n  document,\n  documentId,\n  model,\n  collectionType,\n  action,\n}: ExtendedDocumentActionProps) => {\n  const locale = document?.locale ?? null;\n  const [{ query }] = useQueryParams<{ status: 'draft' | 'published' }>();\n\n  const params = React.useMemo(() => buildValidParams(query), [query]);\n  const isOnPublishedTab = query.status === 'published';\n\n  const { formatMessage } = useIntl();\n  const { hasI18n, canPublish } = useI18n();\n  const { toggleNotification } = useNotification();\n  const { _unstableFormatAPIError: formatAPIError } = useAPIErrorHandler();\n\n  const [selectedRows, setSelectedRows] = React.useState<any[]>([]);\n  const [isDraftRelationConfirmationOpen, setIsDraftRelationConfirmationOpen] =\n    React.useState<boolean>(false);\n\n  const { publishMany: publishManyAction, unpublishMany: unpublishManyAction } =\n    useDocumentActions();\n\n  const { schema, validate } = useDocument(\n    {\n      model,\n      collectionType,\n      documentId,\n      params: {\n        locale,\n      },\n    },\n    {\n      // No need to fetch the document, the data is already available in the `document` prop\n      skip: true,\n    }\n  );\n\n  const { data: localesMetadata = [] } = useGetLocalesQuery(hasI18n ? undefined : skipToken);\n\n  const headers = [\n    {\n      label: formatMessage({\n        id: 'global.name',\n        defaultMessage: 'Name',\n      }),\n      name: 'name',\n    },\n    {\n      label: formatMessage({\n        id: getTranslation('CMEditViewBulkLocale.status'),\n        defaultMessage: 'Status',\n      }),\n      name: 'status',\n    },\n    {\n      label: formatMessage({\n        id: getTranslation('CMEditViewBulkLocale.publication-status'),\n        defaultMessage: 'Publication Status',\n      }),\n      name: 'publication-status',\n    },\n  ];\n\n  // Extract the rows for the bulk locale publish modal and any validation\n  // errors per locale\n  const [rows, validationErrors] = React.useMemo(() => {\n    if (!document) {\n      return [[], {}];\n    }\n\n    const localizations = document.localizations ?? [];\n\n    // Build the rows for the bulk locale publish modal by combining the current\n    // document with all the available locales from the document meta\n    const locales: LocaleStatus[] = localizations.map((doc: any) => {\n      const { locale, status } = doc;\n      return { locale, status };\n    });\n\n    // Add the current document locale\n    locales.unshift({\n      locale: document.locale,\n      status: document.status,\n    });\n\n    // Build the validation errors for each locale.\n    const allDocuments = [document, ...localizations];\n    const errors = allDocuments.reduce<FormErrors>((errs, document) => {\n      if (!document) {\n        return errs;\n      }\n\n      // Validate each locale entry via the useDocument validate function and store any errors in a dictionary\n      const validation = validate(document as Modules.Documents.AnyDocument);\n      if (validation !== null) {\n        errs[document.locale] = validation;\n      }\n      return errs;\n    }, {});\n\n    return [locales, errors];\n  }, [document, validate]);\n\n  const isBulkPublish = action === 'bulk-publish';\n  const localesForAction = selectedRows.reduce((acc: string[], selectedRow: LocaleStatus) => {\n    const isValidLocale =\n      // Validation errors are irrelevant if we are trying to unpublish\n      !isBulkPublish || !Object.keys(validationErrors).includes(selectedRow.locale);\n\n    const shouldAddLocale = isBulkPublish\n      ? selectedRow.status !== 'published' && isValidLocale\n      : selectedRow.status !== 'draft' && isValidLocale;\n\n    if (shouldAddLocale) {\n      acc.push(selectedRow.locale);\n    }\n\n    return acc;\n  }, []);\n\n  // TODO skipping this for now as there is a bug with the draft relation count that will be worked on separately\n  // see https://www.notion.so/strapi/Count-draft-relations-56901b492efb45ab90d42fe975b32bd8?pvs=4\n  const enableDraftRelationsCount = false;\n  const {\n    data: draftRelationsCount = 0,\n    isLoading: isDraftRelationsLoading,\n    error: isDraftRelationsError,\n  } = useGetManyDraftRelationCountQuery(\n    {\n      model,\n      documentIds: [documentId!],\n      locale: localesForAction,\n    },\n    {\n      skip: !enableDraftRelationsCount || !documentId || localesForAction.length === 0,\n    }\n  );\n\n  React.useEffect(() => {\n    if (isDraftRelationsError) {\n      toggleNotification({\n        type: 'danger',\n        message: formatAPIError(isDraftRelationsError),\n      });\n    }\n  }, [isDraftRelationsError, toggleNotification, formatAPIError]);\n\n  if (!schema?.options?.draftAndPublish) {\n    return null;\n  }\n\n  if (!hasI18n) {\n    return null;\n  }\n\n  if (!documentId) {\n    return null;\n  }\n\n  // This document action can be enabled given that draft and publish and i18n are\n  // enabled and we can publish the current locale.\n\n  const publish = async () => {\n    await publishManyAction({\n      model,\n      documentIds: [documentId],\n      params: {\n        ...params,\n        locale: localesForAction,\n      },\n    });\n\n    setSelectedRows([]);\n  };\n\n  const unpublish = async () => {\n    await unpublishManyAction({\n      model,\n      documentIds: [documentId],\n      params: {\n        ...params,\n        locale: localesForAction,\n      },\n    });\n\n    setSelectedRows([]);\n  };\n\n  const handleAction = async () => {\n    if (draftRelationsCount > 0) {\n      setIsDraftRelationConfirmationOpen(true);\n    } else if (isBulkPublish) {\n      await publish();\n    } else {\n      await unpublish();\n    }\n  };\n\n  if (isDraftRelationConfirmationOpen) {\n    return {\n      label: formatMessage({\n        id: 'app.components.ConfirmDialog.title',\n        defaultMessage: 'Confirmation',\n      }),\n      variant: 'danger',\n      dialog: {\n        onCancel: () => {\n          setIsDraftRelationConfirmationOpen(false);\n        },\n        onConfirm: async () => {\n          await publish();\n\n          setIsDraftRelationConfirmationOpen(false);\n        },\n        type: 'dialog',\n        title: formatMessage({\n          id: getTranslation('actions.publish.dialog.title'),\n          defaultMessage: 'Confirmation',\n        }),\n        content: (\n          <Flex direction=\"column\" alignItems=\"center\" gap={2}>\n            <WarningCircle width=\"2.4rem\" height=\"2.4rem\" fill=\"danger600\" />\n            <Typography textAlign=\"center\">\n              {formatMessage({\n                id: getTranslation('CMEditViewBulkLocale.draft-relation-warning'),\n                defaultMessage:\n                  'Some locales are related to draft entries. Publishing them could leave broken links in your app.',\n              })}\n            </Typography>\n            <Typography textAlign=\"center\">\n              {formatMessage({\n                id: getTranslation('CMEditViewBulkLocale.continue-confirmation'),\n                defaultMessage: 'Are you sure you want to continue?',\n              })}\n            </Typography>\n          </Flex>\n        ),\n      },\n    };\n  }\n\n  const hasPermission = selectedRows\n    .map(({ locale }) => locale)\n    .every((locale) => canPublish.includes(locale));\n\n  return {\n    label: formatMessage({\n      id: getTranslation(`CMEditViewBulkLocale.${isBulkPublish ? 'publish' : 'unpublish'}-title`),\n      defaultMessage: `${isBulkPublish ? 'Publish' : 'Unpublish'} Multiple Locales`,\n    }),\n    variant: isBulkPublish ? 'secondary' : 'danger',\n    icon: isBulkPublish ? <ListPlus /> : <Cross />,\n    disabled: isOnPublishedTab || canPublish.length === 0,\n    position: ['panel'],\n    dialog: {\n      type: 'modal',\n      title: formatMessage({\n        id: getTranslation(`CMEditViewBulkLocale.${isBulkPublish ? 'publish' : 'unpublish'}-title`),\n        defaultMessage: `${isBulkPublish ? 'Publish' : 'Unpublish'} Multiple Locales`,\n      }),\n      content: () => {\n        return (\n          <Table.Root\n            headers={headers}\n            rows={rows.map((row) => ({\n              ...row,\n              id: row.locale,\n            }))}\n            selectedRows={selectedRows}\n            onSelectedRowsChange={(tableSelectedRows) => setSelectedRows(tableSelectedRows)}\n          >\n            <BulkLocaleActionModal\n              validationErrors={validationErrors}\n              headers={headers}\n              rows={rows}\n              localesMetadata={localesMetadata as Locale[]}\n              action={action ?? 'bulk-publish'}\n            />\n          </Table.Root>\n        );\n      },\n      footer: () => (\n        <Modal.Footer justifyContent=\"flex-end\">\n          <Button\n            loading={isDraftRelationsLoading}\n            disabled={!hasPermission || localesForAction.length === 0}\n            variant=\"default\"\n            onClick={handleAction}\n          >\n            {formatMessage({\n              id: isBulkPublish ? 'app.utils.publish' : 'app.utils.unpublish',\n              defaultMessage: isBulkPublish ? 'Publish' : 'Unpublish',\n            })}\n          </Button>\n        </Modal.Footer>\n      ),\n    },\n  };\n};\n\n/* -------------------------------------------------------------------------------------------------\n * BulkLocalePublishAction\n * -----------------------------------------------------------------------------------------------*/\nconst BulkLocalePublishAction: DocumentActionComponent = (props: ExtendedDocumentActionProps) => {\n  return BulkLocaleAction({ action: 'bulk-publish', ...props });\n};\n\n/* -------------------------------------------------------------------------------------------------\n * BulkLocaleUnpublishAction\n * -----------------------------------------------------------------------------------------------*/\nconst BulkLocaleUnpublishAction: DocumentActionComponent = (props: ExtendedDocumentActionProps) => {\n  return BulkLocaleAction({ action: 'bulk-unpublish', ...props });\n};\n\n/**\n * Because the icon system is completely broken, we have to do\n * this to remove the fill from the cog.\n */\nconst StyledTrash = styled(Trash)`\n  path {\n    fill: currentColor;\n  }\n`;\n\nexport {\n  BulkLocalePublishAction,\n  BulkLocaleUnpublishAction,\n  DeleteLocaleAction,\n  LocalePickerAction,\n  FillFromAnotherLocaleAction,\n};\n", "import * as React from 'react';\n\nimport { Typography } from '@strapi/design-system';\nimport { useIntl } from 'react-intl';\n\nimport { useI18n } from '../hooks/useI18n';\nimport { getTranslation } from '../utils/getTranslation';\n\nconst Emphasis = (chunks: React.ReactNode) => {\n  return (\n    <Typography fontWeight=\"semiBold\" textColor=\"danger500\">\n      {chunks}\n    </Typography>\n  );\n};\n\nconst DeleteModalAdditionalInfo = () => {\n  const { hasI18n } = useI18n();\n  const { formatMessage } = useIntl();\n\n  if (!hasI18n) {\n    return null;\n  }\n\n  return (\n    <Typography textColor=\"danger500\">\n      {formatMessage(\n        {\n          id: getTranslation('Settings.list.actions.deleteAdditionalInfos'),\n          defaultMessage:\n            'This will delete the active locale versions <em>(from Internationalization)</em>',\n        },\n        {\n          em: Emphasis,\n        }\n      )}\n    </Typography>\n  );\n};\n\nconst PublishModalAdditionalInfo = () => {\n  const { hasI18n } = useI18n();\n  const { formatMessage } = useIntl();\n\n  if (!hasI18n) {\n    return null;\n  }\n\n  return (\n    <Typography textColor=\"danger500\">\n      {formatMessage(\n        {\n          id: getTranslation('Settings.list.actions.publishAdditionalInfos'),\n          defaultMessage:\n            'This will publish the active locale versions <em>(from Internationalization)</em>',\n        },\n        {\n          em: Emphasis,\n        }\n      )}\n    </Typography>\n  );\n};\n\nconst UnpublishModalAdditionalInfo = () => {\n  const { hasI18n } = useI18n();\n  const { formatMessage } = useIntl();\n\n  if (!hasI18n) {\n    return null;\n  }\n\n  return (\n    <Typography textColor=\"danger500\">\n      {formatMessage(\n        {\n          id: getTranslation('Settings.list.actions.unpublishAdditionalInfos'),\n          defaultMessage:\n            'This will unpublish the active locale versions <em>(from Internationalization)</em>',\n        },\n        {\n          em: Emphasis,\n        }\n      )}\n    </Typography>\n  );\n};\n\nexport { DeleteModalAdditionalInfo, PublishModalAdditionalInfo, UnpublishModalAdditionalInfo };\n", "import * as React from 'react';\n\nimport { useQueryParams } from '@strapi/admin/strapi-admin';\nimport { SingleSelect, SingleSelectOption } from '@strapi/design-system';\nimport { useIntl } from 'react-intl';\n\nimport { useI18n } from '../hooks/useI18n';\nimport { useGetLocalesQuery } from '../services/locales';\nimport { getTranslation } from '../utils/getTranslation';\n\nimport type { I18nBaseQuery } from '../types';\n\ninterface Query extends I18nBaseQuery {\n  page?: number;\n}\n\nconst LocalePicker = () => {\n  const { formatMessage } = useIntl();\n  const [{ query }, setQuery] = useQueryParams<Query>();\n\n  const { hasI18n, canRead, canCreate } = useI18n();\n  const { data: locales = [] } = useGetLocalesQuery(undefined, {\n    skip: !hasI18n,\n  });\n\n  const handleChange = React.useCallback(\n    (code: string, replace = false) => {\n      setQuery(\n        {\n          page: 1,\n          plugins: { ...query.plugins, i18n: { locale: code } },\n        },\n        'push',\n        replace\n      );\n    },\n    [query.plugins, setQuery]\n  );\n\n  React.useEffect(() => {\n    if (!Array.isArray(locales) || !hasI18n) {\n      return;\n    }\n    /**\n     * Handle the case where the current locale query param doesn't exist\n     * in the list of available locales, so we redirect to the default locale.\n     */\n    const currentDesiredLocale = query.plugins?.i18n?.locale;\n    const doesLocaleExist = locales.find((loc) => loc.code === currentDesiredLocale);\n    const defaultLocale = locales.find((locale) => locale.isDefault);\n    if (!doesLocaleExist && defaultLocale?.code) {\n      handleChange(defaultLocale.code, true);\n    }\n  }, [hasI18n, handleChange, locales, query.plugins?.i18n?.locale]);\n\n  if (!hasI18n || !Array.isArray(locales) || locales.length === 0) {\n    return null;\n  }\n\n  const displayedLocales = locales.filter((locale) => {\n    /**\n     * If you can create or read we allow you to see the locale exists\n     * this is because in the ListView, you may be able to create a new entry\n     * in a locale you can't read.\n     */\n    return canCreate.includes(locale.code) || canRead.includes(locale.code);\n  });\n\n  return (\n    <SingleSelect\n      size=\"S\"\n      aria-label={formatMessage({\n        id: getTranslation('actions.select-locale'),\n        defaultMessage: 'Select locale',\n      })}\n      value={query.plugins?.i18n?.locale || locales.find((locale) => locale.isDefault)?.code}\n      // @ts-expect-error â€“ This can be removed in V2 of the DS.\n      onChange={handleChange}\n    >\n      {displayedLocales.map((locale) => (\n        <SingleSelectOption key={locale.id} value={locale.code}>\n          {locale.name}\n        </SingleSelectOption>\n      ))}\n    </SingleSelect>\n  );\n};\n\nexport { LocalePicker };\n", "/* eslint-disable check-file/filename-naming-convention */\nimport * as React from 'react';\n\nimport { Flex, VisuallyHidden } from '@strapi/design-system';\nimport { Earth, EarthStriked } from '@strapi/icons';\nimport { MessageDescriptor, useIntl } from 'react-intl';\nimport { styled } from 'styled-components';\n\nimport { getTranslation } from '../utils/getTranslation';\n\nimport type { EditFieldLayout, EditLayout } from '@strapi/content-manager/strapi-admin';\n\ninterface MutateEditViewArgs {\n  layout: EditLayout;\n}\n\nconst mutateEditViewHook = ({ layout }: MutateEditViewArgs): MutateEditViewArgs => {\n  // If i18n isn't explicitly enabled on the content type, then no field can be localized\n  if (\n    !('i18n' in layout.options) ||\n    (typeof layout.options.i18n === 'object' &&\n      layout.options.i18n !== null &&\n      'localized' in layout.options.i18n &&\n      !layout.options.i18n.localized)\n  ) {\n    return { layout };\n  }\n\n  const components = Object.entries(layout.components).reduce<EditLayout['components']>(\n    (acc, [key, componentLayout]) => {\n      return {\n        ...acc,\n        [key]: {\n          ...componentLayout,\n          layout: componentLayout.layout.map((row) => row.map(addLabelActionToField)),\n        },\n      };\n    },\n    {}\n  );\n\n  return {\n    layout: {\n      ...layout,\n      components,\n      layout: layout.layout.map((panel) => panel.map((row) => row.map(addLabelActionToField))),\n    },\n  } satisfies Pick<MutateEditViewArgs, 'layout'>;\n};\n\nconst addLabelActionToField = (field: EditFieldLayout) => {\n  const isFieldLocalized = doesFieldHaveI18nPluginOpt(field.attribute.pluginOptions)\n    ? field.attribute.pluginOptions.i18n.localized\n    : true || ['uid', 'relation'].includes(field.attribute.type);\n\n  const labelActionProps = {\n    title: {\n      id: isFieldLocalized\n        ? getTranslation('Field.localized')\n        : getTranslation('Field.not-localized'),\n      defaultMessage: isFieldLocalized\n        ? 'This value is unique for the selected locale'\n        : 'This value is the same across all locales',\n    },\n    icon: isFieldLocalized ? <Earth /> : null,\n  };\n\n  return {\n    ...field,\n    labelAction: isFieldLocalized ? <LabelAction {...labelActionProps} /> : null,\n  };\n};\n\nconst doesFieldHaveI18nPluginOpt = (\n  pluginOpts?: object\n): pluginOpts is { i18n: { localized: boolean } } => {\n  if (!pluginOpts) {\n    return false;\n  }\n\n  return (\n    'i18n' in pluginOpts &&\n    typeof pluginOpts.i18n === 'object' &&\n    pluginOpts.i18n !== null &&\n    'localized' in pluginOpts.i18n\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * LabelAction\n * -----------------------------------------------------------------------------------------------*/\n\ninterface LabelActionProps {\n  title: MessageDescriptor;\n  icon: React.ReactNode;\n}\n\nconst LabelAction = ({ title, icon }: LabelActionProps) => {\n  const { formatMessage } = useIntl();\n\n  return (\n    <Span tag=\"span\">\n      <VisuallyHidden tag=\"span\">{formatMessage(title)}</VisuallyHidden>\n      {React.cloneElement(icon as React.ReactElement, {\n        'aria-hidden': true,\n        focusable: false, // See: https://allyjs.io/tutorials/focusing-in-svg.html#making-svg-elements-focusable\n      })}\n    </Span>\n  );\n};\n\nconst Span = styled(Flex)`\n  svg {\n    width: 12px;\n    height: 12px;\n\n    fill: ${({ theme }) => theme.colors.neutral500};\n\n    path {\n      fill: ${({ theme }) => theme.colors.neutral500};\n    }\n  }\n`;\n\nexport { mutateEditViewHook };\n", "import { Box, Flex, Popover, Typography, useCollator, Button } from '@strapi/design-system';\nimport { CaretDown } from '@strapi/icons';\nimport { useIntl } from 'react-intl';\n\nimport { Locale } from '../../../shared/contracts/locales';\nimport { useGetLocalesQuery } from '../services/locales';\n\ninterface LocaleListCellProps {\n  localizations: { locale: string }[];\n  locale: string;\n}\n\nconst LocaleListCell = ({ locale: currentLocale, localizations }: LocaleListCellProps) => {\n  const { locale: language } = useIntl();\n  const { data: locales = [] } = useGetLocalesQuery();\n  const formatter = useCollator(language, {\n    sensitivity: 'base',\n  });\n\n  if (!Array.isArray(locales) || !localizations) {\n    return null;\n  }\n\n  const availableLocales = localizations.map((loc) => loc.locale);\n\n  const localesForDocument = locales\n    .reduce<Locale[]>((acc, locale) => {\n      const createdLocale = [currentLocale, ...availableLocales].find((loc) => {\n        return loc === locale.code;\n      });\n\n      if (createdLocale) {\n        acc.push(locale);\n      }\n\n      return acc;\n    }, [])\n    .map((locale) => {\n      if (locale.isDefault) {\n        return `${locale.name} (default)`;\n      }\n\n      return locale.name;\n    })\n    .toSorted((a, b) => formatter.compare(a, b));\n\n  return (\n    <Popover.Root>\n      <Popover.Trigger>\n        <Button variant=\"ghost\" type=\"button\" onClick={(e) => e.stopPropagation()}>\n          <Flex minWidth=\"100%\" alignItems=\"center\" justifyContent=\"center\" fontWeight=\"regular\">\n            <Typography textColor=\"neutral800\" ellipsis marginRight={2}>\n              {localesForDocument.join(', ')}\n            </Typography>\n            <Flex>\n              <CaretDown width=\"1.2rem\" height=\"1.2rem\" />\n            </Flex>\n          </Flex>\n        </Button>\n      </Popover.Trigger>\n      <Popover.Content sideOffset={16}>\n        <ul>\n          {localesForDocument.map((name) => (\n            <Box key={name} padding={3} tag=\"li\">\n              <Typography>{name}</Typography>\n            </Box>\n          ))}\n        </ul>\n      </Popover.Content>\n    </Popover.Root>\n  );\n};\n\nexport { LocaleListCell };\nexport type { LocaleListCellProps };\n", "/* eslint-disable check-file/filename-naming-convention */\nimport { LocaleListCell } from '../components/LocaleListCell';\nimport { doesPluginOptionsHaveI18nLocalized } from '../utils/fields';\nimport { getTranslation } from '../utils/getTranslation';\n\nimport type { ListFieldLayout, ListLayout } from '@strapi/content-manager/strapi-admin';\n\n/* -------------------------------------------------------------------------------------------------\n * addColumnToTableHook\n * -----------------------------------------------------------------------------------------------*/\ninterface AddColumnToTableHookArgs {\n  layout: ListLayout;\n  displayedHeaders: ListFieldLayout[];\n}\n\nconst addColumnToTableHook = ({ displayedHeaders, layout }: AddColumnToTableHookArgs) => {\n  const { options } = layout;\n\n  const isFieldLocalized = doesPluginOptionsHaveI18nLocalized(options)\n    ? options.i18n.localized\n    : false;\n\n  if (!isFieldLocalized) {\n    return { displayedHeaders, layout };\n  }\n\n  return {\n    displayedHeaders: [\n      ...displayedHeaders,\n      {\n        attribute: { type: 'string' },\n        label: {\n          id: getTranslation('list-view.table.header.label'),\n          defaultMessage: 'Available in',\n        },\n        searchable: false,\n        sortable: false,\n        name: 'locales',\n        // @ts-expect-error â€“ ID is seen as number | string; this will change when we move the type over.\n        cellFormatter: (props, _header, meta) => <LocaleListCell {...props} {...meta} />,\n      },\n    ],\n    layout,\n  };\n};\n\nexport { addColumnToTableHook };\n", "import type { Schema } from '@strapi/types';\n/* -------------------------------------------------------------------------------------------------\n * addLocaleToReleasesHook\n * -----------------------------------------------------------------------------------------------*/\ninterface AddLocaleToReleasesHookArgs {\n  displayedHeaders: {\n    key: string;\n    fieldSchema: Schema.Attribute.Kind | 'custom';\n    metadatas: {\n      label: { id: string; defaultMessage: string };\n      searchable: boolean;\n      sortable: boolean;\n    };\n    name: string;\n  }[];\n  hasI18nEnabled: boolean;\n}\n\nconst addLocaleToReleasesHook = ({ displayedHeaders = [] }: AddLocaleToReleasesHookArgs) => {\n  return {\n    displayedHeaders: [\n      ...displayedHeaders,\n      {\n        label: {\n          id: 'content-releases.page.ReleaseDetails.table.header.label.locale',\n          defaultMessage: 'locale',\n        },\n        name: 'locale',\n      },\n    ],\n    hasI18nEnabled: true,\n  };\n};\n\nexport { addLocaleToReleasesHook };\n", "import get from 'lodash/get';\n\nimport type { Middleware } from '@reduxjs/toolkit';\nimport type { Store } from '@strapi/admin/strapi-admin';\n\nconst extendCTBAttributeInitialDataMiddleware: () => Middleware<\n  object,\n  ReturnType<Store['getState']>\n> = () => {\n  return ({ getState }) =>\n    (next) =>\n    (action) => {\n      const enhanceAction = ({ uid }: { uid: string }) => {\n        // the block here is to catch the error when trying to access the state\n        // of the ctb when the plugin is not mounted\n        try {\n          const store = getState();\n\n          const type = get(store, [\n            'content-type-builder_dataManagerProvider',\n            'current',\n            'contentTypes',\n            uid,\n          ]);\n\n          if (!type || type.modelType !== 'contentType') {\n            return next(action);\n          }\n\n          const hasi18nEnabled = get(type, ['pluginOptions', 'i18n', 'localized'], false);\n\n          if (hasi18nEnabled) {\n            return next({\n              ...action,\n              payload: {\n                ...action.payload,\n                options: {\n                  pluginOptions: {\n                    ...(action?.payload?.options?.pluginOptions ?? {}),\n                    i18n: {\n                      localized: true,\n                    },\n                  },\n                },\n              },\n            });\n          }\n\n          return next(action);\n        } catch (err) {\n          return next(action);\n        }\n      };\n\n      const { payload = {}, type } = action ?? {};\n\n      if (\n        type === 'formModal/setAttributeDataSchema' &&\n        !['relation', 'component'].includes(payload.attributeType) &&\n        !payload.isEditing\n      ) {\n        return enhanceAction({\n          uid: payload.uid,\n        });\n      }\n\n      if (type === 'formModal/setCustomFieldDataSchema' && !payload.isEditing) {\n        return enhanceAction({\n          uid: payload.uid,\n        });\n      }\n\n      if (\n        type === 'formModal/resetPropsAndSetFormForAddingAnExistingCompo' ||\n        type === 'formModal/resetPropsAndSaveCurrentData'\n      ) {\n        return enhanceAction({\n          uid: payload.uid,\n        });\n      }\n\n      return next(action);\n    };\n};\n\nexport { extendCTBAttributeInitialDataMiddleware };\n", "import type { Middleware } from '@reduxjs/toolkit';\nimport type { Store } from '@strapi/admin/strapi-admin';\n\nconst extendCTBInitialDataMiddleware: () => Middleware<\n  object,\n  ReturnType<Store['getState']>\n> = () => {\n  return () => (next) => (action) => {\n    if (\n      action.type === 'ContentTypeBuilder/FormModal/SET_DATA_TO_EDIT' &&\n      action.modalType === 'contentType'\n    ) {\n      const i18n = { localized: false };\n\n      const pluginOptions = action.data.pluginOptions\n        ? { ...action.data.pluginOptions, i18n }\n        : { i18n };\n\n      const data = { ...action.data, pluginOptions };\n\n      if (action.actionType === 'create') {\n        return next({ ...action, data });\n      }\n\n      // Override the action if the pluginOption config does not contain i18n\n      // In this case we need to set the proper initialData shape\n      if (!action.data.pluginOptions?.i18n?.localized) {\n        return next({ ...action, data });\n      }\n    }\n\n    // action is not the one we want to override\n    return next(action);\n  };\n};\n\nexport { extendCTBInitialDataMiddleware };\n", "/* eslint-disable check-file/filename-naming-convention */\nimport * as qs from 'qs';\nimport { matchPath } from 'react-router-dom';\n\nimport type { RBACMiddleware } from '@strapi/admin/strapi-admin';\n\nconst localeMiddleware: RBACMiddleware = (ctx) => (next) => (permissions) => {\n  const match = matchPath('/content-manager/:collectionType/:model?/:id', ctx.pathname);\n\n  if (!match) {\n    return next(permissions);\n  }\n\n  const search = qs.parse(ctx.search);\n\n  if (typeof search !== 'object') {\n    return next(permissions);\n  }\n\n  if (!('plugins' in search && typeof search.plugins === 'object')) {\n    return next(permissions);\n  }\n\n  if (\n    !(\n      'i18n' in search.plugins &&\n      typeof search.plugins.i18n === 'object' &&\n      !Array.isArray(search.plugins.i18n)\n    )\n  ) {\n    return next(permissions);\n  }\n\n  const { locale } = search.plugins.i18n;\n\n  if (typeof locale !== 'string') {\n    return next(permissions);\n  }\n\n  const revisedPermissions = permissions.filter(\n    (permission) =>\n      !permission.properties?.locales || permission.properties.locales.includes(locale)\n  );\n\n  return next(revisedPermissions);\n};\n\nexport { localeMiddleware };\n", "type TradOptions = Record<string, string>;\n\nconst prefixPluginTranslations = (trad: TradOptions, pluginId: string): TradOptions => {\n  if (!pluginId) {\n    throw new TypeError(\"pluginId can't be empty\");\n  }\n  return Object.keys(trad).reduce((acc, current) => {\n    acc[`${pluginId}.${current}`] = trad[current];\n    return acc;\n  }, {} as TradOptions);\n};\n\nexport { prefixPluginTranslations };\n", "import omit from 'lodash/omit';\n\nimport { LOCALIZED_FIELDS, doesPluginOptionsHaveI18nLocalized } from './fields';\n\nimport type { Schema } from '@strapi/types';\n\n/* -------------------------------------------------------------------------------------------------\n * mutateCTBContentTypeSchema\n * -----------------------------------------------------------------------------------------------*/\n\n// TODO: refactor for CTB refactors\nconst mutateCTBContentTypeSchema = (\n  nextSchema: {\n    pluginOptions: Schema.ContentType['pluginOptions'];\n    attributes: Schema.Attribute.AnyAttribute[];\n    uid?: string;\n  },\n  prevSchema?: {\n    pluginOptions: Schema.ContentType['pluginOptions'];\n    attributes: Schema.Attribute.AnyAttribute[];\n    uid?: string;\n  }\n) => {\n  if (!prevSchema) {\n    return nextSchema;\n  }\n\n  // Don't perform mutations components\n  if (!doesPluginOptionsHaveI18nLocalized(nextSchema.pluginOptions)) {\n    return nextSchema;\n  }\n\n  const isNextSchemaLocalized = nextSchema.pluginOptions.i18n.localized;\n  const isPrevSchemaLocalized = doesPluginOptionsHaveI18nLocalized(prevSchema?.pluginOptions)\n    ? prevSchema?.pluginOptions.i18n.localized\n    : false;\n\n  // No need to perform modification on the schema, if the i18n feature was not changed\n  // at the ct level\n  if (isNextSchemaLocalized && isPrevSchemaLocalized) {\n    return nextSchema;\n  }\n\n  if (isNextSchemaLocalized) {\n    const attributes = addLocalisationToFields(nextSchema.attributes);\n\n    return {\n      ...nextSchema,\n      attributes,\n    };\n  }\n\n  // Remove the i18n object from the pluginOptions\n  if (!isNextSchemaLocalized) {\n    const pluginOptions = omit(nextSchema.pluginOptions, 'i18n');\n    const attributes = disableAttributesLocalisation(nextSchema.attributes);\n\n    return {\n      ...nextSchema,\n      pluginOptions,\n      attributes,\n    };\n  }\n\n  return nextSchema;\n};\n\n/* -------------------------------------------------------------------------------------------------\n * addLocalisationToFields\n * -----------------------------------------------------------------------------------------------*/\n\nconst addLocalisationToFields = (attributes: Schema.Attribute.AnyAttribute[]) => {\n  return attributes.map((currentAttribute) => {\n    if (LOCALIZED_FIELDS.includes(currentAttribute.type)) {\n      const i18n = { localized: true };\n\n      const pluginOptions = currentAttribute.pluginOptions\n        ? { ...currentAttribute.pluginOptions, i18n }\n        : { i18n };\n\n      return { ...currentAttribute, pluginOptions };\n    }\n\n    return currentAttribute;\n  });\n};\n\n/* -------------------------------------------------------------------------------------------------\n * disableAttributesLocalisation\n * -----------------------------------------------------------------------------------------------*/\n\nconst disableAttributesLocalisation = (attributes: Schema.Attribute.AnyAttribute[]) => {\n  return attributes.map((currentAttribute) => {\n    return omit(currentAttribute, 'pluginOptions.i18n');\n  });\n};\n\nexport { mutateCTBContentTypeSchema };\n", "import get from 'lodash/get';\nimport * as yup from 'yup';\n\nimport { CheckboxConfirmation } from './components/CheckboxConfirmation';\nimport {\n  BulkLocalePublishAction,\n  BulkLocaleUnpublishAction,\n  DeleteLocaleAction,\n  LocalePickerAction,\n  FillFromAnotherLocaleAction,\n} from './components/CMHeaderActions';\nimport {\n  DeleteModalAdditionalInfo,\n  PublishModalAdditionalInfo,\n  UnpublishModalAdditionalInfo,\n} from './components/CMListViewModalsAdditionalInformation';\nimport { LocalePicker } from './components/LocalePicker';\nimport { PERMISSIONS } from './constants';\nimport { mutateEditViewHook } from './contentManagerHooks/editView';\nimport { addColumnToTableHook } from './contentManagerHooks/listView';\nimport { addLocaleToReleasesHook } from './contentReleasesHooks/releaseDetailsView';\nimport { extendCTBAttributeInitialDataMiddleware } from './middlewares/extendCTBAttributeInitialData';\nimport { extendCTBInitialDataMiddleware } from './middlewares/extendCTBInitialData';\nimport { localeMiddleware } from './middlewares/rbac-middleware';\nimport { pluginId } from './pluginId';\nimport { i18nApi } from './services/api';\nimport { LOCALIZED_FIELDS } from './utils/fields';\nimport { getTranslation } from './utils/getTranslation';\nimport { prefixPluginTranslations } from './utils/prefixPluginTranslations';\nimport { mutateCTBContentTypeSchema } from './utils/schemas';\n\nimport type { DocumentActionComponent } from '@strapi/content-manager/strapi-admin';\n\n// eslint-disable-next-line import/no-default-export\nexport default {\n  register(app: any) {\n    app.addMiddlewares([extendCTBAttributeInitialDataMiddleware, extendCTBInitialDataMiddleware]);\n    app.addMiddlewares([() => i18nApi.middleware]);\n    app.addReducers({\n      [i18nApi.reducerPath]: i18nApi.reducer,\n    });\n    app.addRBACMiddleware([localeMiddleware]);\n    app.registerPlugin({\n      id: pluginId,\n      name: pluginId,\n    });\n  },\n  bootstrap(app: any) {\n    // // Hook that adds a column into the CM's LV table\n    app.registerHook('Admin/CM/pages/ListView/inject-column-in-table', addColumnToTableHook);\n    app.registerHook('Admin/CM/pages/EditView/mutate-edit-view-layout', mutateEditViewHook);\n    // Hooks that checks if the locale is present in the release\n    app.registerHook(\n      'ContentReleases/pages/ReleaseDetails/add-locale-in-releases',\n      addLocaleToReleasesHook\n    );\n\n    // Add the settings link\n    app.addSettingsLink('global', {\n      intlLabel: {\n        id: getTranslation('plugin.name'),\n        defaultMessage: 'Internationalization',\n      },\n      id: 'internationalization',\n      to: 'internationalization',\n      Component: () =>\n        import('./pages/SettingsPage').then((mod) => ({ default: mod.ProtectedSettingsPage })),\n      permissions: PERMISSIONS.accessMain,\n    });\n\n    const contentManager = app.getPlugin('content-manager');\n\n    contentManager.apis.addDocumentHeaderAction([LocalePickerAction, FillFromAnotherLocaleAction]);\n    contentManager.apis.addDocumentAction((actions: DocumentActionComponent[]) => {\n      const indexOfDeleteAction = actions.findIndex((action) => action.type === 'delete');\n      actions.splice(indexOfDeleteAction, 0, DeleteLocaleAction);\n      return actions;\n    });\n\n    contentManager.apis.addDocumentAction((actions: DocumentActionComponent[]) => {\n      // When enabled the bulk locale publish action should be the first action\n      // in 'More Document Actions' and therefore the third action in the array\n      actions.splice(2, 0, BulkLocalePublishAction);\n      actions.splice(5, 0, BulkLocaleUnpublishAction);\n      return actions;\n    });\n\n    contentManager.injectComponent('listView', 'actions', {\n      name: 'i18n-locale-filter',\n      Component: LocalePicker,\n    });\n\n    contentManager.injectComponent('listView', 'publishModalAdditionalInfos', {\n      name: 'i18n-publish-bullets-in-modal',\n      Component: PublishModalAdditionalInfo,\n    });\n\n    contentManager.injectComponent('listView', 'unpublishModalAdditionalInfos', {\n      name: 'i18n-unpublish-bullets-in-modal',\n      Component: UnpublishModalAdditionalInfo,\n    });\n\n    contentManager.injectComponent('listView', 'deleteModalAdditionalInfos', {\n      name: 'i18n-delete-bullets-in-modal',\n      Component: DeleteModalAdditionalInfo,\n    });\n\n    const ctbPlugin = app.getPlugin('content-type-builder');\n\n    if (ctbPlugin) {\n      const ctbFormsAPI = ctbPlugin.apis.forms;\n      ctbFormsAPI.addContentTypeSchemaMutation(mutateCTBContentTypeSchema);\n      ctbFormsAPI.components.add({ id: 'checkboxConfirmation', component: CheckboxConfirmation });\n\n      ctbFormsAPI.extendContentType({\n        validator: () => ({\n          i18n: yup.object().shape({\n            localized: yup.bool(),\n          }),\n        }),\n        form: {\n          advanced() {\n            return [\n              {\n                name: 'pluginOptions.i18n.localized',\n                description: {\n                  id: getTranslation('plugin.schema.i18n.localized.description-content-type'),\n                  defaultMessage: 'Allows translating an entry into different languages',\n                },\n                type: 'checkboxConfirmation',\n                intlLabel: {\n                  id: getTranslation('plugin.schema.i18n.localized.label-content-type'),\n                  defaultMessage: 'Localization',\n                },\n              },\n            ];\n          },\n        },\n      });\n\n      ctbFormsAPI.extendFields(LOCALIZED_FIELDS, {\n        form: {\n          advanced({ contentTypeSchema, forTarget, type, step }: any) {\n            if (forTarget !== 'contentType') {\n              return [];\n            }\n\n            const hasI18nEnabled = get(\n              contentTypeSchema,\n              ['pluginOptions', 'i18n', 'localized'],\n              false\n            );\n\n            if (!hasI18nEnabled) {\n              return [];\n            }\n\n            if (type === 'component' && step === '1') {\n              return [];\n            }\n\n            return [\n              {\n                name: 'pluginOptions.i18n.localized',\n                description: {\n                  id: getTranslation('plugin.schema.i18n.localized.description-field'),\n                  defaultMessage: 'The field can have different values in each locale',\n                },\n                type: 'checkbox',\n                intlLabel: {\n                  id: getTranslation('plugin.schema.i18n.localized.label-field'),\n                  defaultMessage: 'Enable localization for this field',\n                },\n              },\n            ];\n          },\n        },\n      });\n    }\n  },\n  async registerTrads({ locales }: { locales: string[] }) {\n    const importedTrads = await Promise.all(\n      locales.map((locale) => {\n        return import(`./translations/${locale}.json`)\n          .then(({ default: data }) => {\n            return {\n              data: prefixPluginTranslations(data, pluginId),\n              locale,\n            };\n          })\n          .catch(() => {\n            return {\n              data: {},\n              locale,\n            };\n          });\n      })\n    );\n\n    return Promise.resolve(importedTrads);\n  },\n};\n", "import * as React from 'react';\n\nimport {\n  useAPIErrorHandler,\n  useNotification,\n  useQueryParams,\n  useRBAC,\n  isFetchError,\n} from '@strapi/admin/strapi-admin';\nimport { unstable_useDocumentLayout as useDocumentLayout } from '@strapi/content-manager/strapi-admin';\nimport {\n  Box,\n  Button,\n  Flex,\n  SingleSelect,\n  SingleSelectOption,\n  EmptyStateLayout,\n  LinkButton,\n  Field,\n  Modal,\n} from '@strapi/design-system';\nimport { PaperPlane } from '@strapi/icons';\nimport { EmptyDocuments } from '@strapi/icons/symbols';\nimport { useFormik } from 'formik';\nimport { useIntl } from 'react-intl';\nimport { Link as ReactRouterLink } from 'react-router-dom';\nimport * as yup from 'yup';\n\nimport { CreateReleaseAction } from '../../../shared/contracts/release-actions';\nimport { PERMISSIONS } from '../constants';\nimport { useCreateReleaseActionMutation, useGetReleasesForEntryQuery } from '../services/release';\n\nimport { ReleaseActionOptions } from './ReleaseActionOptions';\n\nimport type {\n  DocumentActionComponent,\n  DocumentActionProps,\n} from '@strapi/content-manager/strapi-admin';\nimport type { UID } from '@strapi/types';\n\n/* -------------------------------------------------------------------------------------------------\n * AddActionToReleaseModal\n * -----------------------------------------------------------------------------------------------*/\nexport const RELEASE_ACTION_FORM_SCHEMA = yup.object().shape({\n  type: yup.string().oneOf(['publish', 'unpublish']).required(),\n  releaseId: yup.string().required(),\n});\n\nexport interface FormValues {\n  type: CreateReleaseAction.Request['body']['type'];\n  releaseId: CreateReleaseAction.Request['params']['releaseId'];\n}\n\nexport const INITIAL_VALUES = {\n  type: 'publish',\n  releaseId: '',\n} satisfies FormValues;\n\ninterface AddActionToReleaseModalProps {\n  contentType: string;\n  documentId?: string;\n  onInputChange: (field: keyof FormValues, value: string | number) => void;\n  values: FormValues;\n}\n\nexport const NoReleases = () => {\n  const { formatMessage } = useIntl();\n  return (\n    <EmptyStateLayout\n      icon={<EmptyDocuments width=\"16rem\" />}\n      content={formatMessage({\n        id: 'content-releases.content-manager-edit-view.add-to-release.no-releases-message',\n        defaultMessage:\n          'No available releases. Open the list of releases and create a new one from there.',\n      })}\n      action={\n        <LinkButton\n          to={{\n            pathname: '/plugins/content-releases',\n          }}\n          tag={ReactRouterLink}\n          variant=\"secondary\"\n        >\n          {formatMessage({\n            id: 'content-releases.content-manager-edit-view.add-to-release.redirect-button',\n            defaultMessage: 'Open the list of releases',\n          })}\n        </LinkButton>\n      }\n      shadow=\"none\"\n    />\n  );\n};\n\nconst AddActionToReleaseModal = ({\n  contentType,\n  documentId,\n  onInputChange,\n  values,\n}: AddActionToReleaseModalProps) => {\n  const { formatMessage } = useIntl();\n  const [{ query }] = useQueryParams<{ plugins?: { i18n?: { locale?: string } } }>();\n  const locale = query.plugins?.i18n?.locale;\n\n  // Get all 'pending' releases that do not have the entry attached\n  const response = useGetReleasesForEntryQuery({\n    contentType,\n    entryDocumentId: documentId,\n    hasEntryAttached: false,\n    locale,\n  });\n\n  const releases = response.data?.data;\n\n  if (releases?.length === 0) {\n    return <NoReleases />;\n  }\n\n  return (\n    <Flex direction=\"column\" alignItems=\"stretch\" gap={2}>\n      <Box paddingBottom={6}>\n        <Field.Root required>\n          <Field.Label>\n            {formatMessage({\n              id: 'content-releases.content-manager-edit-view.add-to-release.select-label',\n              defaultMessage: 'Select a release',\n            })}\n          </Field.Label>\n          <SingleSelect\n            required\n            placeholder={formatMessage({\n              id: 'content-releases.content-manager-edit-view.add-to-release.select-placeholder',\n              defaultMessage: 'Select',\n            })}\n            name=\"releaseId\"\n            onChange={(value) => onInputChange('releaseId', value)}\n            value={values.releaseId}\n          >\n            {releases?.map((release) => (\n              <SingleSelectOption key={release.id} value={release.id}>\n                {release.name}\n              </SingleSelectOption>\n            ))}\n          </SingleSelect>\n        </Field.Root>\n      </Box>\n      <Field.Label>\n        {formatMessage({\n          id: 'content-releases.content-manager-edit-view.add-to-release.action-type-label',\n          defaultMessage: 'What do you want to do with this entry?',\n        })}\n      </Field.Label>\n      <ReleaseActionOptions\n        selected={values.type}\n        handleChange={(e) => onInputChange('type', e.target.value)}\n        name=\"type\"\n      />\n    </Flex>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * ReleaseActionModalForm\n * -----------------------------------------------------------------------------------------------*/\n\nconst ReleaseActionModalForm: DocumentActionComponent = ({\n  documentId,\n  document,\n  model,\n  collectionType,\n}: DocumentActionProps) => {\n  const { formatMessage } = useIntl();\n  const { allowedActions } = useRBAC(PERMISSIONS);\n  const { canCreateAction } = allowedActions;\n  const [createReleaseAction, { isLoading }] = useCreateReleaseActionMutation();\n  const { toggleNotification } = useNotification();\n  const { formatAPIError } = useAPIErrorHandler();\n  const [{ query }] = useQueryParams<{ plugins?: { i18n?: { locale?: string } } }>();\n  const locale = query.plugins?.i18n?.locale;\n\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>, onClose: () => void) => {\n    try {\n      await formik.handleSubmit(e);\n      onClose();\n    } catch (error) {\n      if (isFetchError(error)) {\n        // Handle axios error\n        toggleNotification({\n          type: 'danger',\n          message: formatAPIError(error),\n        });\n      } else {\n        // Handle generic error\n        toggleNotification({\n          type: 'danger',\n          message: formatMessage({\n            id: 'notification.error',\n            defaultMessage: 'An error occurred',\n          }),\n        });\n      }\n    }\n  };\n\n  const formik = useFormik({\n    initialValues: INITIAL_VALUES,\n    validationSchema: RELEASE_ACTION_FORM_SCHEMA,\n    onSubmit: async (values: FormValues) => {\n      if (collectionType === 'collection-types' && !documentId) {\n        throw new Error('Document id is required');\n      }\n\n      const response = await createReleaseAction({\n        body: {\n          type: values.type,\n          contentType: model as UID.ContentType,\n          entryDocumentId: documentId,\n          locale,\n        },\n        params: { releaseId: values.releaseId },\n      });\n\n      if ('data' in response) {\n        // Handle success\n        toggleNotification({\n          type: 'success',\n          message: formatMessage({\n            id: 'content-releases.content-manager-edit-view.add-to-release.notification.success',\n            defaultMessage: 'Entry added to release',\n          }),\n        });\n\n        return;\n      }\n\n      if ('error' in response) {\n        throw response.error;\n      }\n    },\n  });\n\n  const {\n    edit: { options },\n  } = useDocumentLayout(model);\n\n  // Project is not EE or contentType does not have draftAndPublish enabled\n  if (!window.strapi.isEE || !options?.draftAndPublish || !canCreateAction) {\n    return null;\n  }\n\n  if (collectionType === 'collection-types' && (!documentId || documentId === 'create')) {\n    return null;\n  }\n\n  return {\n    label: formatMessage({\n      id: 'content-releases.content-manager-edit-view.add-to-release',\n      defaultMessage: 'Add to release',\n    }),\n    icon: <PaperPlane />,\n    // Entry is creating so we don't want to allow adding it to a release\n    disabled: !document,\n    position: ['panel', 'table-row'],\n    dialog: {\n      type: 'modal',\n      title: formatMessage({\n        id: 'content-releases.content-manager-edit-view.add-to-release',\n        defaultMessage: 'Add to release',\n      }),\n      content: (\n        <AddActionToReleaseModal\n          contentType={model}\n          documentId={documentId}\n          onInputChange={formik.setFieldValue}\n          values={formik.values}\n        />\n      ),\n      footer: ({ onClose }) => (\n        <Modal.Footer>\n          <Button onClick={onClose} variant=\"tertiary\" name=\"cancel\">\n            {formatMessage({\n              id: 'content-releases.content-manager-edit-view.add-to-release.cancel-button',\n              defaultMessage: 'Cancel',\n            })}\n          </Button>\n          <Button\n            type=\"submit\"\n            // @ts-expect-error - formik ReactEvent types don't match button onClick types as they expect a MouseEvent\n            onClick={(e) => handleSubmit(e, onClose)}\n            disabled={!formik.values.releaseId}\n            loading={isLoading}\n          >\n            {formatMessage({\n              id: 'content-releases.content-manager-edit-view.add-to-release.continue-button',\n              defaultMessage: 'Continue',\n            })}\n          </Button>\n        </Modal.Footer>\n      ),\n    },\n  };\n};\n\nexport { ReleaseActionModalForm };\n", "import * as React from 'react';\n\nimport {\n  useAPIErrorHandler,\n  useNotification,\n  useQueryParams,\n  useRBAC,\n  isFetchError,\n} from '@strapi/admin/strapi-admin';\nimport { unstable_useContentManagerContext as useContentManagerContext } from '@strapi/content-manager/strapi-admin';\nimport {\n  Box,\n  Button,\n  Flex,\n  SingleSelect,\n  SingleSelectOption,\n  Modal,\n  Field,\n} from '@strapi/design-system';\nimport { Formik, Form } from 'formik';\nimport { useIntl } from 'react-intl';\n\nimport { CreateManyReleaseActions } from '../../../shared/contracts/release-actions';\nimport { PERMISSIONS as releasePermissions } from '../constants';\nimport { useCreateManyReleaseActionsMutation, useGetReleasesQuery } from '../services/release';\n\nimport {\n  type FormValues,\n  INITIAL_VALUES,\n  RELEASE_ACTION_FORM_SCHEMA,\n  NoReleases,\n} from './ReleaseActionModal';\nimport { ReleaseActionOptions } from './ReleaseActionOptions';\n\nimport type { BulkActionComponent } from '@strapi/content-manager/strapi-admin';\nimport type { UID } from '@strapi/types';\n\nconst getContentPermissions = (subject: string) => {\n  const permissions = {\n    publish: [\n      {\n        action: 'plugin::content-manager.explorer.publish',\n        subject,\n        id: '',\n        actionParameters: {},\n        properties: {},\n        conditions: [],\n      },\n    ],\n  };\n\n  return permissions;\n};\n\nconst ReleaseAction: BulkActionComponent = ({ documents, model }) => {\n  const { formatMessage } = useIntl();\n  const { toggleNotification } = useNotification();\n  const { formatAPIError } = useAPIErrorHandler();\n  const [{ query }] = useQueryParams<{ plugins?: { i18n?: { locale?: string } } }>();\n  const contentPermissions = getContentPermissions(model);\n  const {\n    allowedActions: { canPublish },\n  } = useRBAC(contentPermissions);\n  const {\n    allowedActions: { canCreate },\n  } = useRBAC(releasePermissions);\n  const { hasDraftAndPublish } = useContentManagerContext();\n\n  // Get all the releases not published\n  const response = useGetReleasesQuery();\n  const releases = response.data?.data;\n  const [createManyReleaseActions, { isLoading }] = useCreateManyReleaseActionsMutation();\n  const documentIds = documents.map((doc) => doc.documentId);\n\n  const handleSubmit = async (values: FormValues) => {\n    const locale = query.plugins?.i18n?.locale;\n\n    const releaseActionEntries: CreateManyReleaseActions.Request['body'] = documentIds.map(\n      (entryDocumentId) => ({\n        type: values.type,\n        contentType: model as UID.ContentType,\n        entryDocumentId,\n        locale,\n      })\n    );\n\n    const response = await createManyReleaseActions({\n      body: releaseActionEntries,\n      params: { releaseId: values.releaseId },\n    });\n\n    if ('data' in response) {\n      // Handle success\n\n      const notificationMessage = formatMessage(\n        {\n          id: 'content-releases.content-manager-list-view.add-to-release.notification.success.message',\n          defaultMessage:\n            '{entriesAlreadyInRelease} out of {totalEntries} entries were already in the release.',\n        },\n        {\n          entriesAlreadyInRelease: response.data.meta.entriesAlreadyInRelease,\n          totalEntries: response.data.meta.totalEntries,\n        }\n      );\n\n      const notification = {\n        type: 'success' as const,\n        title: formatMessage(\n          {\n            id: 'content-releases.content-manager-list-view.add-to-release.notification.success.title',\n            defaultMessage: 'Successfully added to release.',\n          },\n          {\n            entriesAlreadyInRelease: response.data.meta.entriesAlreadyInRelease,\n            totalEntries: response.data.meta.totalEntries,\n          }\n        ),\n        message: response.data.meta.entriesAlreadyInRelease ? notificationMessage : '',\n      };\n\n      toggleNotification(notification);\n\n      return true;\n    }\n\n    if ('error' in response) {\n      if (isFetchError(response.error)) {\n        // Handle fetch error\n        toggleNotification({\n          type: 'warning',\n          message: formatAPIError(response.error),\n        });\n      } else {\n        // Handle generic error\n        toggleNotification({\n          type: 'warning',\n          message: formatMessage({ id: 'notification.error', defaultMessage: 'An error occurred' }),\n        });\n      }\n    }\n  };\n\n  if (!hasDraftAndPublish || !canCreate || !canPublish) return null;\n\n  return {\n    actionType: 'release',\n    variant: 'tertiary',\n    label: formatMessage({\n      id: 'content-manager-list-view.add-to-release',\n      defaultMessage: 'Add to Release',\n    }),\n    dialog: {\n      type: 'modal',\n      title: formatMessage({\n        id: 'content-manager-list-view.add-to-release',\n        defaultMessage: 'Add to Release',\n      }),\n      content: ({ onClose }) => {\n        return (\n          <Formik\n            onSubmit={async (values) => {\n              const data = await handleSubmit(values);\n              if (data) {\n                return onClose();\n              }\n            }}\n            validationSchema={RELEASE_ACTION_FORM_SCHEMA}\n            initialValues={INITIAL_VALUES}\n          >\n            {({ values, setFieldValue }) => (\n              <Form>\n                {releases?.length === 0 ? (\n                  <NoReleases />\n                ) : (\n                  <Modal.Body>\n                    <Flex direction=\"column\" alignItems=\"stretch\" gap={2}>\n                      <Box paddingBottom={6}>\n                        <Field.Root required>\n                          <Field.Label>\n                            {formatMessage({\n                              id: 'content-releases.content-manager-list-view.add-to-release.select-label',\n                              defaultMessage: 'Select a release',\n                            })}\n                          </Field.Label>\n                          <SingleSelect\n                            placeholder={formatMessage({\n                              id: 'content-releases.content-manager-list-view.add-to-release.select-placeholder',\n                              defaultMessage: 'Select',\n                            })}\n                            onChange={(value) => setFieldValue('releaseId', value)}\n                            value={values.releaseId}\n                          >\n                            {releases?.map((release) => (\n                              <SingleSelectOption key={release.id} value={release.id}>\n                                {release.name}\n                              </SingleSelectOption>\n                            ))}\n                          </SingleSelect>\n                        </Field.Root>\n                      </Box>\n                      <Field.Label>\n                        {formatMessage({\n                          id: 'content-releases.content-manager-list-view.add-to-release.action-type-label',\n                          defaultMessage: 'What do you want to do with these entries?',\n                        })}\n                      </Field.Label>\n                      <ReleaseActionOptions\n                        selected={values.type}\n                        handleChange={(e) => setFieldValue('type', e.target.value)}\n                        name=\"type\"\n                      />\n                    </Flex>\n                  </Modal.Body>\n                )}\n                <Modal.Footer>\n                  <Button onClick={onClose} variant=\"tertiary\" name=\"cancel\">\n                    {formatMessage({\n                      id: 'content-releases.content-manager-list-view.add-to-release.cancel-button',\n                      defaultMessage: 'Cancel',\n                    })}\n                  </Button>\n                  {/** * TODO: Ideally we would use isValid from Formik to disable the button,\n                  however currently it always returns true * for yup.string().required(), even when\n                  the value is falsy (including empty string) */}\n                  <Button type=\"submit\" disabled={!values.releaseId} loading={isLoading}>\n                    {formatMessage({\n                      id: 'content-releases.content-manager-list-view.add-to-release.continue-button',\n                      defaultMessage: 'Continue',\n                    })}\n                  </Button>\n                </Modal.Footer>\n              </Form>\n            )}\n          </Formik>\n        );\n      },\n    },\n  };\n};\n\nexport { ReleaseAction };\n", "import * as React from 'react';\n\nimport { useTable, useQueryParams } from '@strapi/admin/strapi-admin';\nimport { ListFieldLayout, ListLayout } from '@strapi/content-manager/strapi-admin';\nimport { Box, Popover, Typography, Button, Link } from '@strapi/design-system';\nimport { CaretDown } from '@strapi/icons';\nimport { useIntl } from 'react-intl';\n\nimport { useGetMappedEntriesInReleasesQuery } from '../services/release';\n\nimport type { Modules, UID } from '@strapi/types';\n\n/* -------------------------------------------------------------------------------------------------\n * useReleasesList\n * -----------------------------------------------------------------------------------------------*/\ninterface QueryParams {\n  plugins?: {\n    i18n?: {\n      locale: string;\n    };\n  };\n}\n\nconst useReleasesList = (contentTypeUid: UID.ContentType, documentId: Modules.Documents.ID) => {\n  const listViewData = useTable('ListView', (state) => state.rows);\n  const documentIds = listViewData.map((entry) => entry.documentId);\n  const [{ query }] = useQueryParams();\n  const locale = (query as QueryParams)?.plugins?.i18n?.locale || undefined;\n\n  const response = useGetMappedEntriesInReleasesQuery(\n    { contentTypeUid, documentIds, locale },\n    { skip: !documentIds || !contentTypeUid || documentIds.length === 0 }\n  );\n\n  const mappedEntriesInReleases = response.data || {};\n\n  return mappedEntriesInReleases?.[documentId] || [];\n};\n\n/* -------------------------------------------------------------------------------------------------\n * addColumnToTableHook\n * -----------------------------------------------------------------------------------------------*/\n\ninterface AddColumnToTableHookArgs {\n  layout: ListLayout;\n  displayedHeaders: ListFieldLayout[];\n}\n\nconst addColumnToTableHook = ({ displayedHeaders, layout }: AddColumnToTableHookArgs) => {\n  const { options } = layout;\n\n  if (!options?.draftAndPublish) {\n    return { displayedHeaders, layout };\n  }\n\n  return {\n    displayedHeaders: [\n      ...displayedHeaders,\n      {\n        searchable: false,\n        sortable: false,\n        name: 'releases',\n        label: {\n          id: 'content-releases.content-manager.list-view.releases.header',\n          defaultMessage: 'To be released in',\n        },\n        cellFormatter: (\n          props: Modules.Documents.AnyDocument,\n          _: any,\n          { model }: { model: UID.ContentType }\n        ) => <ReleaseListCell {...props} model={model} />,\n      },\n    ],\n    layout,\n  };\n};\n\n/* -------------------------------------------------------------------------------------------------\n * ReleaseListCell\n * -----------------------------------------------------------------------------------------------*/\n\ninterface ReleaseListCellProps extends Modules.Documents.AnyDocument {\n  documentId: Modules.Documents.ID;\n  model: UID.ContentType;\n}\n\nconst ReleaseListCell = ({ documentId, model }: ReleaseListCellProps) => {\n  const releases = useReleasesList(model, documentId);\n  const { formatMessage } = useIntl();\n\n  return (\n    <Popover.Root>\n      <Popover.Trigger>\n        <Button\n          variant=\"ghost\"\n          onClick={(e: React.MouseEvent<HTMLElement>) => e.stopPropagation()}\n          // TODO: find a way in the DS to define the widht and height of the icon\n          endIcon={releases.length > 0 ? <CaretDown width=\"1.2rem\" height=\"1.2rem\" /> : null}\n        >\n          <Typography\n            style={{ maxWidth: '252px', cursor: 'pointer' }}\n            textColor=\"neutral800\"\n            fontWeight=\"regular\"\n          >\n            {releases.length > 0\n              ? formatMessage(\n                  {\n                    id: 'content-releases.content-manager.list-view.releases-number',\n                    defaultMessage: '{number} {number, plural, one {release} other {releases}}',\n                  },\n                  {\n                    number: releases.length,\n                  }\n                )\n              : '-'}\n          </Typography>\n        </Button>\n      </Popover.Trigger>\n      <Popover.Content>\n        <ul>\n          {releases.map(({ id, name }) => (\n            <Box key={id} padding={3} tag=\"li\">\n              <Link href={`/admin/plugins/content-releases/${id}`} isExternal={false}>\n                {name}\n              </Link>\n            </Box>\n          ))}\n        </ul>\n      </Popover.Content>\n    </Popover.Root>\n  );\n};\n\nexport { ReleaseListCell, addColumnToTableHook };\nexport type { ReleaseListCellProps };\n", "import { useRBAC, useQueryParams } from '@strapi/admin/strapi-admin';\nimport { unstable_useDocumentLayout as useDocumentLayout } from '@strapi/content-manager/strapi-admin';\nimport { Box, Flex, Typography } from '@strapi/design-system';\nimport { useIntl } from 'react-intl';\n\nimport { PERMISSIONS } from '../constants';\nimport { useGetReleasesForEntryQuery } from '../services/release';\nimport { getTimezoneOffset } from '../utils/time';\n\nimport { ReleaseActionMenu } from './ReleaseActionMenu';\n\nimport type { PanelComponent, PanelComponentProps } from '@strapi/content-manager/strapi-admin';\n\nconst Panel: PanelComponent = ({\n  model,\n  document,\n  documentId,\n  collectionType,\n}: PanelComponentProps) => {\n  const [{ query }] = useQueryParams<{ plugins: { i18n: { locale: string } } }>();\n  const locale = query.plugins?.i18n?.locale;\n\n  const {\n    edit: { options },\n  } = useDocumentLayout(model);\n  const { formatMessage, formatDate, formatTime } = useIntl();\n\n  const { allowedActions } = useRBAC(PERMISSIONS);\n  const { canRead, canDeleteAction } = allowedActions;\n\n  const response = useGetReleasesForEntryQuery(\n    {\n      contentType: model,\n      entryDocumentId: documentId,\n      locale,\n      hasEntryAttached: true,\n    },\n    {\n      skip: !document,\n    }\n  );\n  const releases = response.data?.data;\n\n  const getReleaseColorVariant = (\n    actionType: 'publish' | 'unpublish',\n    shade: '100' | '200' | '600'\n  ) => {\n    if (actionType === 'unpublish') {\n      return `secondary${shade}`;\n    }\n\n    return `success${shade}`;\n  };\n\n  // Project is not EE or contentType does not have draftAndPublish enabled\n  if (!window.strapi.isEE || !options?.draftAndPublish || !canRead) {\n    return null;\n  }\n\n  if (collectionType === 'collection-types' && (!documentId || documentId === 'create')) {\n    return null;\n  }\n\n  if (!releases || releases.length === 0) {\n    return null;\n  }\n\n  return {\n    title: formatMessage({\n      id: 'content-releases.plugin.name',\n      defaultMessage: 'Releases',\n    }),\n    content: (\n      <Flex direction=\"column\" alignItems=\"stretch\" gap={3} width=\"100%\">\n        {releases?.map((release) => (\n          <Flex\n            key={release.id}\n            direction=\"column\"\n            alignItems=\"start\"\n            borderWidth=\"1px\"\n            borderStyle=\"solid\"\n            borderColor={getReleaseColorVariant(release.actions[0].type, '200')}\n            overflow=\"hidden\"\n            hasRadius\n          >\n            <Box\n              paddingTop={3}\n              paddingBottom={3}\n              paddingLeft={4}\n              paddingRight={4}\n              background={getReleaseColorVariant(release.actions[0].type, '100')}\n              width=\"100%\"\n            >\n              <Typography\n                fontSize={1}\n                variant=\"pi\"\n                textColor={getReleaseColorVariant(release.actions[0].type, '600')}\n              >\n                {formatMessage(\n                  {\n                    id: 'content-releases.content-manager-edit-view.list-releases.title',\n                    defaultMessage:\n                      '{isPublish, select, true {Will be published in} other {Will be unpublished in}}',\n                  },\n                  { isPublish: release.actions[0].type === 'publish' }\n                )}\n              </Typography>\n            </Box>\n            <Flex padding={4} direction=\"column\" gap={2} width=\"100%\" alignItems=\"flex-start\">\n              <Typography fontSize={2} fontWeight=\"bold\" variant=\"omega\" textColor=\"neutral700\">\n                {release.name}\n              </Typography>\n              {release.scheduledAt && release.timezone && (\n                <Typography variant=\"pi\" textColor=\"neutral600\">\n                  {formatMessage(\n                    {\n                      id: 'content-releases.content-manager-edit-view.scheduled.date',\n                      defaultMessage: '{date} at {time} ({offset})',\n                    },\n                    {\n                      date: formatDate(new Date(release.scheduledAt), {\n                        day: '2-digit',\n                        month: '2-digit',\n                        year: 'numeric',\n                        timeZone: release.timezone,\n                      }),\n                      time: formatTime(new Date(release.scheduledAt), {\n                        hourCycle: 'h23',\n                        timeZone: release.timezone,\n                      }),\n                      offset: getTimezoneOffset(release.timezone, new Date(release.scheduledAt)),\n                    }\n                  )}\n                </Typography>\n              )}\n              {canDeleteAction ? (\n                <ReleaseActionMenu.Root hasTriggerBorder>\n                  <ReleaseActionMenu.EditReleaseItem releaseId={release.id} />\n                  <ReleaseActionMenu.DeleteReleaseActionItem\n                    releaseId={release.id}\n                    actionId={release.actions[0].id}\n                  />\n                </ReleaseActionMenu.Root>\n              ) : null}\n            </Flex>\n          </Flex>\n        ))}\n      </Flex>\n    ),\n  };\n};\n\nexport { Panel };\n", "type TradOptions = Record<string, string>;\n\nconst prefixPluginTranslations = (trad: TradOptions, pluginId: string): TradOptions => {\n  if (!pluginId) {\n    throw new TypeError(\"pluginId can't be empty\");\n  }\n  return Object.keys(trad).reduce((acc, current) => {\n    acc[`${pluginId}.${current}`] = trad[current];\n    return acc;\n  }, {} as TradOptions);\n};\n\nexport { prefixPluginTranslations };\n", "import { PaperPlane } from '@strapi/icons';\n\nimport { ReleaseAction } from './components/ReleaseAction';\nimport { ReleaseActionModalForm } from './components/ReleaseActionModal';\nimport { addColumnToTableHook } from './components/ReleaseListCell';\nimport { Panel as ReleasesPanel } from './components/ReleasesPanel';\nimport { PERMISSIONS, PLUGIN_ID } from './constants';\nimport { pluginId } from './pluginId';\nimport { prefixPluginTranslations } from './utils/prefixPluginTranslations';\n\nimport type { StrapiApp } from '@strapi/admin/strapi-admin';\nimport type {\n  DocumentActionComponent,\n  BulkActionComponent,\n} from '@strapi/content-manager/strapi-admin';\nimport type { Plugin } from '@strapi/types';\n\n// eslint-disable-next-line import/no-default-export\nconst admin: Plugin.Config.AdminInput = {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  register(app: StrapiApp) {\n    /**\n     * Hook that adds the locale column in the Release Details table\n     * @constant\n     * @type {string}\n     */\n    app.createHook('ContentReleases/pages/ReleaseDetails/add-locale-in-releases');\n\n    if (window.strapi.features.isEnabled('cms-content-releases')) {\n      app.addMenuLink({\n        to: `plugins/${pluginId}`,\n        icon: PaperPlane,\n        intlLabel: {\n          id: `${pluginId}.plugin.name`,\n          defaultMessage: 'Releases',\n        },\n        Component: () => import('./pages/App').then((mod) => ({ default: mod.App })),\n        permissions: PERMISSIONS.main,\n        position: 2,\n      });\n\n      // Insert the releases container into the CM's sidebar on the Edit View\n      const contentManagerPluginApis = app.getPlugin('content-manager').apis;\n      if (\n        'addEditViewSidePanel' in contentManagerPluginApis &&\n        typeof contentManagerPluginApis.addEditViewSidePanel === 'function'\n      ) {\n        contentManagerPluginApis.addEditViewSidePanel([ReleasesPanel]);\n      }\n\n      // Insert the \"add to release\" action into the CM's Edit View\n      if (\n        'addDocumentAction' in contentManagerPluginApis &&\n        typeof contentManagerPluginApis.addDocumentAction === 'function'\n      ) {\n        contentManagerPluginApis.addDocumentAction((actions: DocumentActionComponent[]) => {\n          const indexOfDeleteAction = actions.findIndex((action) => action.type === 'unpublish');\n          actions.splice(indexOfDeleteAction, 0, ReleaseActionModalForm);\n          return actions;\n        });\n      }\n\n      app.addSettingsLink('global', {\n        id: pluginId,\n        to: 'releases',\n        intlLabel: {\n          id: `${pluginId}.plugin.name`,\n          defaultMessage: 'Releases',\n        },\n        licenseOnly: true,\n        permissions: [],\n        async Component() {\n          const { ProtectedReleasesSettingsPage } = await import('./pages/ReleasesSettingsPage');\n          return { default: ProtectedReleasesSettingsPage };\n        },\n      });\n\n      if (\n        'addBulkAction' in contentManagerPluginApis &&\n        typeof contentManagerPluginApis.addBulkAction === 'function'\n      ) {\n        contentManagerPluginApis.addBulkAction((actions: BulkActionComponent[]) => {\n          // We want to add this action to just before the delete action all the time\n          const deleteActionIndex = actions.findIndex((action) => action.type === 'delete');\n\n          actions.splice(deleteActionIndex, 0, ReleaseAction);\n          return actions;\n        });\n      }\n\n      // Hook that adds a column into the CM's LV table\n      app.registerHook('Admin/CM/pages/ListView/inject-column-in-table', addColumnToTableHook);\n\n      app.widgets.register([\n        {\n          icon: PaperPlane,\n          title: {\n            id: `${PLUGIN_ID}.widget.upcoming-releases.title`,\n            defaultMessage: 'Upcoming releases',\n          },\n          component: async () => {\n            const { UpcomingReleasesWidget } = await import('./components/Widgets');\n            return UpcomingReleasesWidget;\n          },\n          pluginId: PLUGIN_ID,\n          id: 'upcoming-releases',\n          link: {\n            label: {\n              id: `${PLUGIN_ID}.widget.upcoming-releases.link`,\n              defaultMessage: 'Open Releases',\n            },\n            href: '/plugins/content-releases',\n          },\n        },\n      ]);\n    } else if (\n      !window.strapi.features.isEnabled('cms-content-releases') &&\n      window.strapi?.flags?.promoteEE\n    ) {\n      app.addSettingsLink('global', {\n        id: pluginId,\n        to: '/plugins/purchase-content-releases',\n        intlLabel: {\n          id: `${pluginId}.plugin.name`,\n          defaultMessage: 'Releases',\n        },\n        permissions: [],\n        async Component() {\n          const { PurchaseContentReleases } = await import('./pages/PurchaseContentReleases');\n          return { default: PurchaseContentReleases };\n        },\n        licenseOnly: true,\n      });\n    }\n  },\n  async registerTrads({ locales }: { locales: string[] }) {\n    const importedTrads = await Promise.all(\n      locales.map((locale) => {\n        return import(`./translations/${locale}.json`)\n          .then(({ default: data }) => {\n            return {\n              data: prefixPluginTranslations(data, 'content-releases'),\n              locale,\n            };\n          })\n          .catch(() => {\n            return {\n              data: {},\n              locale,\n            };\n          });\n      })\n    );\n\n    return Promise.resolve(importedTrads);\n  },\n};\n\n// eslint-disable-next-line import/no-default-export\nexport default admin;\n", "export const STAGE_ATTRIBUTE_NAME = 'strapi_stage';\nexport const ASSIGNEE_ATTRIBUTE_NAME = 'strapi_assignee';\n", "import * as React from 'react';\n\nimport {\n  useNotification,\n  useAPIErrorHandler,\n  useRBAC,\n  useAdminUsers,\n  useQueryParams,\n} from '@strapi/admin/strapi-admin';\nimport { unstable_useDocument } from '@strapi/content-manager/strapi-admin';\nimport { Combobox, ComboboxOption, Field, VisuallyHidden } from '@strapi/design-system';\nimport { useIntl } from 'react-intl';\nimport { useParams } from 'react-router-dom';\n\nimport { useTypedSelector } from '../../../../../modules/hooks';\nimport { useUpdateAssigneeMutation } from '../../../../../services/content-manager';\nimport { buildValidParams } from '../../../../../utils/api';\nimport { getDisplayName } from '../../../../../utils/users';\n\nimport { ASSIGNEE_ATTRIBUTE_NAME } from './constants';\n\nconst AssigneeSelect = ({ isCompact }: { isCompact?: boolean }) => {\n  const {\n    collectionType = '',\n    id,\n    slug: model = '',\n  } = useParams<{ collectionType: string; slug: string; id: string }>();\n  const permissions = useTypedSelector((state) => state.admin_app.permissions);\n  const { formatMessage } = useIntl();\n  const { _unstableFormatAPIError: formatAPIError } = useAPIErrorHandler();\n  const { toggleNotification } = useNotification();\n  const {\n    allowedActions: { canRead },\n    isLoading: isLoadingPermissions,\n  } = useRBAC(permissions.settings?.users);\n  const [{ query }] = useQueryParams();\n  const params = React.useMemo(() => buildValidParams(query), [query]);\n  const {\n    data,\n    isLoading: isLoadingUsers,\n    isError,\n  } = useAdminUsers(undefined, {\n    skip: isLoadingPermissions || !canRead,\n  });\n  const { document } = unstable_useDocument(\n    {\n      collectionType,\n      model,\n      documentId: id,\n    },\n    {\n      skip: !id && collectionType !== 'single-types',\n    }\n  );\n\n  const users = data?.users || [];\n\n  const currentAssignee = document ? document[ASSIGNEE_ATTRIBUTE_NAME] : null;\n\n  const [updateAssignee, { error, isLoading: isMutating }] = useUpdateAssigneeMutation();\n\n  if (!collectionType || !model || !document?.documentId) {\n    return null;\n  }\n\n  const handleChange = async (assigneeId: string | null) => {\n    // a simple way to avoid erroneous updates\n    if (currentAssignee?.id === assigneeId) {\n      return;\n    }\n\n    const res = await updateAssignee({\n      slug: collectionType,\n      model,\n      id: document.documentId,\n      params,\n      data: {\n        id: assigneeId ? parseInt(assigneeId, 10) : null,\n      },\n    });\n\n    if ('data' in res) {\n      toggleNotification({\n        type: 'success',\n        message: formatMessage({\n          id: 'content-manager.reviewWorkflows.assignee.notification.saved',\n          defaultMessage: 'Assignee updated',\n        }),\n      });\n    }\n\n    if (isCompact && 'error' in res) {\n      toggleNotification({\n        type: 'danger',\n        message: formatAPIError(res.error),\n      });\n    }\n  };\n\n  const isDisabled =\n    (!isLoadingPermissions && !isLoadingUsers && users.length === 0) || !document.documentId;\n  const isLoading = isLoadingUsers || isLoadingPermissions || isMutating;\n\n  const assigneeLabel = formatMessage({\n    id: 'content-manager.reviewWorkflows.assignee.label',\n    defaultMessage: 'Assignee',\n  });\n  const assigneeClearLabel = formatMessage({\n    id: 'content-manager.reviewWorkflows.assignee.clear',\n    defaultMessage: 'Clear assignee',\n  });\n  const assigneePlaceholder = formatMessage({\n    id: 'content-manager.reviewWorkflows.assignee.placeholder',\n    defaultMessage: 'Selectâ€¦',\n  });\n\n  if (isCompact) {\n    return (\n      <Field.Root name={ASSIGNEE_ATTRIBUTE_NAME} id={ASSIGNEE_ATTRIBUTE_NAME}>\n        <VisuallyHidden>\n          <Field.Label>{assigneeLabel}</Field.Label>\n        </VisuallyHidden>\n        <Combobox\n          clearLabel={assigneeClearLabel}\n          disabled={isDisabled}\n          value={currentAssignee ? currentAssignee.id.toString() : null}\n          onChange={handleChange}\n          onClear={() => handleChange(null)}\n          placeholder={assigneePlaceholder}\n          loading={isLoading || isLoadingPermissions || isMutating}\n          size=\"S\"\n        >\n          {users.map((user) => {\n            return (\n              <ComboboxOption\n                key={user.id}\n                value={user.id.toString()}\n                textValue={getDisplayName(user)}\n              >\n                {getDisplayName(user)}\n              </ComboboxOption>\n            );\n          })}\n        </Combobox>\n      </Field.Root>\n    );\n  }\n\n  return (\n    <Field.Root\n      name={ASSIGNEE_ATTRIBUTE_NAME}\n      id={ASSIGNEE_ATTRIBUTE_NAME}\n      error={\n        ((isError &&\n          canRead &&\n          formatMessage({\n            id: 'content-manager.reviewWorkflows.assignee.error',\n            defaultMessage: 'An error occurred while fetching users',\n          })) ||\n          (error && formatAPIError(error))) ??\n        undefined\n      }\n    >\n      <Field.Label>{assigneeLabel}</Field.Label>\n      <Combobox\n        clearLabel={assigneeClearLabel}\n        disabled={\n          (!isLoadingPermissions && !isLoading && users.length === 0) || !document.documentId\n        }\n        value={currentAssignee ? currentAssignee.id.toString() : null}\n        onChange={handleChange}\n        onClear={() => handleChange(null)}\n        placeholder={assigneePlaceholder}\n        loading={isLoading || isLoadingPermissions || isMutating}\n      >\n        {users.map((user) => {\n          return (\n            <ComboboxOption\n              key={user.id}\n              value={user.id.toString()}\n              textValue={getDisplayName(user)}\n            >\n              {getDisplayName(user)}\n            </ComboboxOption>\n          );\n        })}\n      </Combobox>\n      <Field.Error />\n    </Field.Root>\n  );\n};\n\nexport { AssigneeSelect };\n", "import * as React from 'react';\n\nimport { useNotification, useAPIErrorHandler, useQueryParams } from '@strapi/admin/strapi-admin';\nimport { useLicenseLimits } from '@strapi/admin/strapi-admin/ee';\nimport { unstable_useDocument } from '@strapi/content-manager/strapi-admin';\nimport {\n  SingleSelect,\n  type SingleSelectProps,\n  SingleSelectOption,\n  Field,\n  Flex,\n  Loader,\n  Typography,\n  VisuallyHidden,\n  Tooltip,\n} from '@strapi/design-system';\nimport { useIntl } from 'react-intl';\nimport { useParams } from 'react-router-dom';\n\nimport { Stage } from '../../../../../../../shared/contracts/review-workflows';\nimport { LimitsModal, LimitsModalProps } from '../../../../../components/LimitsModal';\nimport {\n  CHARGEBEE_STAGES_PER_WORKFLOW_ENTITLEMENT_NAME,\n  CHARGEBEE_WORKFLOW_ENTITLEMENT_NAME,\n} from '../../../../../constants';\nimport { useGetStagesQuery, useUpdateStageMutation } from '../../../../../services/content-manager';\nimport { buildValidParams } from '../../../../../utils/api';\nimport { getStageColorByHex } from '../../../../../utils/colors';\n\nimport { STAGE_ATTRIBUTE_NAME } from './constants';\n\nimport type { Data } from '@strapi/types';\n\n/* -------------------------------------------------------------------------------------------------\n * LimitModals\n * -----------------------------------------------------------------------------------------------*/\n\nconst WorkflowLimitModal = ({ open, onOpenChange }: LimitsModalProps) => {\n  const { formatMessage } = useIntl();\n\n  return (\n    <LimitsModal.Root open={open} onOpenChange={onOpenChange}>\n      <LimitsModal.Title>\n        {formatMessage({\n          id: 'content-manager.reviewWorkflows.workflows.limit.title',\n          defaultMessage: 'Youâ€™ve reached the limit of workflows in your plan',\n        })}\n      </LimitsModal.Title>\n\n      <LimitsModal.Body>\n        {formatMessage({\n          id: 'content-manager.reviewWorkflows.workflows.limit.body',\n          defaultMessage: 'Delete a workflow or contact Sales to enable more workflows.',\n        })}\n      </LimitsModal.Body>\n    </LimitsModal.Root>\n  );\n};\n\nconst StageLimitModal = ({ open, onOpenChange }: LimitsModalProps) => {\n  const { formatMessage } = useIntl();\n\n  return (\n    <LimitsModal.Root open={open} onOpenChange={onOpenChange}>\n      <LimitsModal.Title>\n        {formatMessage({\n          id: 'content-manager.reviewWorkflows.stages.limit.title',\n          defaultMessage: 'You have reached the limit of stages for this workflow in your plan',\n        })}\n      </LimitsModal.Title>\n\n      <LimitsModal.Body>\n        {formatMessage({\n          id: 'content-manager.reviewWorkflows.stages.limit.body',\n          defaultMessage: 'Try deleting some stages or contact Sales to enable more stages.',\n        })}\n      </LimitsModal.Body>\n    </LimitsModal.Root>\n  );\n};\n\n/* -------------------------------------------------------------------------------------------------\n * StageSelect\n * -----------------------------------------------------------------------------------------------*/\n\nconst Select = ({\n  stages,\n  activeWorkflowStage,\n  isLoading,\n  ...props\n}: SingleSelectProps & { stages: Stage[]; activeWorkflowStage: Stage; isLoading: boolean }) => {\n  const { formatMessage } = useIntl();\n  const { themeColorName } = getStageColorByHex(activeWorkflowStage?.color) ?? {};\n\n  return (\n    <SingleSelect\n      disabled={stages.length === 0}\n      placeholder={formatMessage({\n        id: 'content-manager.reviewWorkflows.assignee.placeholder',\n        defaultMessage: 'Selectâ€¦',\n      })}\n      startIcon={\n        activeWorkflowStage && (\n          <Flex\n            tag=\"span\"\n            height={2}\n            background={activeWorkflowStage?.color}\n            borderColor={themeColorName === 'neutral0' ? 'neutral150' : undefined}\n            hasRadius\n            shrink={0}\n            width={2}\n            marginRight=\"-3px\"\n          />\n        )\n      }\n      // @ts-expect-error â€“ `customizeContent` is not correctly typed in the DS.\n      customizeContent={() => {\n        return (\n          <Flex tag=\"span\" justifyContent=\"space-between\" alignItems=\"center\" width=\"100%\">\n            <Typography textColor=\"neutral800\" ellipsis lineHeight=\"inherit\">\n              {activeWorkflowStage?.name ?? ''}\n            </Typography>\n            {isLoading ? <Loader small style={{ display: 'flex' }} data-testid=\"loader\" /> : null}\n          </Flex>\n        );\n      }}\n      {...props}\n    >\n      {stages.map(({ id, color, name }) => {\n        const { themeColorName } = getStageColorByHex(color) ?? {};\n\n        return (\n          <SingleSelectOption\n            key={id}\n            startIcon={\n              <Flex\n                height={2}\n                background={color}\n                borderColor={themeColorName === 'neutral0' ? 'neutral150' : undefined}\n                hasRadius\n                shrink={0}\n                width={2}\n              />\n            }\n            value={id}\n            textValue={name}\n          >\n            {name}\n          </SingleSelectOption>\n        );\n      })}\n    </SingleSelect>\n  );\n};\n\nexport const StageSelect = ({ isCompact }: { isCompact?: boolean }) => {\n  const {\n    collectionType = '',\n    slug: model = '',\n    id = '',\n  } = useParams<{\n    collectionType: string;\n    slug: string;\n    id: string;\n  }>();\n  const { formatMessage } = useIntl();\n  const { _unstableFormatAPIError: formatAPIError } = useAPIErrorHandler();\n  const { toggleNotification } = useNotification();\n  const [{ query }] = useQueryParams();\n  const params = React.useMemo(() => buildValidParams(query), [query]);\n  const { document, isLoading: isLoadingDocument } = unstable_useDocument(\n    {\n      collectionType,\n      model,\n      documentId: id,\n    },\n    {\n      skip: !id && collectionType !== 'single-types',\n    }\n  );\n\n  const { data, isLoading: isLoadingStages } = useGetStagesQuery(\n    {\n      slug: collectionType,\n      model: model,\n      // @ts-expect-error â€“ `id` is not correctly typed in the DS.\n      id: document?.documentId,\n      params,\n    },\n    {\n      skip: !document?.documentId,\n    }\n  );\n\n  const { meta, stages = [] } = data ?? {};\n\n  const { getFeature } = useLicenseLimits();\n  const [showLimitModal, setShowLimitModal] = React.useState<'stage' | 'workflow' | null>(null);\n\n  const limits = getFeature<string>('review-workflows') ?? {};\n\n  const activeWorkflowStage = document ? document[STAGE_ATTRIBUTE_NAME] : null;\n\n  const [updateStage, { error }] = useUpdateStageMutation();\n\n  const handleChange = async (stageId: Data.ID) => {\n    try {\n      /**\n       * If the current license has a limit:\n       * check if the total count of workflows exceeds that limit and display\n       * the limits modal.\n       *\n       * If the current license does not have a limit (e.g. offline license):\n       * do nothing (for now).\n       *\n       */\n\n      if (\n        limits?.[CHARGEBEE_WORKFLOW_ENTITLEMENT_NAME] &&\n        parseInt(limits[CHARGEBEE_WORKFLOW_ENTITLEMENT_NAME], 10) < (meta?.workflowCount ?? 0)\n      ) {\n        setShowLimitModal('workflow');\n\n        /**\n         * If the current license has a limit:\n         * check if the total count of stages exceeds that limit and display\n         * the limits modal.\n         *\n         * If the current license does not have a limit (e.g. offline license):\n         * do nothing (for now).\n         *\n         */\n      } else if (\n        limits?.[CHARGEBEE_STAGES_PER_WORKFLOW_ENTITLEMENT_NAME] &&\n        parseInt(limits[CHARGEBEE_STAGES_PER_WORKFLOW_ENTITLEMENT_NAME], 10) < stages.length\n      ) {\n        setShowLimitModal('stage');\n      } else {\n        if (document?.documentId) {\n          const res = await updateStage({\n            model,\n            id: document.documentId,\n            slug: collectionType,\n            params,\n            data: { id: stageId },\n          });\n\n          if ('data' in res) {\n            toggleNotification({\n              type: 'success',\n              message: formatMessage({\n                id: 'content-manager.reviewWorkflows.stage.notification.saved',\n                defaultMessage: 'Review stage updated',\n              }),\n            });\n          }\n\n          if (isCompact && 'error' in res) {\n            toggleNotification({\n              type: 'danger',\n              message: formatAPIError(res.error),\n            });\n          }\n        }\n      }\n    } catch (error) {\n      toggleNotification({\n        type: 'danger',\n        message: formatMessage({\n          id: 'content-manager.reviewWorkflows.stage.notification.error',\n          defaultMessage: 'An error occurred while updating the review stage',\n        }),\n      });\n    }\n  };\n\n  const isLoading = isLoadingStages || isLoadingDocument;\n\n  const reviewStageLabel = formatMessage({\n    id: 'content-manager.reviewWorkflows.stage.label',\n    defaultMessage: 'Review stage',\n  });\n  const reviewStageHint =\n    !isLoading &&\n    stages.length === 0 &&\n    // TODO: Handle errors and hints\n    formatMessage({\n      id: 'content-manager.reviewWorkflows.stages.no-transition',\n      defaultMessage: 'You donâ€™t have the permission to update this stage.',\n    });\n\n  if (isCompact) {\n    return (\n      <>\n        <Tooltip label={reviewStageHint}>\n          <Field.Root name={STAGE_ATTRIBUTE_NAME} id={STAGE_ATTRIBUTE_NAME}>\n            <>\n              <VisuallyHidden>\n                <Field.Label>{reviewStageLabel}</Field.Label>\n              </VisuallyHidden>\n              <Select\n                stages={stages}\n                activeWorkflowStage={activeWorkflowStage}\n                isLoading={isLoading}\n                size=\"S\"\n                disabled={stages.length === 0}\n                value={activeWorkflowStage?.id}\n                onChange={handleChange}\n                placeholder={formatMessage({\n                  id: 'content-manager.reviewWorkflows.assignee.placeholder',\n                  defaultMessage: 'Selectâ€¦',\n                })}\n              />\n            </>\n          </Field.Root>\n        </Tooltip>\n        <WorkflowLimitModal\n          open={showLimitModal === 'workflow'}\n          onOpenChange={() => setShowLimitModal(null)}\n        />\n        <StageLimitModal\n          open={showLimitModal === 'stage'}\n          onOpenChange={() => setShowLimitModal(null)}\n        />\n      </>\n    );\n  }\n\n  return (\n    <>\n      <Field.Root\n        hint={reviewStageHint}\n        error={(error && formatAPIError(error)) || undefined}\n        name={STAGE_ATTRIBUTE_NAME}\n        id={STAGE_ATTRIBUTE_NAME}\n      >\n        <Field.Label>{reviewStageLabel}</Field.Label>\n        <Select\n          stages={stages}\n          activeWorkflowStage={activeWorkflowStage}\n          isLoading={isLoading}\n          disabled={stages.length === 0}\n          value={activeWorkflowStage?.id}\n          onChange={handleChange}\n          placeholder={formatMessage({\n            id: 'content-manager.reviewWorkflows.assignee.placeholder',\n            defaultMessage: 'Selectâ€¦',\n          })}\n        />\n        <Field.Hint />\n        <Field.Error />\n      </Field.Root>\n      <WorkflowLimitModal\n        open={showLimitModal === 'workflow'}\n        onOpenChange={() => setShowLimitModal(null)}\n      />\n      <StageLimitModal\n        open={showLimitModal === 'stage'}\n        onOpenChange={() => setShowLimitModal(null)}\n      />\n    </>\n  );\n};\n", "import { unstable_useDocumentLayout as useDocumentLayout } from '@strapi/content-manager/strapi-admin';\nimport { Flex } from '@strapi/design-system';\nimport { useParams } from 'react-router-dom';\n\nimport { AssigneeSelect } from './AssigneeSelect';\nimport { StageSelect } from './StageSelect';\n\nconst Header = () => {\n  const {\n    slug = '',\n    id,\n    collectionType,\n  } = useParams<{\n    collectionType: string;\n    slug: string;\n    id: string;\n  }>();\n\n  const {\n    edit: { options },\n  } = useDocumentLayout(slug);\n\n  if (\n    !window.strapi.isEE ||\n    !options?.reviewWorkflows ||\n    (collectionType !== 'single-types' && !id) ||\n    id === 'create'\n  ) {\n    return null;\n  }\n\n  return (\n    <Flex gap={2}>\n      <AssigneeSelect isCompact />\n      <StageSelect isCompact />\n    </Flex>\n  );\n};\n\nHeader.type = 'preview';\n\nexport { Header };\n", "import { unstable_useDocumentLayout as useDocumentLayout } from '@strapi/content-manager/strapi-admin';\nimport { Flex } from '@strapi/design-system';\nimport { useIntl } from 'react-intl';\nimport { useParams } from 'react-router-dom';\n\nimport { AssigneeSelect } from './AssigneeSelect';\nimport { StageSelect } from './StageSelect';\n\nimport type { PanelComponent } from '@strapi/content-manager/strapi-admin';\n\nconst Panel: PanelComponent = () => {\n  const {\n    slug = '',\n    id,\n    collectionType,\n  } = useParams<{\n    collectionType: string;\n    slug: string;\n    id: string;\n  }>();\n\n  const {\n    edit: { options },\n  } = useDocumentLayout(slug);\n  const { formatMessage } = useIntl();\n\n  if (\n    !window.strapi.isEE ||\n    !options?.reviewWorkflows ||\n    (collectionType !== 'single-types' && !id) ||\n    id === 'create'\n  ) {\n    return null;\n  }\n\n  return {\n    title: formatMessage({\n      id: 'content-manager.containers.edit.panels.review-workflows.title',\n      defaultMessage: 'Review Workflows',\n    }),\n    content: (\n      <Flex direction=\"column\" gap={2} alignItems=\"stretch\" width=\"100%\">\n        <AssigneeSelect />\n        <StageSelect />\n      </Flex>\n    ),\n  };\n};\n\n// @ts-expect-error â€“ this is fine, we like to label the core panels / actions.\nPanel.type = 'review-workflows';\n\nexport { Panel };\n", "import { AssigneeFilter } from './components/AssigneeFilter';\nimport { StageFilter } from './components/StageFilter';\nimport { AssigneeColumn, StageColumn } from './components/TableColumns';\nimport { ASSIGNEE_ATTRIBUTE_NAME, STAGE_ATTRIBUTE_NAME } from './id/components/constants';\n\nimport type { Filters } from '@strapi/admin/strapi-admin';\nimport type { ListFieldLayout } from '@strapi/content-manager/strapi-admin';\nimport type { MessageDescriptor } from 'react-intl';\n\nexport const REVIEW_WORKFLOW_COLUMNS = [\n  {\n    name: STAGE_ATTRIBUTE_NAME,\n    attribute: {\n      type: 'relation',\n      relation: 'oneToMany',\n      target: 'admin::review-workflow-stage',\n    },\n    label: {\n      id: 'review-workflows.containers.list.table-headers.reviewWorkflows.stage',\n      defaultMessage: 'Review stage',\n    },\n    searchable: false,\n    sortable: true,\n    mainField: {\n      name: 'name',\n      type: 'string',\n    },\n    cellFormatter: (props) => <StageColumn {...props} />,\n  },\n  {\n    name: ASSIGNEE_ATTRIBUTE_NAME,\n    attribute: {\n      type: 'relation',\n      target: 'admin::user',\n      relation: 'oneToMany',\n    },\n    label: {\n      id: 'review-workflows.containers.list.table-headers.reviewWorkflows.assignee',\n      defaultMessage: 'Assignee',\n    },\n    searchable: false,\n    sortable: true,\n    mainField: {\n      name: 'firstname',\n      type: 'string',\n    },\n    cellFormatter: (props) => <AssigneeColumn {...props} />,\n  },\n] satisfies Array<Omit<ListFieldLayout, 'label'> & { label: MessageDescriptor }>;\n\nexport const REVIEW_WORKFLOW_FILTERS = [\n  {\n    mainField: {\n      name: 'name',\n      type: 'string',\n    },\n    input: StageFilter,\n    label: {\n      id: 'review-workflows.containers.list.table-headers.reviewWorkflows.stage',\n      defaultMessage: 'Review stage',\n    },\n    name: 'strapi_stage',\n    type: 'relation',\n  },\n\n  {\n    type: 'relation',\n    mainField: {\n      name: 'id',\n      type: 'integer',\n    },\n    input: AssigneeFilter,\n    operators: [\n      {\n        label: {\n          id: 'components.FilterOptions.FILTER_TYPES.$eq',\n          defaultMessage: 'is',\n        },\n        value: '$eq',\n      },\n      {\n        label: {\n          id: 'components.FilterOptions.FILTER_TYPES.$ne',\n          defaultMessage: 'is not',\n        },\n        value: '$ne',\n      },\n    ],\n    label: {\n      id: 'review-workflows.containers.list.table-headers.reviewWorkflows.assignee.label',\n      defaultMessage: 'Assignee',\n    },\n    name: 'strapi_assignee',\n  },\n] satisfies Array<\n  Omit<Filters.Filter, 'label' | 'operators'> & {\n    label: MessageDescriptor;\n    operators?: Array<{ value: string; label: MessageDescriptor }>;\n  }\n>;\n", "import { REVIEW_WORKFLOW_COLUMNS } from '../routes/content-manager/model/constants';\n\nimport type { ListFieldLayout, ListLayout } from '@strapi/content-manager/strapi-admin';\n\n/* -------------------------------------------------------------------------------------------------\n * addColumnToTableHook\n * -----------------------------------------------------------------------------------------------*/\ninterface AddColumnToTableHookArgs {\n  layout: ListLayout;\n  displayedHeaders: ListFieldLayout[];\n}\n\nconst addColumnToTableHook = ({ displayedHeaders, layout }: AddColumnToTableHookArgs) => {\n  const { options } = layout;\n\n  if (!options.reviewWorkflows) {\n    return { displayedHeaders, layout };\n  }\n\n  return {\n    displayedHeaders: [...displayedHeaders, ...REVIEW_WORKFLOW_COLUMNS],\n    layout,\n  };\n};\n\nexport { addColumnToTableHook };\n", "type TradOptions = Record<string, string>;\n\nconst prefixPluginTranslations = (trad: TradOptions, pluginId: string): TradOptions => {\n  if (!pluginId) {\n    throw new TypeError(\"pluginId can't be empty\");\n  }\n  return Object.keys(trad).reduce((acc, current) => {\n    acc[`${pluginId}.${current}`] = trad[current];\n    return acc;\n  }, {} as TradOptions);\n};\n\nexport { prefixPluginTranslations };\n", "import { SealCheck } from '@strapi/icons';\n\nimport { PLUGIN_ID, FEATURE_ID } from './constants';\nimport { Header } from './routes/content-manager/model/id/components/Header';\nimport { Panel } from './routes/content-manager/model/id/components/Panel';\nimport { addColumnToTableHook } from './utils/cm-hooks';\nimport { prefixPluginTranslations } from './utils/translations';\n\nimport type { StrapiApp, WidgetArgs } from '@strapi/admin/strapi-admin';\nimport type { Plugin } from '@strapi/types';\n\nconst admin: Plugin.Config.AdminInput = {\n  register(app: StrapiApp) {\n    if (window.strapi.features.isEnabled(FEATURE_ID)) {\n      app.registerHook('Admin/CM/pages/ListView/inject-column-in-table', addColumnToTableHook);\n\n      const contentManagerPluginApis = app.getPlugin('content-manager').apis;\n\n      if (\n        'addEditViewSidePanel' in contentManagerPluginApis &&\n        typeof contentManagerPluginApis.addEditViewSidePanel === 'function'\n      ) {\n        contentManagerPluginApis.addEditViewSidePanel([Panel]);\n      }\n\n      app.addSettingsLink('global', {\n        id: PLUGIN_ID,\n        to: `review-workflows`,\n        intlLabel: {\n          id: `${PLUGIN_ID}.plugin.name`,\n          defaultMessage: 'Review Workflows',\n        },\n        licenseOnly: true,\n        permissions: [],\n        async Component() {\n          const { Router } = await import('./router');\n          return { default: Router };\n        },\n      });\n\n      // Always put the assigned to me widget last in the list of widgets\n      app.widgets.register((widgets: WidgetArgs[]) => [\n        ...widgets,\n        {\n          icon: SealCheck,\n          title: {\n            id: `${PLUGIN_ID}.widget.assigned.title`,\n            defaultMessage: 'Assigned to me',\n          },\n          component: async () => {\n            const { AssignedWidget } = await import('./components/Widgets');\n            return AssignedWidget;\n          },\n          pluginId: PLUGIN_ID,\n          id: 'assigned',\n          permissions: [{ action: 'plugin::content-manager.explorer.read' }],\n        },\n      ]);\n    } else if (!window.strapi.features.isEnabled(FEATURE_ID) && window.strapi?.flags?.promoteEE) {\n      app.addSettingsLink('global', {\n        id: PLUGIN_ID,\n        to: `purchase-review-workflows`,\n        intlLabel: {\n          id: `${PLUGIN_ID}.plugin.name`,\n          defaultMessage: 'Review Workflows',\n        },\n        licenseOnly: true,\n        permissions: [],\n        async Component() {\n          const { PurchaseReviewWorkflows } = await import('./routes/purchase-review-workflows');\n          return { default: PurchaseReviewWorkflows };\n        },\n      });\n    }\n  },\n  bootstrap(app: StrapiApp) {\n    if (window.strapi.features.isEnabled(FEATURE_ID)) {\n      app.getPlugin('content-manager').injectComponent('preview', 'actions', {\n        name: 'review-workflows-assignee',\n        Component: Header,\n      });\n    }\n  },\n  async registerTrads({ locales }: { locales: string[] }) {\n    const importedTrads = await Promise.all(\n      locales.map((locale) => {\n        return import(`./translations/${locale}.json`)\n          .then(({ default: data }) => {\n            return {\n              data: prefixPluginTranslations(data, PLUGIN_ID),\n              locale,\n            };\n          })\n          .catch(() => {\n            return {\n              data: {},\n              locale,\n            };\n          });\n      })\n    );\n\n    return Promise.resolve(importedTrads);\n  },\n};\n\n// eslint-disable-next-line import/no-default-export\nexport default admin;\n", "import { RenderAdminArgs, renderAdmin } from '@strapi/admin/strapi-admin';\nimport contentTypeBuilder from '@strapi/content-type-builder/strapi-admin';\nimport contentManager from '@strapi/content-manager/strapi-admin';\nimport email from '@strapi/email/strapi-admin';\nimport upload from '@strapi/upload/strapi-admin';\nimport i18n from '@strapi/i18n/strapi-admin';\nimport contentReleases from '@strapi/content-releases/strapi-admin';\nimport reviewWorkflows from '@strapi/review-workflows/strapi-admin';\n\nconst render = (mountNode: HTMLElement | null, { plugins, ...restArgs }: RenderAdminArgs) => {\n  return renderAdmin(mountNode, {\n    ...restArgs,\n    plugins: {\n      'content-manager': contentManager,\n      'content-type-builder': contentTypeBuilder,\n      email,\n      upload,\n      contentReleases,\n      i18n,\n      reviewWorkflows,\n      ...plugins,\n    },\n  });\n};\n\nexport { render as renderAdmin };\nexport type { RenderAdminArgs };\n\nexport * from '@strapi/admin/strapi-admin';\n\nexport {\n  unstable_useDocumentLayout,\n  unstable_useDocumentActions,\n  unstable_useDocument,\n  unstable_useContentManagerContext,\n  useDocumentRBAC,\n} from '@strapi/content-manager/strapi-admin';\n\nexport {\n  private_useAutoReloadOverlayBlocker,\n  private_AutoReloadOverlayBlockerProvider,\n} from '@strapi/content-type-builder/strapi-admin';\n"],
  "mappings": "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",
  "names": ["prefixPluginTranslations", "trad", "pluginId", "Object", "keys", "reduce", "acc", "current", "admin", "register", "app", "createSettingSection", "id", "intlLabel", "defaultMessage", "to", "Component", "then", "mod", "default", "ProtectedSettingsPage", "permissions", "PERMISSIONS", "settings", "registerPlugin", "name", "bootstrap", "registerTrads", "locales", "importedTrads", "Promise", "all", "map", "locale", "data", "prefixPluginTranslations", "catch", "resolve", "TextAlignTypography", "styled", "Typography", "CheckboxConfirmation", "description", "isCreating", "intlLabel", "name", "onChange", "value", "formatMessage", "useIntl", "isOpen", "setIsOpen", "useState", "handleChange", "target", "type", "handleConfirm", "label", "id", "defaultMessage", "values", "hint", "_jsxs", "Dialog", "Root", "open", "onOpenChange", "Field", "_jsx", "Checkbox", "onCheckedChange", "checked", "Hint", "Content", "Header", "getTranslation", "Body", "icon", "WarningCircle", "Flex", "direction", "alignItems", "gap", "justifyContent", "fontWeight", "Footer", "Cancel", "Button", "variant", "Action", "onClick", "LOCALIZED_FIELDS", "doesPluginOptionsHaveI18nLocalized", "opts", "has", "capitalize", "str", "charAt", "toUpperCase", "slice", "useI18n", "params", "useParams", "userPermissions", "useAuth", "state", "permissions", "actions", "useMemo", "filter", "permission", "subject", "slug", "reduce", "acc", "actionShorthand", "action", "split", "slice", "capitalize", "properties", "locales", "canCreate", "canRead", "canUpdate", "canDelete", "canPublish", "schema", "useDocument", "collectionType", "model", "skip", "doesPluginOptionsHaveI18nLocalized", "pluginOptions", "hasI18n", "i18n", "localized", "relationsApi", "i18nApi", "injectEndpoints", "overrideExisting", "endpoints", "builder", "getManyDraftRelationCount", "query", "model", "params", "url", "method", "config", "transformResponse", "response", "data", "useGetManyDraftRelationCountQuery", "cleanData", "data", "schema", "components", "cleanedData", "removeFields", "cleanedDataWithoutPasswordAndRelation", "recursiveRemoveFieldTypes", "fields", "Object", "keys", "reduce", "acc", "current", "includes", "attribute", "attributes", "type", "undefined", "map", "componentValue", "index", "id", "_", "rest", "__component", "__temp_key__", "repeatable", "component", "compoData", "isErrorMessageDescriptor", "object", "EntryValidationText", "status", "validationErrors", "action", "formatMessage", "useIntl", "getErrorStr", "key", "value", "Array", "isArray", "map", "v", "join", "Object", "entries", "k", "validationErrorsMessages", "_jsxs", "Flex", "gap", "_jsx", "CrossCircle", "fill", "Tooltip", "label", "Typography", "maxWidth", "textColor", "variant", "fontWeight", "ellipsis", "getStatusMessage", "icon", "CheckCircle", "text", "id", "defaultMessage", "ArrowsCounterClockwise", "BoldChunk", "chunks", "BulkLocaleActionModal", "headers", "rows", "localesMetadata", "selectedRows", "useTable", "state", "getFormattedCountMessage", "currentStatusByLocale", "reduce", "acc", "locale", "localesWithErrors", "keys", "publishedCount", "filter", "length", "draftCount", "includes", "withErrorsCount", "messageId", "b", "Modal", "Body", "Box", "marginTop", "Table", "Content", "Head", "HeaderCheckboxCell", "head", "HeaderCell", "name", "index", "error", "statusVariant", "Row", "CheckboxCell", "aria-label", "Cell", "find", "localeEntry", "code", "display", "Status", "paddingLeft", "paddingRight", "paddingTop", "paddingBottom", "size", "tag", "capitalize", "IconButton", "Link", "to", "search", "stringify", "plugins", "i18n", "getTranslation", "Pencil", "statusVariants", "draft", "published", "modified", "LocaleOption", "isDraftAndPublishEnabled", "locale", "status", "entryExists", "formatMessage", "useIntl", "id", "getTranslation", "defaultMessage", "bold", "_jsx", "b", "name", "_jsxs", "Flex", "width", "gap", "justifyContent", "Typography", "Status", "display", "paddingLeft", "paddingRight", "paddingTop", "paddingBottom", "size", "variant", "tag", "fontWeight", "capitalize", "LocalePickerAction", "document", "meta", "model", "collectionType", "documentId", "query", "setQuery", "useQueryParams", "hasI18n", "canCreate", "canRead", "useI18n", "data", "locales", "useGetLocalesQuery", "currentDesiredLocale", "plugins", "i18n", "schema", "useDocument", "params", "handleSelect", "useCallback", "value", "React", "useEffect", "Array", "isArray", "doesLocaleExist", "find", "loc", "code", "defaultLocale", "isDefault", "currentLocale", "undefined", "allCurrentLocales", "getDocumentStatus", "localizations", "length", "displayedLocales", "filter", "includes", "label", "options", "map", "entryWithLocaleExists", "some", "doc", "currentLocaleDoc", "permissionsToCheck", "disabled", "draftAndPublish", "startIcon", "Plus", "customizeContent", "onSelect", "docStatus", "statuses", "availableStatus", "publishedAt", "FillFromAnotherLocaleAction", "localeSelected", "setLocaleSelected", "useState", "setValues", "useForm", "state", "getDocument", "useDocumentActions", "components", "availableLocales", "l", "fillFromLocale", "onClose", "response", "cleanedData", "cleanData", "type", "icon", "Earth", "dialog", "title", "content", "_Fragment", "Dialog", "Body", "direction", "WarningCircle", "height", "fill", "textAlign", "Field", "Root", "Label", "SingleSelect", "placeholder", "onChange", "SingleSelectOption", "Footer", "Button", "flex", "onClick", "DeleteLocaleAction", "navigate", "useNavigate", "toggleNotification", "useNotification", "delete", "deleteAction", "isLoading", "canDelete", "position", "StyledTrash", "loading", "onConfirm", "unableToDelete", "console", "error", "message", "res", "pathname", "replace", "BulkLocaleAction", "action", "useMemo", "buildValidParams", "isOnPublishedTab", "canPublish", "_unstableFormatAPIError", "formatAPIError", "useAPIErrorHandler", "selectedRows", "setSelectedRows", "isDraftRelationConfirmationOpen", "setIsDraftRelationConfirmationOpen", "publishMany", "publishManyAction", "unpublishMany", "unpublishManyAction", "validate", "skip", "localesMetadata", "skipToken", "headers", "rows", "validationErrors", "unshift", "allDocuments", "errors", "reduce", "errs", "validation", "isBulkPublish", "localesForAction", "acc", "selectedRow", "isValidLocale", "Object", "keys", "shouldAddLocale", "push", "enableDraftRelationsCount", "draftRelationsCount", "isDraftRelationsLoading", "isDraftRelationsError", "useGetManyDraftRelationCountQuery", "documentIds", "publish", "unpublish", "handleAction", "onCancel", "alignItems", "hasPermission", "every", "ListPlus", "Cross", "Table", "row", "onSelectedRowsChange", "tableSelectedRows", "BulkLocaleActionModal", "footer", "Modal", "BulkLocalePublishAction", "props", "BulkLocaleUnpublishAction", "styled", "Trash", "Emphasis", "chunks", "_jsx", "Typography", "fontWeight", "textColor", "DeleteModalAdditionalInfo", "hasI18n", "useI18n", "formatMessage", "useIntl", "id", "getTranslation", "defaultMessage", "em", "PublishModalAdditionalInfo", "UnpublishModalAdditionalInfo", "LocalePicker", "formatMessage", "useIntl", "query", "setQuery", "useQueryParams", "hasI18n", "canRead", "canCreate", "useI18n", "data", "locales", "useGetLocalesQuery", "undefined", "skip", "handleChange", "useCallback", "code", "replace", "page", "plugins", "i18n", "locale", "React", "useEffect", "Array", "isArray", "currentDesiredLocale", "doesLocaleExist", "find", "loc", "defaultLocale", "isDefault", "length", "displayedLocales", "filter", "includes", "_jsx", "SingleSelect", "size", "aria-label", "id", "getTranslation", "defaultMessage", "value", "onChange", "map", "SingleSelectOption", "name", "mutateEditViewHook", "layout", "options", "i18n", "localized", "components", "Object", "entries", "reduce", "acc", "key", "componentLayout", "map", "row", "addLabelActionToField", "panel", "field", "isFieldLocalized", "doesFieldHaveI18nPluginOpt", "attribute", "pluginOptions", "labelActionProps", "title", "id", "getTranslation", "defaultMessage", "icon", "_jsx", "Earth", "labelAction", "LabelAction", "pluginOpts", "formatMessage", "useIntl", "_jsxs", "Span", "tag", "VisuallyHidden", "cloneElement", "focusable", "styled", "Flex", "theme", "colors", "neutral500", "LocaleListCell", "locale", "currentLocale", "localizations", "language", "useIntl", "data", "locales", "useGetLocalesQuery", "formatter", "useCollator", "sensitivity", "Array", "isArray", "availableLocales", "map", "loc", "localesForDocument", "reduce", "acc", "createdLocale", "find", "code", "push", "isDefault", "name", "toSorted", "a", "b", "compare", "_jsxs", "Popover", "Root", "_jsx", "Trigger", "Button", "variant", "type", "onClick", "e", "stopPropagation", "Flex", "minWidth", "alignItems", "justifyContent", "fontWeight", "Typography", "textColor", "ellipsis", "marginRight", "join", "CaretDown", "width", "height", "Content", "sideOffset", "ul", "Box", "padding", "tag", "addColumnToTableHook", "displayedHeaders", "layout", "options", "isFieldLocalized", "doesPluginOptionsHaveI18nLocalized", "i18n", "localized", "attribute", "type", "label", "id", "getTranslation", "defaultMessage", "searchable", "sortable", "name", "cellFormatter", "props", "_header", "meta", "_jsx", "LocaleListCell", "addLocaleToReleasesHook", "displayedHeaders", "label", "id", "defaultMessage", "name", "hasI18nEnabled", "extendCTBAttributeInitialDataMiddleware", "getState", "next", "action", "enhanceAction", "uid", "store", "type", "get", "modelType", "hasi18nEnabled", "payload", "options", "pluginOptions", "i18n", "localized", "err", "includes", "attributeType", "isEditing", "extendCTBInitialDataMiddleware", "next", "action", "type", "modalType", "i18n", "localized", "pluginOptions", "data", "actionType", "localeMiddleware", "ctx", "next", "permissions", "match", "matchPath", "pathname", "search", "parse", "plugins", "i18n", "Array", "isArray", "locale", "revisedPermissions", "filter", "permission", "properties", "locales", "includes", "prefixPluginTranslations", "trad", "pluginId", "Object", "keys", "reduce", "acc", "current", "mutateCTBContentTypeSchema", "nextSchema", "prevSchema", "doesPluginOptionsHaveI18nLocalized", "pluginOptions", "isNextSchemaLocalized", "i18n", "localized", "isPrevSchemaLocalized", "attributes", "addLocalisationToFields", "omit", "disableAttributesLocalisation", "map", "currentAttribute", "LOCALIZED_FIELDS", "includes", "type", "index", "register", "app", "addMiddlewares", "extendCTBAttributeInitialDataMiddleware", "extendCTBInitialDataMiddleware", "i18nApi", "middleware", "addReducers", "reducerPath", "reducer", "addRBACMiddleware", "localeMiddleware", "registerPlugin", "id", "pluginId", "name", "bootstrap", "registerHook", "addColumnToTableHook", "mutateEditViewHook", "addLocaleToReleasesHook", "addSettingsLink", "intlLabel", "getTranslation", "defaultMessage", "to", "Component", "then", "mod", "default", "ProtectedSettingsPage", "permissions", "PERMISSIONS", "accessMain", "contentManager", "getPlugin", "apis", "addDocumentHeaderAction", "LocalePickerAction", "FillFromAnotherLocaleAction", "addDocumentAction", "actions", "indexOfDeleteAction", "findIndex", "action", "type", "splice", "DeleteLocaleAction", "BulkLocalePublishAction", "BulkLocaleUnpublishAction", "injectComponent", "LocalePicker", "PublishModalAdditionalInfo", "UnpublishModalAdditionalInfo", "DeleteModalAdditionalInfo", "ctbPlugin", "ctbFormsAPI", "forms", "addContentTypeSchemaMutation", "mutateCTBContentTypeSchema", "components", "add", "component", "CheckboxConfirmation", "extendContentType", "validator", "i18n", "object", "shape", "localized", "bool", "form", "advanced", "description", "extendFields", "LOCALIZED_FIELDS", "contentTypeSchema", "forTarget", "step", "hasI18nEnabled", "get", "registerTrads", "locales", "importedTrads", "Promise", "all", "map", "locale", "__variableDynamicImportRuntime1__", "data", "prefixPluginTranslations", "catch", "resolve", "RELEASE_ACTION_FORM_SCHEMA", "object", "shape", "type", "string", "oneOf", "required", "releaseId", "INITIAL_VALUES", "NoReleases", "formatMessage", "useIntl", "_jsx", "EmptyStateLayout", "icon", "EmptyDocuments", "width", "content", "id", "defaultMessage", "action", "LinkButton", "to", "pathname", "tag", "ReactRouterLink", "variant", "shadow", "AddActionToReleaseModal", "contentType", "documentId", "onInputChange", "values", "query", "useQueryParams", "locale", "plugins", "i18n", "response", "useGetReleasesForEntryQuery", "entryDocumentId", "hasEntryAttached", "releases", "data", "length", "_jsxs", "Flex", "direction", "alignItems", "gap", "Box", "paddingBottom", "Field", "Root", "Label", "SingleSelect", "placeholder", "name", "onChange", "value", "map", "release", "SingleSelectOption", "ReleaseActionOptions", "selected", "handleChange", "e", "target", "ReleaseActionModalForm", "document", "model", "collectionType", "allowedActions", "useRBAC", "PERMISSIONS", "canCreateAction", "createReleaseAction", "isLoading", "useCreateReleaseActionMutation", "toggleNotification", "useNotification", "formatAPIError", "useAPIErrorHandler", "handleSubmit", "onClose", "formik", "error", "isFetchError", "message", "useFormik", "initialValues", "validationSchema", "onSubmit", "Error", "body", "params", "edit", "options", "useDocumentLayout", "window", "strapi", "isEE", "draftAndPublish", "label", "PaperPlane", "disabled", "position", "dialog", "title", "setFieldValue", "footer", "Modal", "Footer", "Button", "onClick", "loading", "getContentPermissions", "subject", "permissions", "publish", "action", "id", "actionParameters", "properties", "conditions", "ReleaseAction", "documents", "model", "formatMessage", "useIntl", "toggleNotification", "useNotification", "formatAPIError", "useAPIErrorHandler", "query", "useQueryParams", "contentPermissions", "allowedActions", "canPublish", "useRBAC", "canCreate", "releasePermissions", "hasDraftAndPublish", "useContentManagerContext", "response", "useGetReleasesQuery", "releases", "data", "createManyReleaseActions", "isLoading", "useCreateManyReleaseActionsMutation", "documentIds", "map", "doc", "documentId", "handleSubmit", "values", "locale", "plugins", "i18n", "releaseActionEntries", "entryDocumentId", "type", "contentType", "body", "params", "releaseId", "notificationMessage", "defaultMessage", "entriesAlreadyInRelease", "meta", "totalEntries", "notification", "title", "message", "isFetchError", "error", "actionType", "variant", "label", "dialog", "content", "onClose", "_jsx", "Formik", "onSubmit", "validationSchema", "RELEASE_ACTION_FORM_SCHEMA", "initialValues", "INITIAL_VALUES", "setFieldValue", "_jsxs", "Form", "length", "NoReleases", "Modal", "Body", "Flex", "direction", "alignItems", "gap", "Box", "paddingBottom", "Field", "Root", "required", "Label", "SingleSelect", "placeholder", "onChange", "value", "release", "SingleSelectOption", "name", "ReleaseActionOptions", "selected", "handleChange", "e", "target", "Footer", "Button", "onClick", "disabled", "loading", "useReleasesList", "contentTypeUid", "documentId", "listViewData", "useTable", "state", "rows", "documentIds", "map", "entry", "query", "useQueryParams", "locale", "plugins", "i18n", "undefined", "response", "useGetMappedEntriesInReleasesQuery", "skip", "length", "mappedEntriesInReleases", "data", "addColumnToTableHook", "displayedHeaders", "layout", "options", "draftAndPublish", "searchable", "sortable", "name", "label", "id", "defaultMessage", "cellFormatter", "props", "_", "model", "_jsx", "ReleaseListCell", "releases", "formatMessage", "useIntl", "_jsxs", "Popover", "Root", "Trigger", "Button", "variant", "onClick", "e", "stopPropagation", "endIcon", "CaretDown", "width", "height", "Typography", "style", "maxWidth", "cursor", "textColor", "fontWeight", "number", "Content", "ul", "Box", "padding", "tag", "Link", "href", "isExternal", "Panel", "model", "document", "documentId", "collectionType", "query", "useQueryParams", "locale", "plugins", "i18n", "edit", "options", "useDocumentLayout", "formatMessage", "formatDate", "formatTime", "useIntl", "allowedActions", "useRBAC", "PERMISSIONS", "canRead", "canDeleteAction", "response", "useGetReleasesForEntryQuery", "contentType", "entryDocumentId", "hasEntryAttached", "skip", "releases", "data", "getReleaseColorVariant", "actionType", "shade", "window", "strapi", "isEE", "draftAndPublish", "length", "title", "id", "defaultMessage", "content", "_jsx", "Flex", "direction", "alignItems", "gap", "width", "map", "release", "_jsxs", "borderWidth", "borderStyle", "borderColor", "actions", "type", "overflow", "hasRadius", "Box", "paddingTop", "paddingBottom", "paddingLeft", "paddingRight", "background", "Typography", "fontSize", "variant", "textColor", "isPublish", "padding", "fontWeight", "name", "scheduledAt", "timezone", "date", "Date", "day", "month", "year", "timeZone", "time", "hourCycle", "offset", "getTimezoneOffset", "ReleaseActionMenu", "Root", "hasTriggerBorder", "EditReleaseItem", "releaseId", "DeleteReleaseActionItem", "actionId", "prefixPluginTranslations", "trad", "pluginId", "Object", "keys", "reduce", "acc", "current", "admin", "register", "app", "createHook", "window", "strapi", "features", "isEnabled", "addMenuLink", "to", "pluginId", "icon", "PaperPlane", "intlLabel", "id", "defaultMessage", "Component", "then", "mod", "default", "App", "permissions", "PERMISSIONS", "main", "position", "contentManagerPluginApis", "getPlugin", "apis", "addEditViewSidePanel", "ReleasesPanel", "addDocumentAction", "actions", "indexOfDeleteAction", "findIndex", "action", "type", "splice", "ReleaseActionModalForm", "addSettingsLink", "licenseOnly", "ProtectedReleasesSettingsPage", "addBulkAction", "deleteActionIndex", "ReleaseAction", "registerHook", "addColumnToTableHook", "widgets", "title", "PLUGIN_ID", "component", "UpcomingReleasesWidget", "link", "label", "href", "flags", "promoteEE", "PurchaseContentReleases", "registerTrads", "locales", "importedTrads", "Promise", "all", "map", "locale", "data", "prefixPluginTranslations", "catch", "resolve", "STAGE_ATTRIBUTE_NAME", "ASSIGNEE_ATTRIBUTE_NAME", "AssigneeSelect", "isCompact", "collectionType", "id", "slug", "model", "useParams", "permissions", "useTypedSelector", "state", "admin_app", "formatMessage", "useIntl", "_unstableFormatAPIError", "formatAPIError", "useAPIErrorHandler", "toggleNotification", "useNotification", "allowedActions", "canRead", "isLoading", "isLoadingPermissions", "useRBAC", "settings", "users", "query", "useQueryParams", "params", "useMemo", "buildValidParams", "data", "isLoadingUsers", "isError", "useAdminUsers", "undefined", "skip", "document", "unstable_useDocument", "documentId", "currentAssignee", "ASSIGNEE_ATTRIBUTE_NAME", "updateAssignee", "error", "isMutating", "useUpdateAssigneeMutation", "handleChange", "assigneeId", "res", "parseInt", "type", "message", "defaultMessage", "isDisabled", "length", "assigneeLabel", "assigneeClearLabel", "assigneePlaceholder", "_jsxs", "Field", "Root", "name", "_jsx", "VisuallyHidden", "Label", "Combobox", "clearLabel", "disabled", "value", "toString", "onChange", "onClear", "placeholder", "loading", "size", "map", "user", "ComboboxOption", "textValue", "getDisplayName", "Error", "WorkflowLimitModal", "open", "onOpenChange", "formatMessage", "useIntl", "_jsxs", "LimitsModal", "Root", "_jsx", "Title", "id", "defaultMessage", "Body", "StageLimitModal", "Select", "stages", "activeWorkflowStage", "isLoading", "props", "themeColorName", "getStageColorByHex", "color", "SingleSelect", "disabled", "length", "placeholder", "startIcon", "Flex", "tag", "height", "background", "borderColor", "undefined", "hasRadius", "shrink", "width", "marginRight", "customizeContent", "justifyContent", "alignItems", "Typography", "textColor", "ellipsis", "lineHeight", "name", "Loader", "small", "style", "display", "data-testid", "map", "SingleSelectOption", "value", "textValue", "StageSelect", "isCompact", "collectionType", "slug", "model", "useParams", "_unstableFormatAPIError", "formatAPIError", "useAPIErrorHandler", "toggleNotification", "useNotification", "query", "useQueryParams", "params", "useMemo", "buildValidParams", "document", "isLoadingDocument", "unstable_useDocument", "documentId", "skip", "data", "isLoadingStages", "useGetStagesQuery", "meta", "getFeature", "useLicenseLimits", "showLimitModal", "setShowLimitModal", "useState", "limits", "STAGE_ATTRIBUTE_NAME", "updateStage", "error", "useUpdateStageMutation", "handleChange", "stageId", "CHARGEBEE_WORKFLOW_ENTITLEMENT_NAME", "parseInt", "workflowCount", "CHARGEBEE_STAGES_PER_WORKFLOW_ENTITLEMENT_NAME", "res", "type", "message", "reviewStageLabel", "reviewStageHint", "_Fragment", "Tooltip", "label", "Field", "VisuallyHidden", "Label", "size", "onChange", "hint", "Hint", "Error", "Header", "slug", "id", "collectionType", "useParams", "edit", "options", "useDocumentLayout", "window", "strapi", "isEE", "reviewWorkflows", "_jsxs", "Flex", "gap", "_jsx", "AssigneeSelect", "isCompact", "StageSelect", "type", "Panel", "slug", "id", "collectionType", "useParams", "edit", "options", "useDocumentLayout", "formatMessage", "useIntl", "window", "strapi", "isEE", "reviewWorkflows", "title", "defaultMessage", "content", "_jsxs", "Flex", "direction", "gap", "alignItems", "width", "_jsx", "AssigneeSelect", "StageSelect", "type", "REVIEW_WORKFLOW_COLUMNS", "name", "STAGE_ATTRIBUTE_NAME", "attribute", "type", "relation", "target", "label", "id", "defaultMessage", "searchable", "sortable", "mainField", "cellFormatter", "props", "_jsx", "StageColumn", "ASSIGNEE_ATTRIBUTE_NAME", "AssigneeColumn", "addColumnToTableHook", "displayedHeaders", "layout", "options", "reviewWorkflows", "REVIEW_WORKFLOW_COLUMNS", "prefixPluginTranslations", "trad", "pluginId", "Object", "keys", "reduce", "acc", "current", "admin", "register", "app", "window", "strapi", "features", "isEnabled", "FEATURE_ID", "registerHook", "addColumnToTableHook", "contentManagerPluginApis", "getPlugin", "apis", "addEditViewSidePanel", "Panel", "addSettingsLink", "id", "PLUGIN_ID", "to", "intlLabel", "defaultMessage", "licenseOnly", "permissions", "Component", "Router", "default", "widgets", "icon", "SealCheck", "title", "component", "AssignedWidget", "pluginId", "action", "flags", "promoteEE", "PurchaseReviewWorkflows", "bootstrap", "injectComponent", "name", "Header", "registerTrads", "locales", "importedTrads", "Promise", "all", "map", "locale", "then", "data", "prefixPluginTranslations", "catch", "resolve", "render", "mountNode", "plugins", "restArgs", "renderAdmin", "contentManager", "contentTypeBuilder", "email", "upload", "contentReleases", "i18n", "reviewWorkflows"]
}
