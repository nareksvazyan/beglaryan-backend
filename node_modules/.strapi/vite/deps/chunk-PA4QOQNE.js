import {
  PERMISSIONS,
  reducer,
  reducer2
} from "./chunk-7TK6QVDG.js";
import {
  pluginId
} from "./chunk-H4GPAAVJ.js";
import {
  require_cloneDeep
} from "./chunk-EAROBVOV.js";
import {
  create6 as create
} from "./chunk-2DHCBD75.js";
import {
  require_get
} from "./chunk-DFSUQOXI.js";
import {
  ForwardRef$2B
} from "./chunk-67WISF62.js";
import {
  __toESM
} from "./chunk-PLDDJCW6.js";

// node_modules/@strapi/content-type-builder/dist/admin/reducers.mjs
var reducers = {
  [`content-type-builder_formModal`]: reducer2,
  [`content-type-builder_dataManagerProvider`]: reducer
};

// node_modules/@strapi/content-type-builder/dist/admin/utils/formAPI.mjs
var import_cloneDeep = __toESM(require_cloneDeep(), 1);
var import_get = __toESM(require_get(), 1);
var formsAPI = {
  components: {
    inputs: {},
    add({ id, component }) {
      if (!this.inputs[id]) {
        this.inputs[id] = component;
      }
    }
  },
  types: {
    attribute: {},
    contentType: {
      validators: [],
      form: {
        advanced: [],
        base: []
      }
    },
    component: {
      validators: [],
      form: {
        advanced: [],
        base: []
      }
    }
  },
  contentTypeSchemaMutations: [],
  addContentTypeSchemaMutation(cb) {
    this.contentTypeSchemaMutations.push(cb);
  },
  extendContentType({ validator, form: { advanced, base } }) {
    const { contentType } = this.types;
    if (validator) {
      contentType.validators.push(validator);
    }
    contentType.form.advanced.push(advanced);
    contentType.form.base.push(base);
  },
  extendFields(fields, { validator, form: { advanced, base } }) {
    const formType = this.types.attribute;
    fields.forEach((field) => {
      if (!formType[field]) {
        formType[field] = {
          validators: [],
          form: {
            advanced: [],
            base: []
          }
        };
      }
      if (validator) {
        formType[field].validators.push(validator);
      }
      formType[field].form.advanced.push(advanced);
      formType[field].form.base.push(base);
    });
  },
  getAdvancedForm(target, props = null) {
    const sectionsToAdd = (0, import_get.default)(this.types, [
      ...target,
      "form",
      "advanced"
    ], []).reduce((acc, current) => {
      const sections = current(props);
      return [
        ...acc,
        ...sections
      ];
    }, []);
    return sectionsToAdd;
  },
  makeCustomFieldValidator(attributeShape, validator, ...validatorArgs) {
    if (!validator) return attributeShape;
    return attributeShape.shape({
      options: create().shape(validator(validatorArgs))
    });
  },
  makeValidator(target, initShape, ...args) {
    const validators = (0, import_get.default)(this.types, [
      ...target,
      "validators"
    ], []);
    const pluginOptionsShape = validators.reduce((acc, current) => {
      const pluginOptionShape = current(args);
      return {
        ...acc,
        ...pluginOptionShape
      };
    }, {});
    return initShape.shape({
      pluginOptions: create().shape(pluginOptionsShape)
    });
  },
  mutateContentTypeSchema(data, initialData) {
    let enhancedData = (0, import_cloneDeep.default)(data);
    const refData = (0, import_cloneDeep.default)(initialData);
    this.contentTypeSchemaMutations.forEach((cb) => {
      enhancedData = cb(enhancedData, refData);
    });
    return enhancedData;
  }
};

// node_modules/@strapi/content-type-builder/dist/admin/utils/prefixPluginTranslations.mjs
var prefixPluginTranslations = (trad, pluginId2) => {
  return Object.keys(trad).reduce((acc, current) => {
    acc[`${pluginId2}.${current}`] = trad[current];
    return acc;
  }, {});
};

// node_modules/@strapi/content-type-builder/dist/admin/index.mjs
function __variableDynamicImportRuntime1__(path) {
  switch (path) {
    case "./translations/ar.json":
      return import("./ar.json-3PFZZ3QC.js");
    case "./translations/cs.json":
      return import("./cs.json-BVIOKZG5.js");
    case "./translations/de.json":
      return import("./de.json-OY46QGMN.js");
    case "./translations/dk.json":
      return import("./dk.json-5NZGFB5W.js");
    case "./translations/en.json":
      return import("./en.json-KATKQEQH.js");
    case "./translations/es.json":
      return import("./es.json-VK2AHDEW.js");
    case "./translations/fr.json":
      return import("./fr.json-YMBKIU5L.js");
    case "./translations/id.json":
      return import("./id.json-3OG5LH4D.js");
    case "./translations/it.json":
      return import("./it.json-VSEWBEC2.js");
    case "./translations/ja.json":
      return import("./ja.json-DWADQSVY.js");
    case "./translations/ko.json":
      return import("./ko.json-XRARLRFF.js");
    case "./translations/ms.json":
      return import("./ms.json-OYRQIG7I.js");
    case "./translations/nl.json":
      return import("./nl.json-ZXDL5NWV.js");
    case "./translations/pl.json":
      return import("./pl.json-PJB22UAI.js");
    case "./translations/pt-BR.json":
      return import("./pt-BR.json-4L4N7XZA.js");
    case "./translations/pt.json":
      return import("./pt.json-WXQYIHXO.js");
    case "./translations/ru.json":
      return import("./ru.json-T6RCGPRT.js");
    case "./translations/sk.json":
      return import("./sk.json-A33FQAC4.js");
    case "./translations/sv.json":
      return import("./sv.json-AAZEJLMC.js");
    case "./translations/th.json":
      return import("./th.json-VEBY3S5D.js");
    case "./translations/tr.json":
      return import("./tr.json-VLKKI6CE.js");
    case "./translations/uk.json":
      return import("./uk.json-CP6ZJYY2.js");
    case "./translations/zh-Hans.json":
      return import("./zh-Hans.json-7GSLOS5T.js");
    case "./translations/zh.json":
      return import("./zh.json-47LFTLPP.js");
    default:
      return new Promise(function(resolve, reject) {
        (typeof queueMicrotask === "function" ? queueMicrotask : setTimeout)(
          reject.bind(null, new Error("Unknown variable dynamic import: " + path))
        );
      });
  }
}
var index = {
  register(app) {
    app.addReducers(reducers);
    app.addMenuLink({
      to: `plugins/${pluginId}`,
      icon: ForwardRef$2B,
      intlLabel: {
        id: `${pluginId}.plugin.name`,
        defaultMessage: "Content-Type Builder"
      },
      permissions: PERMISSIONS.main,
      Component: () => import("./App-NJPCQODD.js"),
      position: 5
    });
    app.registerPlugin({
      id: pluginId,
      name: pluginId,
      // Internal APIs exposed by the CTB for the other plugins to use
      apis: {
        forms: formsAPI
      }
    });
  },
  bootstrap() {
  },
  async registerTrads({ locales }) {
    const importedTrads = await Promise.all(locales.map((locale) => {
      return __variableDynamicImportRuntime1__(`./translations/${locale}.json`).then(({ default: data }) => {
        return {
          data: prefixPluginTranslations(data, pluginId),
          locale
        };
      }).catch(() => {
        return {
          data: {},
          locale
        };
      });
    }));
    return Promise.resolve(importedTrads);
  }
};

export {
  index
};
//# sourceMappingURL=chunk-PA4QOQNE.js.map
