{
  "version": 3,
  "sources": ["../../../@strapi/upload/admin/src/hooks/useModalQueryParams.ts", "../../../@strapi/upload/admin/src/utils/toSingularTypes.ts", "../../../@strapi/upload/admin/src/utils/getAllowedFiles.ts", "../../../@strapi/upload/admin/src/utils/moveElement.ts", "../../../@strapi/upload/admin/src/utils/getBreadcrumbDataCM.ts", "../../../@strapi/upload/admin/src/components/AssetDialog/BrowseStep/Filters.tsx", "../../../@strapi/upload/admin/src/components/AssetDialog/BrowseStep/PageSize.tsx", "../../../@strapi/upload/admin/src/components/AssetDialog/BrowseStep/PaginationFooter/Pagination.tsx", "../../../@strapi/upload/admin/src/components/AssetDialog/BrowseStep/PaginationFooter/PaginationFooter.tsx", "../../../@strapi/upload/admin/src/components/AssetDialog/BrowseStep/SearchAsset/SearchAsset.tsx", "../../../@strapi/upload/admin/src/components/AssetDialog/BrowseStep/utils/isSelectable.ts", "../../../@strapi/upload/admin/src/components/AssetDialog/BrowseStep/BrowseStep.tsx", "../../../@strapi/upload/admin/src/components/AssetDialog/DialogFooter.tsx", "../../../@strapi/upload/admin/src/components/AssetDialog/SelectedStep/SelectedStep.tsx", "../../../@strapi/upload/admin/src/components/AssetDialog/AssetDialog.tsx", "../../../@strapi/upload/admin/src/components/MediaLibraryDialog/MediaLibraryDialog.tsx", "../../../@strapi/upload/admin/src/components/MediaLibraryInput/Carousel/CarouselAsset.tsx", "../../../@strapi/upload/admin/src/components/MediaLibraryInput/Carousel/CarouselAssetActions.tsx", "../../../@strapi/upload/admin/src/components/MediaLibraryInput/Carousel/EmptyStateAsset.tsx", "../../../@strapi/upload/admin/src/components/MediaLibraryInput/Carousel/CarouselAssets.tsx", "../../../@strapi/upload/admin/src/components/MediaLibraryInput/MediaLibraryInput.tsx", "../../../@strapi/upload/admin/src/utils/prefixPluginTranslations.ts", "../../../@strapi/upload/admin/src/index.ts"],
  "sourcesContent": ["import * as React from 'react';\n\nimport { useTracking } from '@strapi/admin/strapi-admin';\nimport { stringify } from 'qs';\n\nimport { useConfig } from './useConfig';\n\nimport type { Query, FilterCondition } from '../../../shared/contracts/files';\n\nexport const useModalQueryParams = (initialState?: Partial<Query>) => {\n  const { trackUsage } = useTracking();\n  const {\n    config: { data: config },\n  } = useConfig();\n\n  const [queryObject, setQueryObject] = React.useState<Query>({\n    page: 1,\n    sort: 'updatedAt:DESC',\n    pageSize: 10,\n    filters: {\n      $and: [],\n    },\n    ...initialState,\n  });\n\n  React.useEffect(() => {\n    if (config && 'sort' in config && 'pageSize' in config) {\n      setQueryObject((prevQuery) => ({\n        ...prevQuery,\n        sort: config.sort,\n        pageSize: config.pageSize,\n      }));\n    }\n  }, [config]);\n\n  const handleChangeFilters = (nextFilters: FilterCondition<string>[]) => {\n    if (nextFilters) {\n      trackUsage('didFilterMediaLibraryElements', {\n        location: 'content-manager',\n        filter: Object.keys(nextFilters[nextFilters.length - 1])[0],\n      });\n      setQueryObject((prev) => ({ ...prev, page: 1, filters: { $and: nextFilters } }));\n    }\n  };\n\n  const handleChangePageSize = (pageSize: Query['pageSize']) => {\n    setQueryObject((prev) => ({\n      ...prev,\n      pageSize: typeof pageSize === 'string' ? parseInt(pageSize, 10) : pageSize,\n      page: 1,\n    }));\n  };\n\n  const handeChangePage = (page: Query['page']) => {\n    setQueryObject((prev) => ({ ...prev, page }));\n  };\n\n  const handleChangeSort = (sort: Query['sort']) => {\n    if (sort) {\n      trackUsage('didSortMediaLibraryElements', {\n        location: 'content-manager',\n        sort,\n      });\n      setQueryObject((prev) => ({ ...prev, sort }));\n    }\n  };\n\n  const handleChangeSearch = (_q: Query['_q'] | null) => {\n    if (_q) {\n      setQueryObject((prev) => ({ ...prev, _q, page: 1 }));\n    } else {\n      const newState: Query = { page: 1 };\n\n      Object.keys(queryObject).forEach((key) => {\n        if (!['page', '_q'].includes(key)) {\n          (newState as Record<string, string | number | undefined>)[key] = (\n            queryObject as Record<string, string | number | undefined>\n          )[key];\n        }\n      });\n\n      setQueryObject(newState);\n    }\n  };\n\n  const handleChangeFolder = (folder: Query['folder'], folderPath: Query['folderPath']) => {\n    setQueryObject((prev) => ({ ...prev, folder: folder ?? null, folderPath }));\n  };\n\n  return [\n    { queryObject, rawQuery: stringify(queryObject, { encode: false }) },\n    {\n      onChangeFilters: handleChangeFilters,\n      onChangeFolder: handleChangeFolder,\n      onChangePage: handeChangePage,\n      onChangePageSize: handleChangePageSize,\n      onChangeSort: handleChangeSort,\n      onChangeSearch: handleChangeSearch,\n    },\n  ];\n};\n", "export const toSingularTypes = (types?: string[]) => {\n  if (!types) {\n    return [];\n  }\n\n  return types.map((type) => type.substring(0, type.length - 1));\n};\n", "import { toSingularTypes } from './toSingularTypes';\n\nimport type { File } from '../../../shared/contracts/files';\n/**\n * Returns the files that can be added to the media field\n * @param {Object[]} pluralTypes Array of string (allowedTypes)\n * @param {Object[]} files Array of files\n * @returns Object[]\n */\n\nexport interface AllowedFiles extends File {\n  documentId: string;\n  isSelectable: boolean;\n  locale: string | null;\n  type: string;\n}\n\nexport const getAllowedFiles = (pluralTypes: string[] | null, files: AllowedFiles[]) => {\n  if (!pluralTypes) {\n    return files;\n  }\n\n  const singularTypes = toSingularTypes(pluralTypes);\n\n  const allowedFiles = files.filter((file) => {\n    const fileType = file?.mime?.split('/')[0];\n\n    if (!fileType) {\n      return false;\n    }\n\n    if (singularTypes.includes('file') && !['video', 'image', 'audio'].includes(fileType)) {\n      return true;\n    }\n\n    return singularTypes.includes(fileType);\n  });\n\n  return allowedFiles;\n};\n", "const move = <T = number>(array: T[], oldIndex: number, newIndex: number) => {\n  if (newIndex >= array.length) {\n    newIndex = array.length - 1;\n  }\n  array.splice(newIndex, 0, array.splice(oldIndex, 1)[0]);\n\n  return array;\n};\n\nexport const moveElement = <T = number>(array: T[], index: number, offset: number) => {\n  const newIndex = index + offset;\n\n  return move(array, index, newIndex);\n};\n", "import { getTrad } from './getTrad';\n\nimport type { Folder } from '../../../shared/contracts/folders';\nimport type { MessageDescriptor } from 'react-intl';\n\nexport interface BreadcrumbDataFolder extends Omit<Folder, 'children' | 'files' | 'parent'> {\n  parent?: BreadcrumbDataFolder;\n  children?: {\n    count: number;\n  };\n  files?: {\n    count: number;\n  };\n}\n\ninterface BreadcrumbItem {\n  id?: number | null;\n  label?: MessageDescriptor | string;\n  path?: string;\n}\n\ntype BreadcrumbData = BreadcrumbItem | [];\n\nexport const getBreadcrumbDataCM = (folder: BreadcrumbDataFolder | null) => {\n  const data: BreadcrumbData[] = [\n    {\n      id: null,\n      label: { id: getTrad('plugin.name'), defaultMessage: 'Media Library' },\n    },\n  ];\n\n  if (folder?.parent?.parent) {\n    data.push([]);\n  }\n\n  if (folder?.parent) {\n    data.push({\n      id: folder.parent.id,\n      label: folder.parent.name,\n      path: folder.parent.path,\n    });\n  }\n\n  if (folder) {\n    data.push({\n      id: folder.id,\n      label: folder.name,\n      path: folder.path,\n    });\n  }\n\n  return data;\n};\n", "import * as React from 'react';\n\nimport { Button, Popover } from '@strapi/design-system';\nimport { Filter } from '@strapi/icons';\nimport { useIntl } from 'react-intl';\n\nimport { displayedFilters } from '../../../utils';\nimport { FilterList } from '../../FilterList/FilterList';\nimport { FilterPopover } from '../../FilterPopover/FilterPopover';\n\ntype NumberKeyedObject = Record<number, string>;\n\ntype StringFilter = {\n  [key: string]: string;\n};\n\ntype MimeFilter = {\n  [key: string]:\n    | string\n    | NumberKeyedObject\n    | Record<string, string | NumberKeyedObject>\n    | undefined;\n};\n\nexport type FilterStructure = {\n  [key: string]: MimeFilter | StringFilter | undefined;\n};\n\nexport type Filter = {\n  [key in 'mime' | 'createdAt' | 'updatedAt']?:\n    | {\n        [key in '$contains' | '$notContains' | '$eq' | '$not']?:\n          | string[]\n          | string\n          | { $contains: string[] };\n      }\n    | undefined;\n};\n\ninterface FiltersProps {\n  appliedFilters: FilterStructure[];\n  onChangeFilters: (filters: Filter[]) => void;\n}\n\nexport const Filters = ({ appliedFilters, onChangeFilters }: FiltersProps) => {\n  const [open, setOpen] = React.useState(false);\n  const { formatMessage } = useIntl();\n\n  return (\n    <Popover.Root open={open} onOpenChange={setOpen}>\n      <Popover.Trigger>\n        <Button variant=\"tertiary\" startIcon={<Filter />} size=\"S\">\n          {formatMessage({ id: 'app.utils.filters', defaultMessage: 'Filters' })}\n        </Button>\n      </Popover.Trigger>\n      <FilterPopover\n        onToggle={() => setOpen((prev) => !prev)}\n        displayedFilters={displayedFilters}\n        filters={appliedFilters}\n        onSubmit={onChangeFilters}\n      />\n\n      {appliedFilters && (\n        <FilterList\n          appliedFilters={appliedFilters}\n          filtersSchema={displayedFilters}\n          onRemoveFilter={onChangeFilters}\n        />\n      )}\n    </Popover.Root>\n  );\n};\n", "import { Box, Flex, SingleSelectOption, SingleSelect, Typography } from '@strapi/design-system';\nimport { useIntl } from 'react-intl';\n\ninterface PageSizeProps {\n  onChangePageSize: (value: number) => void;\n  pageSize: number;\n}\n\nexport const PageSize = ({ onChangePageSize, pageSize }: PageSizeProps) => {\n  const { formatMessage } = useIntl();\n\n  const handleChange = (value: string | number) => {\n    onChangePageSize(Number(value));\n  };\n\n  return (\n    <Flex>\n      <SingleSelect\n        size=\"S\"\n        aria-label={formatMessage({\n          id: 'components.PageFooter.select',\n          defaultMessage: 'Entries per page',\n        })}\n        onChange={handleChange}\n        value={pageSize.toString()}\n      >\n        <SingleSelectOption value=\"10\">10</SingleSelectOption>\n        <SingleSelectOption value=\"20\">20</SingleSelectOption>\n        <SingleSelectOption value=\"50\">50</SingleSelectOption>\n        <SingleSelectOption value=\"100\">100</SingleSelectOption>\n      </SingleSelect>\n      <Box paddingLeft={2}>\n        <Typography textColor=\"neutral600\" tag=\"label\" htmlFor=\"page-size\">\n          {formatMessage({\n            id: 'components.PageFooter.select',\n            defaultMessage: 'Entries per page',\n          })}\n        </Typography>\n      </Box>\n    </Flex>\n  );\n};\n", "import * as React from 'react';\n\nimport { Box, Flex } from '@strapi/design-system';\n\nconst PaginationContext = React.createContext({ activePage: 1, pageCount: 1 });\nexport const usePagination = () => React.useContext(PaginationContext);\n\ninterface PaginationProps {\n  activePage: number;\n  children: React.ReactNode;\n  label?: string;\n  pageCount: number;\n}\n\nexport const Pagination = ({\n  children,\n  activePage,\n  pageCount,\n  label = 'pagination',\n}: PaginationProps) => {\n  const paginationValue = React.useMemo(() => ({ activePage, pageCount }), [activePage, pageCount]);\n\n  return (\n    <PaginationContext.Provider value={paginationValue}>\n      <Box tag=\"nav\" aria-label={label}>\n        <Flex tag=\"ul\" gap={1}>\n          {children}\n        </Flex>\n      </Box>\n    </PaginationContext.Provider>\n  );\n};\n", "// TODO: find a better naming convention for the file that was an index file before\n/**\n * The component works as follows: this is a duplicate of the helper-plugin one but without the router\n * `1` , 2, 3, ... 10\n * 1, `2`, 3, ... 10\n * 1, 2, `3`, 4, ... 10\n * 1, 2, 3, `4`, 5, ... 10\n * 1, ..,4, `5`, 6, ... 10\n *\n * 1, ...., 8, 9, `10`\n * 1, ...., 8, `9`, 10\n * 1, ...., 7, `8`, 9, 10\n * 1, ... 6, `7`, 8, 9, 10\n */\nimport { Typography, VisuallyHidden } from '@strapi/design-system';\nimport { ChevronLeft, ChevronRight } from '@strapi/icons';\nimport { useIntl } from 'react-intl';\nimport { styled, css } from 'styled-components';\n\nimport { Pagination, usePagination } from './Pagination';\n\nconst PaginationText = styled(Typography)`\n  line-height: revert;\n`;\n\nconst linkWrapperStyles = css<{ $active?: boolean }>`\n  padding: ${({ theme }) => theme.spaces[3]};\n  border-radius: ${({ theme }) => theme.borderRadius};\n  box-shadow: ${({ $active, theme }) => ($active ? theme.shadows.filterShadow : undefined)};\n  text-decoration: none;\n  display: flex;\n  position: relative;\n  outline: none;\n\n  &:after {\n    transition-property: all;\n    transition-duration: 0.2s;\n    border-radius: 8px;\n    content: '';\n    position: absolute;\n    top: -4px;\n    bottom: -4px;\n    left: -4px;\n    right: -4px;\n    border: 2px solid transparent;\n  }\n\n  &:focus-visible {\n    outline: none;\n\n    &:after {\n      border-radius: 8px;\n      content: '';\n      position: absolute;\n      top: -5px;\n      bottom: -5px;\n      left: -5px;\n      right: -5px;\n      border: 2px solid ${(props) => props.theme.colors.primary600};\n    }\n  }\n`;\n\nconst LinkWrapperButton = styled.button<{ $active?: boolean }>`\n  ${linkWrapperStyles}\n`;\n\nconst LinkWrapperDiv = styled.div<{ $active?: boolean }>`\n  ${linkWrapperStyles}\n`;\n\nLinkWrapperButton.defaultProps = { type: 'button' };\n\nconst PageLinkWrapper = styled(LinkWrapperButton)`\n  color: ${({ theme, $active }) => ($active ? theme.colors.primary700 : theme.colors.neutral800)};\n  background: ${({ theme, $active }) => ($active ? theme.colors.neutral0 : undefined)};\n\n  &:hover {\n    box-shadow: ${({ theme }) => theme.shadows.filterShadow};\n  }\n`;\n\nconst ActionLinkWrapper = styled(LinkWrapperButton)`\n  font-size: 1.1rem;\n  svg path {\n    fill: ${(p) => (p['aria-disabled'] ? p.theme.colors.neutral300 : p.theme.colors.neutral600)};\n  }\n\n  &:focus,\n  &:hover {\n    svg path {\n      fill: ${(p) => (p['aria-disabled'] ? p.theme.colors.neutral300 : p.theme.colors.neutral700)};\n    }\n  }\n\n  ${(p) =>\n    p['aria-disabled']\n      ? `\n  pointer-events: none;\n    `\n      : undefined}\n`;\n\nconst DotsWrapper = styled(LinkWrapperDiv)`\n  color: ${({ theme }) => theme.colors.neutral800};\n`;\n\ninterface PaginationLinkProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  children: React.ReactNode;\n}\n\ninterface PageLinkProps extends PaginationLinkProps {\n  number: number;\n}\n\nconst PreviousLink = ({ children, ...props }: PaginationLinkProps) => {\n  const { activePage } = usePagination();\n\n  const disabled = activePage === 1;\n\n  return (\n    <li>\n      <ActionLinkWrapper aria-disabled={disabled} tabIndex={disabled ? -1 : undefined} {...props}>\n        <VisuallyHidden>{children}</VisuallyHidden>\n        <ChevronLeft aria-hidden />\n      </ActionLinkWrapper>\n    </li>\n  );\n};\n\nconst NextLink = ({ children, ...props }: PaginationLinkProps) => {\n  const { activePage, pageCount } = usePagination();\n\n  const disabled = activePage === pageCount;\n\n  return (\n    <li>\n      <ActionLinkWrapper aria-disabled={disabled} tabIndex={disabled ? -1 : undefined} {...props}>\n        <VisuallyHidden>{children}</VisuallyHidden>\n        <ChevronRight aria-hidden />\n      </ActionLinkWrapper>\n    </li>\n  );\n};\n\nconst PageLink = ({ number, children, ...props }: PageLinkProps) => {\n  const { activePage } = usePagination();\n\n  const isActive = activePage === number;\n\n  return (\n    <li>\n      <PageLinkWrapper {...props} $active={isActive}>\n        <VisuallyHidden>{children}</VisuallyHidden>\n        <PaginationText aria-hidden variant=\"pi\" fontWeight={isActive ? 'bold' : ''}>\n          {number}\n        </PaginationText>\n      </PageLinkWrapper>\n    </li>\n  );\n};\n\ninterface DotsProps extends React.HTMLAttributes<HTMLDivElement> {\n  children: React.ReactNode;\n}\n\nconst Dots = ({ children, ...props }: DotsProps) => (\n  <li>\n    <DotsWrapper {...props} as=\"div\">\n      <VisuallyHidden>{children}</VisuallyHidden>\n      <PaginationText aria-hidden small>\n        â€¦\n      </PaginationText>\n    </DotsWrapper>\n  </li>\n);\n\ninterface PaginationFooterProps {\n  activePage: number;\n  onChangePage: (page: number) => void;\n  pagination: {\n    pageCount: number;\n  };\n}\n\nexport const PaginationFooter = ({\n  activePage,\n  onChangePage,\n  pagination: { pageCount },\n}: PaginationFooterProps) => {\n  const { formatMessage } = useIntl();\n\n  const previousActivePage = activePage - 1;\n  const nextActivePage = activePage + 1;\n\n  const firstLinks = [\n    <PageLink\n      key={1}\n      number={1}\n      onClick={() => {\n        onChangePage(1);\n      }}\n    >\n      {formatMessage(\n        { id: 'components.pagination.go-to', defaultMessage: 'Go to page {page}' },\n        { page: 1 }\n      )}\n    </PageLink>,\n  ];\n\n  if (pageCount <= 4) {\n    const links = Array.from({ length: pageCount })\n      .map((_, i) => i + 1)\n      .map((number) => {\n        return (\n          <PageLink key={number} number={number} onClick={() => onChangePage(number)}>\n            {formatMessage(\n              { id: 'components.pagination.go-to', defaultMessage: 'Go to page {page}' },\n              { page: number }\n            )}\n          </PageLink>\n        );\n      });\n\n    return (\n      <Pagination activePage={activePage} pageCount={pageCount}>\n        <PreviousLink onClick={() => onChangePage(previousActivePage)}>\n          {formatMessage({\n            id: 'components.pagination.go-to-previous',\n            defaultMessage: 'Go to previous page',\n          })}\n        </PreviousLink>\n        {links}\n        <NextLink onClick={() => onChangePage(nextActivePage)}>\n          {formatMessage({\n            id: 'components.pagination.go-to-next',\n            defaultMessage: 'Go to next page',\n          })}\n        </NextLink>\n      </Pagination>\n    );\n  }\n\n  let firstLinksToCreate: number[] = [];\n  const lastLinks: JSX.Element[] = [];\n  let lastLinksToCreate: number[] = [];\n  const middleLinks: JSX.Element[] = [];\n\n  if (pageCount > 1) {\n    lastLinks.push(\n      <PageLink key={pageCount} number={pageCount} onClick={() => onChangePage(pageCount)}>\n        {formatMessage(\n          { id: 'components.pagination.go-to', defaultMessage: 'Go to page {page}' },\n          { page: pageCount }\n        )}\n      </PageLink>\n    );\n  }\n\n  if (activePage === 1 && pageCount >= 3) {\n    firstLinksToCreate = [2];\n  }\n\n  if (activePage === 2 && pageCount >= 3) {\n    if (pageCount === 5) {\n      firstLinksToCreate = [2, 3, 4];\n    } else if (pageCount === 3) {\n      firstLinksToCreate = [2];\n    } else {\n      firstLinksToCreate = [2, 3];\n    }\n  }\n\n  if (activePage === 4 && pageCount >= 3) {\n    firstLinksToCreate = [2];\n  }\n\n  if (activePage === pageCount && pageCount >= 3) {\n    lastLinksToCreate = [pageCount - 1];\n  }\n\n  if (activePage === pageCount - 2 && pageCount > 3) {\n    lastLinksToCreate = [activePage + 1, activePage, activePage - 1];\n  }\n\n  if (activePage === pageCount - 3 && pageCount > 3 && activePage > 5) {\n    lastLinksToCreate = [activePage + 2, activePage + 1, activePage, activePage - 1];\n  }\n\n  if (activePage === pageCount - 1 && pageCount > 3) {\n    lastLinksToCreate = [activePage, activePage - 1];\n  }\n\n  lastLinksToCreate.forEach((number) => {\n    lastLinks.unshift(\n      <PageLink key={number} number={number} onClick={() => onChangePage(number)}>\n        Go to page {number}\n      </PageLink>\n    );\n  });\n\n  firstLinksToCreate.forEach((number) => {\n    firstLinks.push(\n      <PageLink key={number} number={number} onClick={() => onChangePage(number)}>\n        {formatMessage(\n          { id: 'components.pagination.go-to', defaultMessage: 'Go to page {page}' },\n          { page: number }\n        )}\n      </PageLink>\n    );\n  });\n\n  if (\n    ![1, 2].includes(activePage) &&\n    activePage <= pageCount - 3 &&\n    firstLinks.length + lastLinks.length < 6\n  ) {\n    const middleLinksToCreate = [activePage - 1, activePage, activePage + 1];\n\n    middleLinksToCreate.forEach((number) => {\n      middleLinks.push(\n        <PageLink key={number} number={number} onClick={() => onChangePage(number)}>\n          {formatMessage(\n            { id: 'components.pagination.go-to', defaultMessage: 'Go to page {page}' },\n            { page: number }\n          )}\n        </PageLink>\n      );\n    });\n  }\n\n  const shouldShowDotsAfterFirstLink =\n    pageCount > 5 || (pageCount === 5 && (activePage === 1 || activePage === 5));\n  const shouldShowMiddleDots = middleLinks.length > 2 && activePage > 4 && pageCount > 5;\n\n  const beforeDotsLinksLength = shouldShowMiddleDots\n    ? pageCount - activePage - 1\n    : pageCount - firstLinks.length - lastLinks.length;\n  const afterDotsLength = shouldShowMiddleDots\n    ? pageCount - firstLinks.length - lastLinks.length\n    : pageCount - activePage - 1;\n\n  return (\n    <Pagination activePage={activePage} pageCount={pageCount}>\n      <PreviousLink onClick={() => onChangePage(previousActivePage)}>\n        {formatMessage({\n          id: 'components.pagination.go-to-previous',\n          defaultMessage: 'Go to previous page',\n        })}\n      </PreviousLink>\n      {firstLinks}\n      {shouldShowMiddleDots && (\n        <Dots>\n          {formatMessage(\n            {\n              id: 'components.pagination.remaining-links',\n              defaultMessage: 'And {number} other links',\n            },\n            { number: beforeDotsLinksLength }\n          )}\n        </Dots>\n      )}\n      {middleLinks}\n      {shouldShowDotsAfterFirstLink && (\n        <Dots>\n          {formatMessage(\n            {\n              id: 'components.pagination.remaining-links',\n              defaultMessage: 'And {number} other links',\n            },\n            { number: afterDotsLength }\n          )}\n        </Dots>\n      )}\n      {lastLinks}\n      <NextLink onClick={() => onChangePage(nextActivePage)}>\n        {formatMessage({\n          id: 'components.pagination.go-to-next',\n          defaultMessage: 'Go to next page',\n        })}\n      </NextLink>\n    </Pagination>\n  );\n};\n", "// TODO: find a better naming convention for the file that was an index file before\nimport * as React from 'react';\n\nimport { useTracking } from '@strapi/admin/strapi-admin';\nimport { IconButton, Searchbar, SearchForm } from '@strapi/design-system';\nimport { Search } from '@strapi/icons';\nimport { useIntl } from 'react-intl';\n\nimport { getTrad } from '../../../../utils';\n\nimport type { Query } from '../../../../../../shared/contracts/files';\n\ninterface SearchAssetProps {\n  onChangeSearch: (_q: Query['_q'] | null) => void;\n  queryValue?: Query['_q'] | null;\n}\n\nexport const SearchAsset = ({ onChangeSearch, queryValue = null }: SearchAssetProps) => {\n  const { formatMessage } = useIntl();\n  const { trackUsage } = useTracking();\n  const [isOpen, setIsOpen] = React.useState(!!queryValue);\n  const [value, setValue] = React.useState(queryValue || '');\n  const wrapperRef = React.useRef<HTMLDivElement>(null);\n\n  React.useLayoutEffect(() => {\n    if (isOpen) {\n      setTimeout(() => {\n        wrapperRef.current?.querySelector('input')?.focus();\n      }, 0);\n    }\n  }, [isOpen]);\n\n  const handleToggle = () => {\n    setIsOpen((prev) => !prev);\n  };\n\n  const handleClear = () => {\n    handleToggle();\n    onChangeSearch(null);\n  };\n\n  const handleSubmit = (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    trackUsage('didSearchMediaLibraryElements', { location: 'content-manager' });\n    onChangeSearch(value);\n  };\n\n  if (isOpen) {\n    return (\n      <div ref={wrapperRef}>\n        <SearchForm onSubmit={handleSubmit}>\n          <Searchbar\n            name=\"search\"\n            onClear={handleClear}\n            onChange={(e) => setValue(e.target.value)}\n            clearLabel={formatMessage({\n              id: getTrad('search.clear.label'),\n              defaultMessage: 'Clear the search',\n            })}\n            aria-label=\"search\"\n            size=\"S\"\n            value={value}\n            placeholder={formatMessage({\n              id: getTrad('search.placeholder'),\n              defaultMessage: 'e.g: the first dog on the moon',\n            })}\n          >\n            {formatMessage({ id: getTrad('search.label'), defaultMessage: 'Search for an asset' })}\n          </Searchbar>\n        </SearchForm>\n      </div>\n    );\n  }\n\n  return (\n    <IconButton label=\"Search\" onClick={handleToggle}>\n      <Search />\n    </IconButton>\n  );\n};\n", "export const isSelectable = (allowedTypes: string[], mime = '') => {\n  if (!mime) return false;\n\n  const fileType = mime.split('/')[0];\n\n  return (\n    allowedTypes.includes(fileType) ||\n    (allowedTypes.includes('file') && !['video', 'image', 'audio'].includes(fileType))\n  );\n};\n", "// TODO: find a better naming convention for the file that was an index file before\nimport {\n  Checkbox,\n  Box,\n  Button,\n  Divider,\n  Flex,\n  IconButton,\n  Typography,\n  VisuallyHidden,\n  Grid,\n} from '@strapi/design-system';\nimport { GridFour as GridIcon, List, Pencil, Plus } from '@strapi/icons';\nimport { useIntl } from 'react-intl';\nimport { styled } from 'styled-components';\n\nimport { localStorageKeys, viewOptions } from '../../../constants';\nimport { useFolder } from '../../../hooks/useFolder';\nimport { usePersistentState } from '../../../hooks/usePersistentState';\nimport {\n  getBreadcrumbDataCM,\n  toSingularTypes,\n  getTrad,\n  getAllowedFiles,\n  BreadcrumbDataFolder,\n  AllowedFiles,\n} from '../../../utils';\nimport { AssetGridList } from '../../AssetGridList/AssetGridList';\nimport { Breadcrumbs } from '../../Breadcrumbs/Breadcrumbs';\nimport { EmptyAssets } from '../../EmptyAssets/EmptyAssets';\nimport { FolderCard } from '../../FolderCard/FolderCard/FolderCard';\nimport { FolderCardBody } from '../../FolderCard/FolderCardBody/FolderCardBody';\nimport { FolderCardBodyAction } from '../../FolderCard/FolderCardBodyAction/FolderCardBodyAction';\nimport { FolderGridList } from '../../FolderGridList/FolderGridList';\nimport { SortPicker } from '../../SortPicker/SortPicker';\nimport { TableList, FolderRow, FileRow } from '../../TableList/TableList';\n\nimport { Filters, FilterStructure as ImportedFilterStructure } from './Filters';\nimport { PageSize } from './PageSize';\nimport { PaginationFooter } from './PaginationFooter/PaginationFooter';\nimport { SearchAsset } from './SearchAsset/SearchAsset';\nimport { isSelectable } from './utils/isSelectable';\n\nimport type { File, Query, FilterCondition } from '../../../../../shared/contracts/files';\nimport type { Folder } from '../../../../../shared/contracts/folders';\nimport type { AllowedTypes } from '../../AssetCard/AssetCard';\n\nconst TypographyMaxWidth = styled(Typography)`\n  max-width: 100%;\n`;\n\nconst ActionContainer = styled(Box)`\n  svg {\n    path {\n      fill: ${({ theme }) => theme.colors.neutral500};\n    }\n  }\n`;\n\ntype NumberKeyedObject = Record<number, string>;\n\ntype StringFilter = {\n  [key: string]: string;\n};\n\ntype MimeFilter = {\n  [key: string]:\n    | string\n    | NumberKeyedObject\n    | Record<string, string | NumberKeyedObject>\n    | undefined;\n};\n\nexport type FilterStructure = {\n  [key: string]: MimeFilter | StringFilter | undefined;\n};\n\nexport type Filter = {\n  [key in 'mime' | 'createdAt' | 'updatedAt']?:\n    | {\n        [key in '$contains' | '$notContains' | '$eq' | '$not']?:\n          | string[]\n          | string\n          | { $contains: string[] };\n      }\n    | undefined;\n};\n\nexport interface FolderWithType extends Omit<Folder, 'children' | 'files'> {\n  folderURL?: string;\n  isSelectable?: boolean;\n  type?: string;\n  children?: Folder['children'] & {\n    count: number;\n  };\n  files?: Folder['files'] & {\n    count: number;\n  };\n}\n\nexport interface FileWithType extends File {\n  folderURL?: string;\n  isSelectable?: boolean;\n  type?: string;\n}\n\nexport interface BrowseStepProps {\n  allowedTypes?: AllowedTypes[];\n  assets: File[];\n  canCreate: boolean;\n  canRead: boolean;\n  folders?: FolderWithType[];\n  multiple?: boolean;\n  onAddAsset: () => void;\n  onChangeFilters: (filters: FilterCondition<string>[] | Filter[]) => void;\n  onChangeFolder: (id: number, path?: string) => void;\n  onChangePage: (page: number) => void;\n  onChangePageSize: (value: number) => void;\n  onChangeSort: (value: Query['sort'] | string) => void;\n  onChangeSearch: (_q?: Query['_q'] | null) => void;\n  onEditAsset: ((asset: FileWithType) => void) | null;\n  onEditFolder: ((folder: FolderRow) => void) | null;\n  onSelectAsset: (element: FileRow | FolderRow) => void;\n  onSelectAllAsset?: (checked: boolean | string, rows?: FolderRow[] | FileRow[]) => void;\n  queryObject: Query;\n  pagination: { pageCount: number };\n  selectedAssets: FileWithType[] | FolderWithType[];\n}\n\nexport const BrowseStep = ({\n  allowedTypes = [],\n  assets: rawAssets,\n  canCreate,\n  canRead,\n  folders = [],\n  multiple = false,\n  onAddAsset,\n  onChangeFilters,\n  onChangePage,\n  onChangePageSize,\n  onChangeSearch,\n  onChangeSort,\n  onChangeFolder,\n  onEditAsset,\n  onEditFolder,\n  onSelectAllAsset,\n  onSelectAsset,\n  pagination,\n  queryObject,\n  selectedAssets,\n}: BrowseStepProps) => {\n  const { formatMessage } = useIntl();\n  const [view, setView] = usePersistentState(localStorageKeys.modalView, viewOptions.GRID);\n  const isGridView = view === viewOptions.GRID;\n\n  const { data: currentFolder, isLoading: isCurrentFolderLoading } = useFolder(\n    queryObject?.folder as number | null | undefined,\n    {\n      enabled: canRead && !!queryObject?.folder,\n    }\n  );\n\n  const singularTypes = toSingularTypes(allowedTypes);\n  const assets = rawAssets.map((asset) => ({\n    ...asset,\n    isSelectable: isSelectable(singularTypes, asset?.mime),\n    type: 'asset',\n  }));\n\n  const breadcrumbs = !isCurrentFolderLoading\n    ? getBreadcrumbDataCM(currentFolder as BreadcrumbDataFolder)\n    : undefined;\n\n  const allAllowedAsset = getAllowedFiles(allowedTypes, assets as AllowedFiles[]);\n  const areAllAssetSelected =\n    allAllowedAsset.length > 0 &&\n    selectedAssets.length > 0 &&\n    allAllowedAsset.every(\n      (asset) => selectedAssets.findIndex((currAsset) => currAsset.id === asset.id) !== -1\n    );\n  const hasSomeAssetSelected = allAllowedAsset.some(\n    (asset) => selectedAssets.findIndex((currAsset) => currAsset.id === asset.id) !== -1\n  );\n  const isSearching = !!queryObject?._q;\n  const isFiltering = !!queryObject?.filters?.$and?.length && queryObject.filters.$and.length > 0;\n  const isSearchingOrFiltering = isSearching || isFiltering;\n  const assetCount = assets.length;\n  const folderCount = folders.length;\n  const handleClickFolderCard = (...args: Parameters<typeof onChangeFolder>) => {\n    // Search query will always fetch the same results\n    // we remove it here to allow navigating in a folder and see the result of this navigation\n    onChangeSearch('');\n    onChangeFolder(...args);\n  };\n\n  return (\n    <Box>\n      {onSelectAllAsset && (\n        <Box paddingBottom={4}>\n          <Flex justifyContent=\"space-between\" alignItems=\"flex-start\">\n            {(assetCount > 0 || folderCount > 0 || isFiltering) && (\n              <Flex gap={2} wrap=\"wrap\">\n                {multiple && isGridView && (\n                  <Flex\n                    paddingLeft={2}\n                    paddingRight={2}\n                    background=\"neutral0\"\n                    hasRadius\n                    borderColor=\"neutral200\"\n                    height=\"3.2rem\"\n                  >\n                    <Checkbox\n                      aria-label={formatMessage({\n                        id: getTrad('bulk.select.label'),\n                        defaultMessage: 'Select all assets',\n                      })}\n                      checked={\n                        !areAllAssetSelected && hasSomeAssetSelected\n                          ? 'indeterminate'\n                          : areAllAssetSelected\n                      }\n                      onCheckedChange={onSelectAllAsset}\n                    />\n                  </Flex>\n                )}\n                {isGridView && <SortPicker onChangeSort={onChangeSort} value={queryObject?.sort} />}\n                <Filters\n                  appliedFilters={queryObject?.filters?.$and as ImportedFilterStructure[]}\n                  onChangeFilters={onChangeFilters}\n                />\n              </Flex>\n            )}\n\n            {(assetCount > 0 || folderCount > 0 || isSearching) && (\n              <Flex marginLeft=\"auto\" shrink={0} gap={2}>\n                <ActionContainer paddingTop={1} paddingBottom={1}>\n                  <IconButton\n                    label={\n                      isGridView\n                        ? formatMessage({\n                            id: 'view-switch.list',\n                            defaultMessage: 'List View',\n                          })\n                        : formatMessage({\n                            id: 'view-switch.grid',\n                            defaultMessage: 'Grid View',\n                          })\n                    }\n                    onClick={() => setView(isGridView ? viewOptions.LIST : viewOptions.GRID)}\n                  >\n                    {isGridView ? <List /> : <GridIcon />}\n                  </IconButton>\n                </ActionContainer>\n                <SearchAsset onChangeSearch={onChangeSearch} queryValue={queryObject._q || ''} />\n              </Flex>\n            )}\n          </Flex>\n        </Box>\n      )}\n\n      {canRead && breadcrumbs?.length && breadcrumbs.length > 0 && currentFolder && (\n        <Box paddingTop={3}>\n          <Breadcrumbs\n            onChangeFolder={onChangeFolder}\n            label={formatMessage({\n              id: getTrad('header.breadcrumbs.nav.label'),\n              defaultMessage: 'Folders navigation',\n            })}\n            breadcrumbs={breadcrumbs as BreadcrumbDataFolder[]}\n            currentFolderId={queryObject?.folder as number | undefined}\n          />\n        </Box>\n      )}\n\n      {assetCount === 0 && folderCount === 0 && (\n        <Box paddingBottom={6}>\n          <EmptyAssets\n            size=\"S\"\n            count={6}\n            action={\n              canCreate &&\n              !isFiltering &&\n              !isSearching && (\n                <Button variant=\"secondary\" startIcon={<Plus />} onClick={onAddAsset}>\n                  {formatMessage({\n                    id: getTrad('header.actions.add-assets'),\n                    defaultMessage: 'Add new assets',\n                  })}\n                </Button>\n              )\n            }\n            content={\n              // eslint-disable-next-line no-nested-ternary\n              isSearchingOrFiltering\n                ? formatMessage({\n                    id: getTrad('list.assets-empty.title-withSearch'),\n                    defaultMessage: 'There are no assets with the applied filters',\n                  })\n                : canCreate && !isSearching\n                  ? formatMessage({\n                      id: getTrad('list.assets.empty'),\n                      defaultMessage: 'Upload your first assets...',\n                    })\n                  : formatMessage({\n                      id: getTrad('list.assets.empty.no-permissions'),\n                      defaultMessage: 'The asset list is empty',\n                    })\n            }\n          />\n        </Box>\n      )}\n\n      {!isGridView && (folderCount > 0 || assetCount > 0) && (\n        <TableList\n          allowedTypes={allowedTypes}\n          assetCount={assetCount}\n          folderCount={folderCount}\n          indeterminate={!areAllAssetSelected && hasSomeAssetSelected}\n          isFolderSelectionAllowed={false}\n          onChangeSort={onChangeSort}\n          onChangeFolder={handleClickFolderCard}\n          onEditAsset={onEditAsset}\n          onEditFolder={onEditFolder}\n          onSelectOne={onSelectAsset}\n          onSelectAll={onSelectAllAsset!}\n          rows={\n            [...folders.map((folder) => ({ ...folder, type: 'folder' })), ...assets] as\n              | FolderRow[]\n              | FileRow[]\n          }\n          selected={selectedAssets}\n          shouldDisableBulkSelect={!multiple}\n          sortQuery={queryObject?.sort ?? ''}\n        />\n      )}\n\n      {isGridView && (\n        <>\n          {folderCount > 0 && (\n            <FolderGridList\n              title={\n                (((isSearchingOrFiltering && assetCount > 0) || !isSearchingOrFiltering) &&\n                  formatMessage(\n                    {\n                      id: getTrad('list.folders.title'),\n                      defaultMessage: 'Folders ({count})',\n                    },\n                    { count: folderCount }\n                  )) ||\n                ''\n              }\n            >\n              {folders.map((folder) => {\n                return (\n                  <Grid.Item\n                    col={3}\n                    key={`folder-${folder.id}`}\n                    direction=\"column\"\n                    alignItems=\"stretch\"\n                  >\n                    <FolderCard\n                      ariaLabel={folder.name}\n                      id={`folder-${folder.id}`}\n                      onClick={() => handleClickFolderCard(folder.id, folder.path)}\n                      cardActions={\n                        onEditFolder && (\n                          <IconButton\n                            withTooltip={false}\n                            label={formatMessage({\n                              id: getTrad('list.folder.edit'),\n                              defaultMessage: 'Edit folder',\n                            })}\n                            onClick={() => onEditFolder(folder)}\n                          >\n                            <Pencil />\n                          </IconButton>\n                        )\n                      }\n                    >\n                      <FolderCardBody>\n                        <FolderCardBodyAction\n                          onClick={() => handleClickFolderCard(folder.id, folder.path)}\n                        >\n                          <Flex tag=\"h2\" direction=\"column\" alignItems=\"start\" maxWidth=\"100%\">\n                            <TypographyMaxWidth\n                              fontWeight=\"semiBold\"\n                              ellipsis\n                              textColor=\"neutral800\"\n                            >\n                              {folder.name}\n                              {/* VisuallyHidden dash here allows to separate folder title and count informations\n                              for voice reading structure purpose */}\n                              <VisuallyHidden>-</VisuallyHidden>\n                            </TypographyMaxWidth>\n                            <TypographyMaxWidth\n                              tag=\"span\"\n                              textColor=\"neutral600\"\n                              variant=\"pi\"\n                              ellipsis\n                            >\n                              {formatMessage(\n                                {\n                                  id: getTrad('list.folder.subtitle'),\n                                  defaultMessage:\n                                    '{folderCount, plural, =0 {# folder} one {# folder} other {# folders}}, {filesCount, plural, =0 {# asset} one {# asset} other {# assets}}',\n                                },\n                                {\n                                  folderCount: folder.children?.count,\n                                  filesCount: folder.files?.count,\n                                }\n                              )}\n                            </TypographyMaxWidth>\n                          </Flex>\n                        </FolderCardBodyAction>\n                      </FolderCardBody>\n                    </FolderCard>\n                  </Grid.Item>\n                );\n              })}\n            </FolderGridList>\n          )}\n\n          {assetCount > 0 && folderCount > 0 && (\n            <Box paddingTop={6}>\n              <Divider />\n            </Box>\n          )}\n\n          {assetCount > 0 && (\n            <Box paddingTop={6}>\n              <AssetGridList\n                allowedTypes={allowedTypes}\n                size=\"S\"\n                assets={assets}\n                onSelectAsset={onSelectAsset}\n                selectedAssets={selectedAssets as FileWithType[]}\n                onEditAsset={onEditAsset!}\n                title={\n                  ((!isSearchingOrFiltering || (isSearchingOrFiltering && folderCount > 0)) &&\n                    queryObject.page === 1 &&\n                    formatMessage(\n                      {\n                        id: getTrad('list.assets.title'),\n                        defaultMessage: 'Assets ({count})',\n                      },\n                      { count: assetCount }\n                    )) ||\n                  ''\n                }\n              />\n            </Box>\n          )}\n        </>\n      )}\n\n      {pagination.pageCount > 0 && (\n        <Flex justifyContent=\"space-between\" paddingTop={4} position=\"relative\" zIndex={1}>\n          <PageSize\n            pageSize={queryObject.pageSize! as number}\n            onChangePageSize={onChangePageSize}\n          />\n          <PaginationFooter\n            activePage={queryObject.page as number}\n            onChangePage={onChangePage}\n            pagination={pagination}\n          />\n        </Flex>\n      )}\n    </Box>\n  );\n};\n", "import { Button, Modal } from '@strapi/design-system';\nimport { useIntl } from 'react-intl';\n\ninterface DialogFooterProps {\n  onClose: () => void;\n  onValidate?: () => void;\n}\n\nexport const DialogFooter = ({ onClose, onValidate }: DialogFooterProps) => {\n  const { formatMessage } = useIntl();\n\n  return (\n    <Modal.Footer>\n      <Button onClick={onClose} variant=\"tertiary\">\n        {formatMessage({ id: 'app.components.Button.cancel', defaultMessage: 'Cancel' })}\n      </Button>\n      {onValidate && (\n        <Button onClick={onValidate}>\n          {formatMessage({ id: 'global.finish', defaultMessage: 'Finish' })}\n        </Button>\n      )}\n    </Modal.Footer>\n  );\n};\n", "// TODO: find a better naming convention for the file that was an index file before\nimport { Flex, Typography } from '@strapi/design-system';\nimport { useIntl } from 'react-intl';\n\nimport { getTrad } from '../../../utils';\nimport { AssetGridList } from '../../AssetGridList/AssetGridList';\n\nimport type { File } from '../../../../../shared/contracts/files';\n\ninterface SelectedStepProps {\n  onSelectAsset: (asset: File) => void;\n  selectedAssets: File[];\n  onReorderAsset?: (fromIndex: number, toIndex: number) => void;\n}\n\nexport const SelectedStep = ({\n  selectedAssets,\n  onSelectAsset,\n  onReorderAsset,\n}: SelectedStepProps) => {\n  const { formatMessage } = useIntl();\n\n  return (\n    <Flex direction=\"column\" alignItems=\"stretch\" gap={4}>\n      <Flex gap={0} direction=\"column\" alignItems=\"start\">\n        <Typography variant=\"pi\" fontWeight=\"bold\" textColor=\"neutral800\">\n          {formatMessage(\n            {\n              id: getTrad('list.assets.to-upload'),\n              defaultMessage:\n                '{number, plural, =0 {No asset} one {1 asset} other {# assets}} ready to upload',\n            },\n            { number: selectedAssets.length }\n          )}\n        </Typography>\n        <Typography variant=\"pi\" textColor=\"neutral600\">\n          {formatMessage({\n            id: getTrad('modal.upload-list.sub-header-subtitle'),\n            defaultMessage: 'Manage the assets before adding them to the Media Library',\n          })}\n        </Typography>\n      </Flex>\n\n      <AssetGridList\n        size=\"S\"\n        assets={selectedAssets}\n        onSelectAsset={onSelectAsset}\n        selectedAssets={selectedAssets}\n        onReorderAsset={onReorderAsset}\n      />\n    </Flex>\n  );\n};\n", "// TODO: find a better naming convention for the file that was an index file before\nimport * as React from 'react';\n\nimport { Page } from '@strapi/admin/strapi-admin';\nimport { Badge, Button, Divider, Flex, Loader, Modal, Tabs } from '@strapi/design-system';\nimport { useIntl } from 'react-intl';\nimport { styled } from 'styled-components';\n\nimport { useAssets } from '../../hooks/useAssets';\nimport { useFolders } from '../../hooks/useFolders';\nimport { useMediaLibraryPermissions } from '../../hooks/useMediaLibraryPermissions';\nimport { useModalQueryParams } from '../../hooks/useModalQueryParams';\nimport { useSelectionState } from '../../hooks/useSelectionState';\nimport {\n  containsAssetFilter,\n  getTrad,\n  getAllowedFiles,\n  moveElement,\n  AllowedFiles,\n} from '../../utils';\nimport { EditAssetContent, Asset as EditAsset } from '../EditAssetDialog/EditAssetContent';\nimport { EditFolderContent } from '../EditFolderDialog/EditFolderDialog';\n\nimport {\n  BrowseStep,\n  FolderWithType,\n  FileWithType,\n  Filter as BrowseFilter,\n} from './BrowseStep/BrowseStep';\nimport { DialogFooter } from './DialogFooter';\nimport { SelectedStep } from './SelectedStep/SelectedStep';\n\nimport type { File as Asset, FilterCondition, Query } from '../../../../shared/contracts/files';\nimport type { Folder, FolderDefinition } from '../../../../shared/contracts/folders';\nimport type { AllowedTypes } from '../AssetCard/AssetCard';\n\nconst LoadingBody = styled(Flex)`\n  /* 80px are coming from the Tabs component that is not included in the ModalBody */\n  min-height: ${() => `calc(60vh + 8rem)`};\n`;\n\nexport interface FileRow extends Asset {\n  folderURL?: string;\n  isSelectable?: boolean;\n  type?: string;\n}\n\nexport interface FolderRow extends Folder {\n  folderURL?: string;\n  isSelectable?: boolean;\n  type?: string;\n}\n\ninterface AssetContentProps {\n  allowedTypes?: AllowedTypes[];\n  folderId?: number | null;\n  onClose: () => void;\n  onAddAsset: (arg?: { folderId: number | { id: number } | null | undefined }) => void;\n  onAddFolder: ({ folderId }: { folderId: number | { id: number } | null | undefined }) => void;\n  onChangeFolder: (folderId: number | null) => void;\n  onValidate: (selectedAssets: Asset[]) => void;\n  multiple?: boolean;\n  trackedLocation?: string;\n  initiallySelectedAssets?: Asset[];\n}\n\nexport const AssetContent = ({\n  allowedTypes = [],\n  folderId = null,\n  onClose,\n  onAddAsset,\n  onAddFolder,\n  onChangeFolder,\n  onValidate,\n  multiple = false,\n  initiallySelectedAssets = [],\n  trackedLocation,\n}: AssetContentProps) => {\n  const [assetToEdit, setAssetToEdit] = React.useState<FileWithType | undefined>(undefined);\n  const [folderToEdit, setFolderToEdit] = React.useState<FolderRow | undefined>(undefined);\n  const { formatMessage } = useIntl();\n  const {\n    canRead,\n    canCreate,\n    isLoading: isLoadingPermissions,\n    canUpdate,\n    canCopyLink,\n    canDownload,\n  } = useMediaLibraryPermissions();\n\n  const [\n    { queryObject },\n    {\n      onChangeFilters,\n      onChangePage,\n      onChangePageSize,\n      onChangeSort,\n      onChangeSearch,\n      onChangeFolder: onChangeFolderParam,\n    },\n  ] = useModalQueryParams({ folder: folderId });\n\n  const {\n    data: { pagination, results: assets } = {},\n    isLoading: isLoadingAssets,\n    error: errorAssets,\n  } = useAssets({ skipWhen: !canRead, query: queryObject });\n\n  const {\n    data: folders,\n    isLoading: isLoadingFolders,\n    error: errorFolders,\n  } = useFolders({\n    enabled: canRead && !containsAssetFilter(queryObject!) && pagination?.page === 1,\n    query: queryObject,\n  });\n\n  const [\n    selectedAssets,\n    { selectOne, selectOnly, setSelections, selectMultiple, deselectMultiple },\n  ] = useSelectionState(['id'], initiallySelectedAssets);\n\n  const handleSelectAllAssets = () => {\n    const allowedAssets = getAllowedFiles(allowedTypes, assets as AllowedFiles[]);\n\n    if (!multiple) {\n      return undefined;\n    }\n\n    // selected files in current folder\n    const alreadySelected = allowedAssets.filter(\n      (asset) => selectedAssets.findIndex((selectedAsset) => selectedAsset.id === asset.id) !== -1\n    );\n\n    if (alreadySelected.length > 0) {\n      deselectMultiple(alreadySelected);\n    } else {\n      selectMultiple(allowedAssets);\n    }\n  };\n\n  const handleSelectAsset = (asset: Asset | FileRow | FolderRow) => {\n    return multiple ? selectOne(asset as Asset) : selectOnly(asset as Asset);\n  };\n\n  const isLoading = isLoadingPermissions || isLoadingAssets || isLoadingFolders;\n  const hasError = errorAssets || errorFolders;\n\n  const [activeTab, setActiveTab] = React.useState(\n    selectedAssets.length > 0 ? 'selected' : 'browse'\n  );\n\n  if (isLoading) {\n    return (\n      <>\n        <Modal.Header>\n          <Modal.Title>\n            {formatMessage({\n              id: getTrad('header.actions.add-assets'),\n              defaultMessage: 'Add new assets',\n            })}\n          </Modal.Title>\n        </Modal.Header>\n        <LoadingBody justifyContent=\"center\" paddingTop={4} paddingBottom={4}>\n          <Loader>\n            {formatMessage({\n              id: getTrad('content.isLoading'),\n              defaultMessage: 'Content is loading.',\n            })}\n          </Loader>\n        </LoadingBody>\n        <DialogFooter onClose={onClose} />\n      </>\n    );\n  }\n\n  if (hasError) {\n    return (\n      <>\n        <Modal.Header>\n          <Modal.Title>\n            {formatMessage({\n              id: getTrad('header.actions.add-assets'),\n              defaultMessage: 'Add new assets',\n            })}\n          </Modal.Title>\n        </Modal.Header>\n        <Page.Error />\n        <DialogFooter onClose={onClose} />\n      </>\n    );\n  }\n\n  if (!canRead) {\n    return (\n      <>\n        <Modal.Header>\n          <Modal.Title>\n            {formatMessage({\n              id: getTrad('header.actions.add-assets'),\n              defaultMessage: 'Add new assets',\n            })}\n          </Modal.Title>\n        </Modal.Header>\n        <Page.NoPermissions />\n        <DialogFooter onClose={onClose} />\n      </>\n    );\n  }\n\n  if (assetToEdit) {\n    return (\n      <EditAssetContent\n        onClose={() => setAssetToEdit(undefined)}\n        asset={assetToEdit as EditAsset}\n        canUpdate={canUpdate}\n        canCopyLink={canCopyLink}\n        canDownload={canDownload}\n        trackedLocation={trackedLocation}\n      />\n    );\n  }\n\n  if (folderToEdit) {\n    return (\n      <EditFolderContent\n        folder={folderToEdit as FolderDefinition}\n        onClose={() => setFolderToEdit(undefined)}\n        location=\"content-manager\"\n        parentFolderId={queryObject?.folder as string | number | null | undefined}\n      />\n    );\n  }\n\n  const handleMoveItem = (hoverIndex: number, destIndex: number) => {\n    const offset = destIndex - hoverIndex;\n    const orderedAssetsClone = selectedAssets.slice();\n    const nextAssets = moveElement<Asset>(orderedAssetsClone, hoverIndex, offset);\n    setSelections(nextAssets);\n  };\n\n  const handleFolderChange = (folderId: number, folderPath?: string) => {\n    onChangeFolder(folderId);\n    if (onChangeFolderParam) {\n      onChangeFolderParam(folderId, folderPath);\n    }\n  };\n\n  return (\n    <>\n      <Modal.Header>\n        <Modal.Title>\n          {formatMessage({\n            id: getTrad('header.actions.add-assets'),\n            defaultMessage: 'Add new assets',\n          })}\n        </Modal.Title>\n      </Modal.Header>\n\n      <TabsRoot variant=\"simple\" value={activeTab} onValueChange={setActiveTab}>\n        <Flex paddingLeft={8} paddingRight={8} paddingTop={6} justifyContent=\"space-between\">\n          <Tabs.List>\n            <Tabs.Trigger value=\"browse\">\n              {formatMessage({\n                id: getTrad('modal.nav.browse'),\n                defaultMessage: 'Browse',\n              })}\n            </Tabs.Trigger>\n            <Tabs.Trigger value=\"selected\">\n              {formatMessage({\n                id: getTrad('modal.header.select-files'),\n                defaultMessage: 'Selected files',\n              })}\n              <Badge marginLeft={2}>{selectedAssets.length}</Badge>\n            </Tabs.Trigger>\n          </Tabs.List>\n          <Flex gap={2}>\n            <Button\n              variant=\"secondary\"\n              onClick={() => onAddFolder({ folderId: queryObject?.folder })}\n            >\n              {formatMessage({\n                id: getTrad('modal.upload-list.sub-header.add-folder'),\n                defaultMessage: 'Add folder',\n              })}\n            </Button>\n            <Button onClick={() => onAddAsset({ folderId: queryObject?.folder })}>\n              {formatMessage({\n                id: getTrad('modal.upload-list.sub-header.button'),\n                defaultMessage: 'Add more assets',\n              })}\n            </Button>\n          </Flex>\n        </Flex>\n        <Divider />\n        <Modal.Body>\n          <Tabs.Content value=\"browse\">\n            <BrowseStep\n              allowedTypes={allowedTypes}\n              assets={assets!}\n              canCreate={canCreate}\n              canRead={canRead}\n              folders={folders as FolderWithType[]}\n              onSelectAsset={handleSelectAsset}\n              selectedAssets={selectedAssets}\n              multiple={multiple}\n              onSelectAllAsset={handleSelectAllAssets}\n              onEditAsset={setAssetToEdit}\n              onEditFolder={setFolderToEdit}\n              pagination={pagination!}\n              queryObject={queryObject!}\n              onAddAsset={onAddAsset}\n              onChangeFilters={(filters: FilterCondition<string>[] | BrowseFilter[]) =>\n                onChangeFilters!(filters as FilterCondition<string>[])\n              }\n              onChangeFolder={handleFolderChange}\n              onChangePage={onChangePage!}\n              onChangePageSize={onChangePageSize!}\n              onChangeSort={(sort: string | undefined) => onChangeSort!(sort as Query['sort'])}\n              onChangeSearch={onChangeSearch!}\n            />\n          </Tabs.Content>\n          <Tabs.Content value=\"selected\">\n            <SelectedStep\n              selectedAssets={selectedAssets}\n              onSelectAsset={handleSelectAsset}\n              onReorderAsset={handleMoveItem}\n            />\n          </Tabs.Content>\n        </Modal.Body>\n      </TabsRoot>\n      <DialogFooter onClose={onClose} onValidate={() => onValidate(selectedAssets)} />\n    </>\n  );\n};\n\ninterface AssetDialogProps extends AssetContentProps {\n  open?: boolean;\n}\n\nexport const AssetDialog = ({ open = false, onClose, ...restProps }: AssetDialogProps) => {\n  return (\n    <Modal.Root open={open} onOpenChange={onClose}>\n      <Modal.Content>\n        <AssetContent onClose={onClose} {...restProps} />\n      </Modal.Content>\n    </Modal.Root>\n  );\n};\n\nconst TabsRoot = styled(Tabs.Root)`\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n`;\n", "// TODO: find a better naming convention for the file that was an index file before\nimport * as React from 'react';\n\nimport { AssetDialog } from '../AssetDialog/AssetDialog';\nimport { EditFolderDialog } from '../EditFolderDialog/EditFolderDialog';\nimport { UploadAssetDialog } from '../UploadAssetDialog/UploadAssetDialog';\n\nconst STEPS = {\n  AssetSelect: 'SelectAsset',\n  AssetUpload: 'UploadAsset',\n  FolderCreate: 'FolderCreate',\n};\n\nimport type { File } from '../../../../shared/contracts/files';\nimport type { AllowedTypes } from '../AssetCard/AssetCard';\nexport interface MediaLibraryDialogProps {\n  allowedTypes?: AllowedTypes[];\n  onClose: () => void;\n  onSelectAssets: (selectedAssets: File[]) => void;\n}\n\nexport const MediaLibraryDialog = ({\n  onClose,\n  onSelectAssets,\n  allowedTypes = ['files', 'images', 'videos', 'audios'],\n}: MediaLibraryDialogProps) => {\n  const [step, setStep] = React.useState(STEPS.AssetSelect);\n  const [folderId, setFolderId] = React.useState<number | null>(null);\n\n  switch (step) {\n    case STEPS.AssetSelect:\n      return (\n        <AssetDialog\n          allowedTypes={allowedTypes}\n          folderId={folderId}\n          open\n          onClose={onClose}\n          onValidate={onSelectAssets}\n          onAddAsset={() => setStep(STEPS.AssetUpload)}\n          onAddFolder={() => setStep(STEPS.FolderCreate)}\n          onChangeFolder={(folderId) => setFolderId(folderId)}\n          multiple\n        />\n      );\n\n    case STEPS.FolderCreate:\n      return (\n        <EditFolderDialog\n          open\n          onClose={() => setStep(STEPS.AssetSelect)}\n          parentFolderId={folderId}\n        />\n      );\n\n    default:\n      return (\n        <UploadAssetDialog open onClose={() => setStep(STEPS.AssetSelect)} folderId={folderId} />\n      );\n  }\n};\n", "import { Box, Flex } from '@strapi/design-system';\nimport { File, FilePdf } from '@strapi/icons';\nimport { styled } from 'styled-components';\n\nimport { AssetType } from '../../../constants';\nimport { createAssetUrl } from '../../../utils';\nimport { AudioPreview } from '../../AssetCard/AudioPreview';\nimport { VideoPreview } from '../../AssetCard/VideoPreview';\n\nimport type { File as FileAsset } from '../../../../../shared/contracts/files';\n\nconst DocAsset = styled(Flex)`\n  background: linear-gradient(180deg, #ffffff 0%, #f6f6f9 121.48%);\n`;\n\nconst VideoPreviewWrapper = styled(Box)`\n  canvas,\n  video {\n    max-width: 100%;\n    height: 124px;\n  }\n`;\n\nconst AudioPreviewWrapper = styled(Box)`\n  canvas,\n  audio {\n    max-width: 100%;\n  }\n`;\n\nexport const CarouselAsset = ({ asset }: { asset: FileAsset }) => {\n  if (asset.mime?.includes(AssetType.Video)) {\n    return (\n      <VideoPreviewWrapper height=\"100%\">\n        <VideoPreview\n          url={createAssetUrl(asset, true)!}\n          mime={asset.mime}\n          alt={asset.alternativeText || asset.name}\n        />\n      </VideoPreviewWrapper>\n    );\n  }\n\n  if (asset.mime?.includes(AssetType.Audio)) {\n    return (\n      <AudioPreviewWrapper>\n        <AudioPreview\n          url={createAssetUrl(asset, true)!}\n          alt={asset.alternativeText || asset.name}\n        />\n      </AudioPreviewWrapper>\n    );\n  }\n\n  if (asset.mime?.includes(AssetType.Image)) {\n    const assetUrl = createAssetUrl(asset, true);\n    if (!assetUrl) return null;\n\n    // Adding a param to the url to bust the cache and force the refresh of the image when replaced\n    // Only add updatedAt parameter if the URL is not signed to prevent signature invalidation\n    const cacheBustedUrl = asset.isUrlSigned\n      ? assetUrl\n      : `${assetUrl}${assetUrl.includes('?') ? '&' : '?'}updatedAt=${asset.updatedAt}`;\n\n    return (\n      <Box\n        tag=\"img\"\n        maxHeight=\"100%\"\n        maxWidth=\"100%\"\n        src={cacheBustedUrl}\n        alt={asset.alternativeText || asset.name}\n      />\n    );\n  }\n\n  return (\n    <DocAsset width=\"100%\" height=\"100%\" justifyContent=\"center\" hasRadius>\n      {asset.ext?.includes('pdf') ? (\n        <FilePdf aria-label={asset.alternativeText || asset.name} width=\"24px\" height=\"32px\" />\n      ) : (\n        <File aria-label={asset.alternativeText || asset.name} width=\"24px\" height=\"32px\" />\n      )}\n    </DocAsset>\n  );\n};\n", "import { CarouselActions, IconButton } from '@strapi/design-system';\nimport { Pencil, Plus, Trash } from '@strapi/icons';\nimport { useIntl } from 'react-intl';\n\nimport { getTrad, prefixFileUrlWithBackendUrl } from '../../../utils';\nimport { CopyLinkButton } from '../../CopyLinkButton/CopyLinkButton';\n\nimport type { File } from '../../../../../shared/contracts/files';\n\ninterface CarouselAssetActionsProps {\n  asset: File;\n  onDeleteAsset?: (asset: File) => void;\n  onAddAsset?: (asset: File) => void;\n  onEditAsset?: () => void;\n}\n\nexport const CarouselAssetActions = ({\n  asset,\n  onDeleteAsset,\n  onAddAsset,\n  onEditAsset,\n}: CarouselAssetActionsProps) => {\n  const { formatMessage } = useIntl();\n\n  return (\n    <CarouselActions>\n      {onAddAsset && (\n        <IconButton\n          label={formatMessage({\n            id: getTrad('control-card.add'),\n            defaultMessage: 'Add',\n          })}\n          onClick={() => onAddAsset(asset)}\n        >\n          <Plus />\n        </IconButton>\n      )}\n\n      <CopyLinkButton url={prefixFileUrlWithBackendUrl(asset.url)!} />\n\n      {onDeleteAsset && (\n        <IconButton\n          label={formatMessage({\n            id: 'global.delete',\n            defaultMessage: 'Delete',\n          })}\n          onClick={() => onDeleteAsset(asset)}\n        >\n          <Trash />\n        </IconButton>\n      )}\n\n      {onEditAsset && (\n        <IconButton\n          label={formatMessage({\n            id: getTrad('control-card.edit'),\n            defaultMessage: 'edit',\n          })}\n          onClick={onEditAsset}\n        >\n          <Pencil />\n        </IconButton>\n      )}\n    </CarouselActions>\n  );\n};\n", "import * as React from 'react';\n\nimport { Flex, Typography } from '@strapi/design-system';\nimport { PlusCircle as PicturePlus } from '@strapi/icons';\nimport { useIntl } from 'react-intl';\nimport { styled } from 'styled-components';\n\nimport { AssetSource } from '../../../constants';\nimport { getTrad, rawFileToAsset } from '../../../utils';\n\nimport type { File } from '../../../../../shared/contracts/files';\n\nconst TextAlignTypography = styled(Typography)`\n  align-items: center;\n`;\n\ntype FileWithoutIdHash = Omit<File, 'id' | 'hash'>;\n\ninterface EmptyStateAssetProps {\n  disabled?: boolean;\n  onClick: (asset?: File, event?: React.MouseEventHandler<HTMLButtonElement>) => void;\n  onDropAsset: (assets: FileWithoutIdHash[]) => void;\n}\n\nexport const EmptyStateAsset = ({\n  disabled = false,\n  onClick,\n  onDropAsset,\n}: EmptyStateAssetProps) => {\n  const { formatMessage } = useIntl();\n  const [dragOver, setDragOver] = React.useState(false);\n\n  const handleDragEnter = (e: React.DragEvent<HTMLButtonElement>) => {\n    e.preventDefault();\n    setDragOver(true);\n  };\n\n  const handleDragLeave = (e: React.DragEvent<HTMLButtonElement>) => {\n    if (!e.currentTarget.contains(e.relatedTarget as Node)) {\n      setDragOver(false);\n    }\n  };\n\n  const handleDragOver = (e: React.DragEvent<HTMLButtonElement>) => {\n    e.preventDefault();\n  };\n\n  const handleDrop = (e: React.DragEvent<HTMLButtonElement>) => {\n    e.preventDefault();\n\n    if (e?.dataTransfer?.files) {\n      const files = e.dataTransfer.files;\n      const assets: FileWithoutIdHash[] = [];\n\n      for (let i = 0; i < files.length; i++) {\n        const file = files.item(i);\n        if (file) {\n          const asset = rawFileToAsset(file, AssetSource.Computer);\n\n          assets.push(asset);\n        }\n      }\n\n      onDropAsset(assets);\n    }\n\n    setDragOver(false);\n  };\n\n  return (\n    <Flex\n      borderStyle={dragOver ? 'dashed' : undefined}\n      borderWidth={dragOver ? '1px' : undefined}\n      borderColor={dragOver ? 'primary600' : undefined}\n      direction=\"column\"\n      justifyContent=\"center\"\n      alignItems=\"center\"\n      height=\"100%\"\n      width=\"100%\"\n      tag=\"button\"\n      type=\"button\"\n      disabled={disabled}\n      onClick={onClick as unknown as React.MouseEventHandler<HTMLButtonElement>}\n      onDragEnter={handleDragEnter}\n      onDragLeave={handleDragLeave}\n      onDragOver={handleDragOver}\n      onDrop={handleDrop}\n      gap={3}\n      style={{ cursor: disabled ? 'not-allowed' : 'pointer' }}\n    >\n      <PicturePlus\n        aria-hidden\n        width=\"3.2rem\"\n        height=\"3.2rem\"\n        fill={disabled ? 'neutral400' : 'primary600'}\n      />\n      <TextAlignTypography\n        variant=\"pi\"\n        fontWeight=\"bold\"\n        textColor=\"neutral600\"\n        style={{ textAlign: 'center' }}\n        tag=\"span\"\n      >\n        {formatMessage({\n          id: getTrad('mediaLibraryInput.placeholder'),\n          defaultMessage: 'Click to add an asset or drag and drop one in this area',\n        })}\n      </TextAlignTypography>\n    </Flex>\n  );\n};\n", "import * as React from 'react';\n\nimport { CarouselInput, CarouselSlide } from '@strapi/design-system';\nimport { useIntl } from 'react-intl';\n\nimport { getTrad } from '../../../utils/getTrad';\nimport { EditAssetDialog } from '../../EditAssetDialog/EditAssetContent';\n\nimport { CarouselAsset } from './CarouselAsset';\nimport { CarouselAssetActions } from './CarouselAssetActions';\nimport { EmptyStateAsset } from './EmptyStateAsset';\n\nimport type { File as FileAsset, RawFile } from '../../../../../shared/contracts/files';\n\nexport type FileWithoutIdHash = Omit<FileAsset, 'id' | 'hash'>;\n\ninterface Asset extends Omit<FileAsset, 'folder'> {\n  isLocal?: boolean;\n  rawFile?: RawFile;\n  folder?: FileAsset['folder'] & { id: number };\n}\n\nexport interface CarouselAssetsProps {\n  assets: FileAsset[];\n  disabled?: boolean;\n  error?: string;\n  hint?: string;\n  label: string;\n  labelAction?: React.ReactNode;\n  onAddAsset: (asset?: FileAsset, event?: React.MouseEventHandler<HTMLButtonElement>) => void;\n  onDeleteAsset: (asset: FileAsset) => void;\n  onDeleteAssetFromMediaLibrary: () => void;\n  onDropAsset?: (assets: FileWithoutIdHash[]) => void;\n  onEditAsset?: (asset: FileAsset) => void;\n  onNext: () => void;\n  onPrevious: () => void;\n  required?: boolean;\n  selectedAssetIndex: number;\n  trackedLocation?: string;\n}\n\nexport const CarouselAssets = React.forwardRef(\n  (\n    {\n      assets,\n      disabled = false,\n      error,\n      hint,\n      label,\n      labelAction,\n      onAddAsset,\n      onDeleteAsset,\n      onDeleteAssetFromMediaLibrary,\n      onDropAsset,\n      onEditAsset,\n      onNext,\n      onPrevious,\n      required = false,\n      selectedAssetIndex,\n      trackedLocation,\n    }: CarouselAssetsProps,\n    forwardedRef\n  ) => {\n    const { formatMessage } = useIntl();\n    const [isEditingAsset, setIsEditingAsset] = React.useState(false);\n\n    const currentAsset = assets[selectedAssetIndex];\n\n    return (\n      <>\n        <CarouselInput\n          ref={forwardedRef as React.Ref<HTMLDivElement>}\n          label={label}\n          labelAction={labelAction}\n          secondaryLabel={currentAsset?.name}\n          selectedSlide={selectedAssetIndex}\n          previousLabel={formatMessage({\n            id: getTrad('mediaLibraryInput.actions.previousSlide'),\n            defaultMessage: 'Previous slide',\n          })}\n          nextLabel={formatMessage({\n            id: getTrad('mediaLibraryInput.actions.nextSlide'),\n            defaultMessage: 'Next slide',\n          })}\n          onNext={onNext}\n          onPrevious={onPrevious}\n          hint={hint}\n          error={error}\n          required={required}\n          actions={\n            currentAsset ? (\n              <CarouselAssetActions\n                asset={currentAsset}\n                onDeleteAsset={disabled ? undefined : onDeleteAsset}\n                onAddAsset={disabled ? undefined : onAddAsset}\n                onEditAsset={onEditAsset ? () => setIsEditingAsset(true) : undefined}\n              />\n            ) : undefined\n          }\n        >\n          {assets.length === 0 ? (\n            <CarouselSlide\n              label={formatMessage(\n                {\n                  id: getTrad('mediaLibraryInput.slideCount'),\n                  defaultMessage: '{n} of {m} slides',\n                },\n                { n: 1, m: 1 }\n              )}\n            >\n              <EmptyStateAsset\n                disabled={disabled}\n                onClick={onAddAsset}\n                onDropAsset={onDropAsset!}\n              />\n            </CarouselSlide>\n          ) : (\n            assets.map((asset, index) => (\n              <CarouselSlide\n                key={asset.id}\n                label={formatMessage(\n                  {\n                    id: getTrad('mediaLibraryInput.slideCount'),\n                    defaultMessage: '{n} of {m} slides',\n                  },\n                  { n: index + 1, m: assets.length }\n                )}\n              >\n                <CarouselAsset asset={asset} />\n              </CarouselSlide>\n            ))\n          )}\n        </CarouselInput>\n        <EditAssetDialog\n          open={isEditingAsset}\n          onClose={(editedAsset) => {\n            setIsEditingAsset(false);\n\n            // The asset has been deleted\n            if (editedAsset === null) {\n              onDeleteAssetFromMediaLibrary();\n            }\n            if (editedAsset && typeof editedAsset !== 'boolean') {\n              onEditAsset?.(editedAsset);\n            }\n          }}\n          asset={currentAsset as Asset}\n          canUpdate\n          canCopyLink\n          canDownload\n          trackedLocation={trackedLocation}\n        />\n      </>\n    );\n  }\n);\n", "// TODO: find a better naming convention for the file that was an index file before\nimport * as React from 'react';\n\nimport { useField, useNotification } from '@strapi/admin/strapi-admin';\nimport { useIntl } from 'react-intl';\n\nimport { getTrad, getAllowedFiles, AllowedFiles } from '../../utils';\nimport { AssetDialog } from '../AssetDialog/AssetDialog';\nimport { EditFolderDialog } from '../EditFolderDialog/EditFolderDialog';\nimport { UploadAssetDialog, Asset } from '../UploadAssetDialog/UploadAssetDialog';\n\nimport { CarouselAssets, CarouselAssetsProps, FileWithoutIdHash } from './Carousel/CarouselAssets';\n\nimport type { File } from '../../../../shared/contracts/files';\ntype AllowedTypes = 'files' | 'images' | 'videos' | 'audios';\n\nconst STEPS = {\n  AssetSelect: 'SelectAsset',\n  AssetUpload: 'UploadAsset',\n  FolderCreate: 'FolderCreate',\n};\n\nexport interface MediaLibraryInputProps {\n  required?: boolean;\n  name: string;\n  labelAction?: React.ReactNode;\n  label?: string;\n  hint?: string;\n  disabled?: boolean;\n  attribute?: {\n    allowedTypes?: AllowedTypes[];\n    multiple?: boolean;\n  };\n}\n\nexport const MediaLibraryInput = React.forwardRef<CarouselAssetsProps, MediaLibraryInputProps>(\n  (\n    {\n      attribute: { allowedTypes = null, multiple = false } = {},\n      label,\n      hint,\n      disabled = false,\n      labelAction = undefined,\n      name,\n      required = false,\n    },\n    forwardedRef\n  ) => {\n    const { formatMessage } = useIntl();\n    const { onChange, value, error } = useField(name);\n    const [uploadedFiles, setUploadedFiles] = React.useState<Asset[] | File[]>([]);\n    const [step, setStep] = React.useState<string | undefined>(undefined);\n    const [selectedIndex, setSelectedIndex] = React.useState(0);\n    const [droppedAssets, setDroppedAssets] = React.useState<AllowedFiles[]>();\n    const [folderId, setFolderId] = React.useState<number | null>(null);\n    const { toggleNotification } = useNotification();\n\n    React.useEffect(() => {\n      // Clear the uploaded files on close\n      if (step === undefined) {\n        setUploadedFiles([]);\n      }\n    }, [step]);\n\n    let selectedAssets: File[] = [];\n\n    if (Array.isArray(value)) {\n      selectedAssets = value;\n    } else if (value) {\n      selectedAssets = [value];\n    }\n\n    const handleValidation = (nextSelectedAssets: File[]) => {\n      const value = multiple ? nextSelectedAssets : nextSelectedAssets[0];\n      onChange(name, value);\n      setStep(undefined);\n    };\n\n    const handleDeleteAssetFromMediaLibrary = () => {\n      let nextValue;\n\n      if (multiple) {\n        const nextSelectedAssets = selectedAssets.filter(\n          (_, assetIndex) => assetIndex !== selectedIndex\n        );\n        nextValue = nextSelectedAssets.length > 0 ? nextSelectedAssets : null;\n      } else {\n        nextValue = null;\n      }\n\n      const value = nextValue;\n      onChange(name, value);\n\n      setSelectedIndex(0);\n    };\n\n    const handleDeleteAsset = (asset: File) => {\n      let nextValue;\n\n      if (multiple) {\n        const nextSelectedAssets = selectedAssets.filter((prevAsset) => prevAsset.id !== asset.id);\n\n        nextValue = nextSelectedAssets.length > 0 ? nextSelectedAssets : null;\n      } else {\n        nextValue = null;\n      }\n\n      onChange(name, nextValue);\n\n      setSelectedIndex(0);\n    };\n\n    const handleAssetEdit = (asset: File) => {\n      const nextSelectedAssets = selectedAssets.map((prevAsset) =>\n        prevAsset.id === asset.id ? asset : prevAsset\n      );\n\n      onChange(name, multiple ? nextSelectedAssets : nextSelectedAssets[0]);\n    };\n\n    const validateAssetsTypes = (\n      assets: FileWithoutIdHash[] | Asset[],\n      callback: (assets?: AllowedFiles[], error?: string) => void\n    ) => {\n      const allowedAssets = getAllowedFiles(allowedTypes, assets as AllowedFiles[]);\n\n      if (allowedAssets.length > 0) {\n        callback(allowedAssets);\n      } else {\n        toggleNotification({\n          type: 'danger',\n          timeout: 4000,\n          message: formatMessage(\n            {\n              id: getTrad('input.notification.not-supported'),\n              defaultMessage: `You can't upload this type of file.`,\n            },\n            {\n              fileTypes: (allowedTypes ?? []).join(','),\n            }\n          ),\n        });\n      }\n    };\n\n    const handleAssetDrop = (assets: FileWithoutIdHash[]) => {\n      validateAssetsTypes(assets, (allowedAssets?: AllowedFiles[]) => {\n        setDroppedAssets(allowedAssets);\n        setStep(STEPS.AssetUpload);\n      });\n    };\n\n    if (multiple && selectedAssets.length > 0) {\n      label = `${label} (${selectedIndex + 1} / ${selectedAssets.length})`;\n    }\n\n    const handleNext = () => {\n      setSelectedIndex((current) => (current < selectedAssets.length - 1 ? current + 1 : 0));\n    };\n\n    const handlePrevious = () => {\n      setSelectedIndex((current) => (current > 0 ? current - 1 : selectedAssets.length - 1));\n    };\n\n    const handleFilesUploadSucceeded = (uploadedFiles: Asset[] | File[]) => {\n      setUploadedFiles((prev) => [...prev, ...uploadedFiles]);\n    };\n\n    let initiallySelectedAssets = selectedAssets;\n\n    if (uploadedFiles.length > 0) {\n      const allowedUploadedFiles = getAllowedFiles(allowedTypes, uploadedFiles as AllowedFiles[]);\n\n      initiallySelectedAssets = multiple\n        ? [...allowedUploadedFiles, ...selectedAssets]\n        : [allowedUploadedFiles[0]];\n    }\n\n    return (\n      <>\n        <CarouselAssets\n          ref={forwardedRef}\n          assets={selectedAssets}\n          disabled={disabled}\n          label={label!}\n          labelAction={labelAction}\n          onDeleteAsset={handleDeleteAsset}\n          onDeleteAssetFromMediaLibrary={handleDeleteAssetFromMediaLibrary}\n          onAddAsset={() => setStep(STEPS.AssetSelect)}\n          onDropAsset={handleAssetDrop}\n          onEditAsset={handleAssetEdit}\n          onNext={handleNext}\n          onPrevious={handlePrevious}\n          error={error}\n          hint={hint}\n          required={required}\n          selectedAssetIndex={selectedIndex}\n          trackedLocation=\"content-manager\"\n        />\n\n        {step === STEPS.AssetSelect && (\n          <AssetDialog\n            allowedTypes={allowedTypes as AllowedTypes[]}\n            initiallySelectedAssets={initiallySelectedAssets}\n            folderId={folderId}\n            onClose={() => {\n              setStep(undefined);\n              setFolderId(null);\n            }}\n            open={step === STEPS.AssetSelect}\n            onValidate={handleValidation}\n            multiple={multiple}\n            onAddAsset={() => setStep(STEPS.AssetUpload)}\n            onAddFolder={() => setStep(STEPS.FolderCreate)}\n            onChangeFolder={(folder) => setFolderId(folder)}\n            trackedLocation=\"content-manager\"\n          />\n        )}\n\n        {step === STEPS.AssetUpload && (\n          <UploadAssetDialog\n            open={step === STEPS.AssetUpload}\n            onClose={() => setStep(STEPS.AssetSelect)}\n            initialAssetsToAdd={droppedAssets as Asset[]}\n            addUploadedFiles={handleFilesUploadSucceeded}\n            trackedLocation=\"content-manager\"\n            folderId={folderId}\n            validateAssetsTypes={validateAssetsTypes}\n          />\n        )}\n\n        {step === STEPS.FolderCreate && (\n          <EditFolderDialog\n            open={step === STEPS.FolderCreate}\n            onClose={() => setStep(STEPS.AssetSelect)}\n            parentFolderId={folderId}\n          />\n        )}\n      </>\n    );\n  }\n);\n", "type Translations = {\n  [key: string]: string;\n};\n\nexport const prefixPluginTranslations = (trad: Translations, pluginId?: string) => {\n  if (!pluginId) {\n    throw new TypeError(\"pluginId can't be empty\");\n  }\n\n  return Object.keys(trad).reduce((acc: Translations, current: string) => {\n    acc[`${pluginId}.${current}`] = trad[current];\n\n    return acc;\n  }, {});\n};\n", "import { Images } from '@strapi/icons';\n\nimport pluginPkg from '../../package.json';\n\nimport { MediaLibraryDialog } from './components/MediaLibraryDialog/MediaLibraryDialog';\nimport { MediaLibraryInput } from './components/MediaLibraryInput/MediaLibraryInput';\nimport { PERMISSIONS } from './constants';\nimport { pluginId } from './pluginId';\nimport { getTrad, prefixPluginTranslations } from './utils';\n\nimport type { MediaLibraryDialogProps } from './components/MediaLibraryDialog/MediaLibraryDialog';\nimport type { MediaLibraryInputProps } from './components/MediaLibraryInput/MediaLibraryInput';\nimport type { StrapiApp } from '@strapi/admin/strapi-admin';\nimport type { Plugin } from '@strapi/types';\n\nconst name = pluginPkg.strapi.name;\n\nconst admin: Plugin.Config.AdminInput = {\n  register(app: StrapiApp) {\n    app.addMenuLink({\n      to: `plugins/${pluginId}`,\n      icon: Images,\n      intlLabel: {\n        id: `${pluginId}.plugin.name`,\n        defaultMessage: 'Media Library',\n      },\n      permissions: PERMISSIONS.main,\n      Component: () => import('./pages/App/App').then((mod) => ({ default: mod.Upload })),\n      position: 4,\n    });\n\n    app.addSettingsLink('global', {\n      id: 'media-library-settings',\n      to: 'media-library',\n      intlLabel: {\n        id: getTrad('plugin.name'),\n        defaultMessage: 'Media Library',\n      },\n      async Component() {\n        const { ProtectedSettingsPage } = await import('./pages/SettingsPage/SettingsPage');\n        return { default: ProtectedSettingsPage };\n      },\n      permissions: PERMISSIONS.settings,\n    });\n\n    app.addFields({\n      type: 'media',\n      Component: MediaLibraryInput as React.FC<Partial<MediaLibraryInputProps>>,\n    });\n    app.addComponents([\n      {\n        name: 'media-library',\n        Component: MediaLibraryDialog as React.FC<Partial<MediaLibraryDialogProps>>,\n      },\n    ]);\n\n    app.registerPlugin({\n      id: pluginId,\n      name,\n    });\n  },\n  async registerTrads({ locales }: { locales: string[] }) {\n    const importedTrads = await Promise.all(\n      locales.map((locale) => {\n        return import(`./translations/${locale}.json`)\n          .then(({ default: data }) => {\n            return {\n              data: prefixPluginTranslations(data, pluginId),\n              locale,\n            };\n          })\n          .catch(() => {\n            return {\n              data: {},\n              locale,\n            };\n          });\n      })\n    );\n\n    return Promise.resolve(importedTrads);\n  },\n};\n\n// eslint-disable-next-line import/no-default-export\nexport default admin;\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASO,IAAMA,sBAAsB,CAACC,iBAAAA;AAClC,QAAM,EAAEC,WAAU,IAAKC,YAAAA;AACvB,QAAM,EACJC,QAAQ,EAAEC,MAAMD,OAAM,EAAE,IACtBE,UAAAA;AAEJ,QAAM,CAACC,aAAaC,cAAAA,IAAwBC,eAAgB;IAC1DC,MAAM;IACNC,MAAM;IACNC,UAAU;IACVC,SAAS;MACPC,MAAM,CAAA;IACR;IACA,GAAGb;EACL,CAAA;AAEAc,EAAMC,gBAAU,MAAA;AACd,QAAIZ,UAAU,UAAUA,UAAU,cAAcA,QAAQ;AACtDI,qBAAe,CAACS,eAAe;QAC7B,GAAGA;QACHN,MAAMP,OAAOO;QACbC,UAAUR,OAAOQ;QACnB;IACF;KACC;IAACR;EAAO,CAAA;AAEX,QAAMc,sBAAsB,CAACC,gBAAAA;AAC3B,QAAIA,aAAa;AACfjB,iBAAW,iCAAiC;QAC1CkB,UAAU;QACVC,QAAQC,OAAOC,KAAKJ,YAAYA,YAAYK,SAAS,CAAA,CAAE,EAAE,CAAE;MAC7D,CAAA;AACAhB,qBAAe,CAACiB,UAAU;QAAE,GAAGA;QAAMf,MAAM;QAAGG,SAAS;UAAEC,MAAMK;QAAY;QAAE;IAC/E;EACF;AAEA,QAAMO,uBAAuB,CAACd,aAAAA;AAC5BJ,mBAAe,CAACiB,UAAU;MACxB,GAAGA;MACHb,UAAU,OAAOA,aAAa,WAAWe,SAASf,UAAU,EAAMA,IAAAA;MAClEF,MAAM;MACR;EACF;AAEA,QAAMkB,kBAAkB,CAAClB,SAAAA;AACvBF,mBAAe,CAACiB,UAAU;MAAE,GAAGA;MAAMf;MAAK;EAC5C;AAEA,QAAMmB,mBAAmB,CAAClB,SAAAA;AACxB,QAAIA,MAAM;AACRT,iBAAW,+BAA+B;QACxCkB,UAAU;QACVT;MACF,CAAA;AACAH,qBAAe,CAACiB,UAAU;QAAE,GAAGA;QAAMd;QAAK;IAC5C;EACF;AAEA,QAAMmB,qBAAqB,CAACC,OAAAA;AAC1B,QAAIA,IAAI;AACNvB,qBAAe,CAACiB,UAAU;QAAE,GAAGA;QAAMM;QAAIrB,MAAM;QAAE;WAC5C;AACL,YAAMsB,WAAkB;QAAEtB,MAAM;MAAE;AAElCY,aAAOC,KAAKhB,WAAa0B,EAAAA,QAAQ,CAACC,QAAAA;AAChC,YAAI,CAAC;UAAC;UAAQ;UAAMC,SAASD,GAAM,GAAA;AAChCF,mBAAyDE,GAAI,IAAG,YAE/DA,GAAI;QACR;MACF,CAAA;AAEA1B,qBAAewB,QAAAA;IACjB;EACF;AAEA,QAAMI,qBAAqB,CAACC,QAAyBC,eAAAA;AACnD9B,mBAAe,CAACiB,UAAU;MAAE,GAAGA;MAAMY,QAAQA,UAAU;MAAMC;MAAW;EAC1E;AAEA,SAAO;IACL;MAAE/B;MAAagC,cAAUC,qBAAUjC,aAAa;QAAEkC,QAAQ;MAAM,CAAA;IAAG;IACnE;MACEC,iBAAiBxB;MACjByB,gBAAgBP;MAChBQ,cAAchB;MACdiB,kBAAkBnB;MAClBoB,cAAcjB;MACdkB,gBAAgBjB;IAClB;EACD;AACH;;;ACpGO,IAAMkB,kBAAkB,CAACC,UAAAA;AAC9B,MAAI,CAACA,OAAO;AACV,WAAO,CAAA;EACT;AAEA,SAAOA,MAAMC,IAAI,CAACC,SAASA,KAAKC,UAAU,GAAGD,KAAKE,SAAS,CAAA,CAAA;AAC7D;;;ACWO,IAAMC,kBAAkB,CAACC,aAA8BC,UAAAA;AAC5D,MAAI,CAACD,aAAa;AAChB,WAAOC;EACT;AAEA,QAAMC,gBAAgBC,gBAAgBH,WAAAA;AAEtC,QAAMI,eAAeH,MAAMI,OAAO,CAACC,SAAAA;;AACjC,UAAMC,YAAWD,kCAAME,SAANF,mBAAYG,MAAM,KAAK;AAExC,QAAI,CAACF,UAAU;AACb,aAAO;IACT;AAEA,QAAIL,cAAcQ,SAAS,MAAA,KAAW,CAAC;MAAC;MAAS;MAAS;MAASA,SAASH,QAAW,GAAA;AACrF,aAAO;IACT;AAEA,WAAOL,cAAcQ,SAASH,QAAAA;EAChC,CAAA;AAEA,SAAOH;AACT;;;;;;ACvCA,IAAMO,OAAO,CAAaC,OAAYC,UAAkBC,aAAAA;AACtD,MAAIA,YAAYF,MAAMG,QAAQ;AAC5BD,eAAWF,MAAMG,SAAS;EAC5B;AACAH,QAAMI,OAAOF,UAAU,GAAGF,MAAMI,OAAOH,UAAU,CAAE,EAAC,CAAE,CAAA;AAEtD,SAAOD;AACT;AAEaK,IAAAA,cAAc,CAAaL,OAAYM,OAAeC,WAAAA;AACjE,QAAML,WAAWI,QAAQC;AAEzB,SAAOR,KAAKC,OAAOM,OAAOJ,QAAAA;AAC5B;;;;;;ACUO,IAAMM,sBAAsB,CAACC,WAAAA;;AAClC,QAAMC,OAAyB;IAC7B;MACEC,IAAI;MACJC,OAAO;QAAED,IAAIE,QAAQ,aAAA;QAAgBC,gBAAgB;MAAgB;IACvE;EACD;AAED,OAAIL,sCAAQM,WAARN,mBAAgBM,QAAQ;AAC1BL,SAAKM,KAAK,CAAA,CAAE;EACd;AAEA,MAAIP,iCAAQM,QAAQ;AAClBL,SAAKM,KAAK;MACRL,IAAIF,OAAOM,OAAOJ;MAClBC,OAAOH,OAAOM,OAAOE;MACrBC,MAAMT,OAAOM,OAAOG;IACtB,CAAA;EACF;AAEA,MAAIT,QAAQ;AACVC,SAAKM,KAAK;MACRL,IAAIF,OAAOE;MACXC,OAAOH,OAAOQ;MACdC,MAAMT,OAAOS;IACf,CAAA;EACF;AAEA,SAAOR;AACT;;;;;;;;;ICRaS,UAAU,CAAC,EAAEC,gBAAgBC,gBAAe,MAAgB;AACvE,QAAM,CAACC,MAAMC,OAAAA,IAAiBC,gBAAS,KAAA;AACvC,QAAM,EAAEC,cAAa,IAAKC,QAAAA;AAE1B,aACEC,yBAACC,QAAQC,MAAI;IAACP;IAAYQ,cAAcP;;UACtCQ,wBAACH,QAAQI,SAAO;QACd,cAAAD,wBAACE,QAAAA;UAAOC,SAAQ;UAAWC,eAAWJ,wBAACK,eAAAA,CAAAA,CAAAA;UAAWC,MAAK;oBACpDZ,cAAc;YAAEa,IAAI;YAAqBC,gBAAgB;UAAU,CAAA;;;UAGxER,wBAACS,eAAAA;QACCC,UAAU,MAAMlB,QAAQ,CAACmB,SAAS,CAACA,IAAAA;QACnCC;QACAC,SAASxB;QACTyB,UAAUxB;;MAGXD,sBACCW,wBAACe,YAAAA;QACC1B;QACA2B,eAAeJ;QACfK,gBAAgB3B;;;;AAK1B;;;;IC/Da4B,WAAW,CAAC,EAAEC,kBAAkBC,SAAQ,MAAiB;AACpE,QAAM,EAAEC,cAAa,IAAKC,QAAAA;AAE1B,QAAMC,eAAe,CAACC,UAAAA;AACpBL,qBAAiBM,OAAOD,KAAAA,CAAAA;EAC1B;AAEA,aACEE,0BAACC,MAAAA;;UACCD,0BAACE,cAAAA;QACCC,MAAK;QACLC,cAAYT,cAAc;UACxBU,IAAI;UACJC,gBAAgB;QAClB,CAAA;QACAC,UAAUV;QACVC,OAAOJ,SAASc,SAAQ;;cAExBC,yBAACC,oBAAAA;YAAmBZ,OAAM;YAAK,UAAA;;cAC/BW,yBAACC,oBAAAA;YAAmBZ,OAAM;YAAK,UAAA;;cAC/BW,yBAACC,oBAAAA;YAAmBZ,OAAM;YAAK,UAAA;;cAC/BW,yBAACC,oBAAAA;YAAmBZ,OAAM;YAAM,UAAA;;;;UAElCW,yBAACE,KAAAA;QAAIC,aAAa;QAChB,cAAAH,yBAACI,YAAAA;UAAWC,WAAU;UAAaC,KAAI;UAAQC,SAAQ;oBACpDrB,cAAc;YACbU,IAAI;YACJC,gBAAgB;UAClB,CAAA;;;;;AAKV;;;;;;;;ACrCA,IAAMW,oBAA0BC,qBAAc;EAAEC,YAAY;EAAGC,WAAW;AAAE,CAAA;IAC/DC,gBAAgB,MAAYC,kBAAWL,iBAAmB;AAS1DM,IAAAA,aAAa,CAAC,EACzBC,UACAL,YACAC,WACAK,QAAQ,aAAY,MACJ;AAChB,QAAMC,kBAAwBC,eAAQ,OAAO;IAAER;IAAYC;EAAU,IAAI;IAACD;IAAYC;EAAU,CAAA;AAEhG,aACEQ,yBAACX,kBAAkBY,UAAQ;IAACC,OAAOJ;IACjC,cAAAE,yBAACG,KAAAA;MAAIC,KAAI;MAAMC,cAAYR;MACzB,cAAAG,yBAACM,MAAAA;QAAKF,KAAI;QAAKG,KAAK;QACjBX;;;;AAKX;;;ACVA,IAAMY,iBAAiBC,GAAOC,UAAAA;;;AAI9B,IAAMC,oBAAoBC;aACb,CAAC,EAAEC,MAAK,MAAOA,MAAMC,OAAO,CAAA,CAAE;mBACxB,CAAC,EAAED,MAAK,MAAOA,MAAME,YAAY;gBACpC,CAAC,EAAEC,SAASH,MAAK,MAAQG,UAAUH,MAAMI,QAAQC,eAAeC,MAAW;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BA8BjE,CAACC,UAAUA,MAAMP,MAAMQ,OAAOC,UAAU;;;;AAKlE,IAAMC,oBAAoBd,GAAOe;IAC7Bb,iBAAkB;;AAGtB,IAAMc,iBAAiBhB,GAAOiB;IAC1Bf,iBAAkB;;AAGtBY,kBAAkBI,eAAe;EAAEC,MAAM;AAAS;AAElD,IAAMC,kBAAkBpB,GAAOc,iBAAAA;WACpB,CAAC,EAAEV,OAAOG,QAAO,MAAQA,UAAUH,MAAMQ,OAAOS,aAAajB,MAAMQ,OAAOU,UAAU;gBAC/E,CAAC,EAAElB,OAAOG,QAAO,MAAQA,UAAUH,MAAMQ,OAAOW,WAAWb,MAAW;;;kBAGpE,CAAC,EAAEN,MAAK,MAAOA,MAAMI,QAAQC,YAAY;;;AAI3D,IAAMe,oBAAoBxB,GAAOc,iBAAAA;;;YAGrB,CAACW,MAAOA,EAAE,eAAgB,IAAGA,EAAErB,MAAMQ,OAAOc,aAAaD,EAAErB,MAAMQ,OAAOe,UAAU;;;;;;cAMhF,CAACF,MAAOA,EAAE,eAAgB,IAAGA,EAAErB,MAAMQ,OAAOc,aAAaD,EAAErB,MAAMQ,OAAOgB,UAAU;;;;IAI5F,CAACH,MACDA,EAAE,eAAA,IACE;;QAGAf,MAAU;;AAGlB,IAAMmB,cAAc7B,GAAOgB,cAAAA;WAChB,CAAC,EAAEZ,MAAK,MAAOA,MAAMQ,OAAOU,UAAU;;AAWjD,IAAMQ,eAAe,CAAC,EAAEC,UAAU,GAAGpB,MAA4B,MAAA;AAC/D,QAAM,EAAEqB,WAAU,IAAKC,cAAAA;AAEvB,QAAMC,WAAWF,eAAe;AAEhC,aACEG,yBAACC,MAAAA;IACC,cAAAC,0BAACb,mBAAAA;MAAkBc,iBAAeJ;MAAUK,UAAUL,WAAW,KAAKxB;MAAY,GAAGC;;YACnFwB,yBAACK,gBAAAA;UAAgBT;;YACjBI,yBAACM,eAAAA;UAAYC,eAAW;;;;;AAIhC;AAEA,IAAMC,WAAW,CAAC,EAAEZ,UAAU,GAAGpB,MAA4B,MAAA;AAC3D,QAAM,EAAEqB,YAAYY,UAAS,IAAKX,cAAAA;AAElC,QAAMC,WAAWF,eAAeY;AAEhC,aACET,yBAACC,MAAAA;IACC,cAAAC,0BAACb,mBAAAA;MAAkBc,iBAAeJ;MAAUK,UAAUL,WAAW,KAAKxB;MAAY,GAAGC;;YACnFwB,yBAACK,gBAAAA;UAAgBT;;YACjBI,yBAACU,eAAAA;UAAaH,eAAW;;;;;AAIjC;AAEA,IAAMI,WAAW,CAAC,EAAEC,QAAQhB,UAAU,GAAGpB,MAAsB,MAAA;AAC7D,QAAM,EAAEqB,WAAU,IAAKC,cAAAA;AAEvB,QAAMe,WAAWhB,eAAee;AAEhC,aACEZ,yBAACC,MAAAA;IACC,cAAAC,0BAACjB,iBAAAA;MAAiB,GAAGT;MAAOJ,SAASyC;;YACnCb,yBAACK,gBAAAA;UAAgBT;;YACjBI,yBAACpC,gBAAAA;UAAe2C,eAAW;UAACO,SAAQ;UAAKC,YAAYF,WAAW,SAAS;UACtED,UAAAA;;;;;AAKX;AAMA,IAAMI,OAAO,CAAC,EAAEpB,UAAU,GAAGpB,MAAAA,UAC3BwB,yBAACC,MAAAA;EACC,cAAAC,0BAACR,aAAAA;IAAa,GAAGlB;IAAOyC,IAAG;;UACzBjB,yBAACK,gBAAAA;QAAgBT;;UACjBI,yBAACpC,gBAAAA;QAAe2C,eAAW;QAACW,OAAK;QAAC,UAAA;;;;;AAe3BC,IAAAA,mBAAmB,CAAC,EAC/BtB,YACAuB,cACAC,YAAY,EAAEZ,UAAS,EAAE,MACH;AACtB,QAAM,EAAEa,cAAa,IAAKC,QAAAA;AAE1B,QAAMC,qBAAqB3B,aAAa;AACxC,QAAM4B,iBAAiB5B,aAAa;AAEpC,QAAM6B,aAAa;QACjB1B,yBAACW,UAAAA;MAECC,QAAQ;MACRe,SAAS,MAAA;AACPP,qBAAa,CAAA;MACf;gBAECE,cACC;QAAEM,IAAI;QAA+BC,gBAAgB;SACrD;QAAEC,MAAM;MAAE,CAAA;IARP,GAAA,CAAA;EAWR;AAED,MAAIrB,aAAa,GAAG;AAClB,UAAMsB,QAAQC,MAAMC,KAAK;MAAEC,QAAQzB;KAChC0B,EAAAA,IAAI,CAACC,GAAGC,MAAMA,IAAI,CAAA,EAClBF,IAAI,CAACvB,WAAAA;AACJ,iBACEZ,yBAACW,UAAAA;QAAsBC;QAAgBe,SAAS,MAAMP,aAAaR,MAAAA;kBAChEU,cACC;UAAEM,IAAI;UAA+BC,gBAAgB;WACrD;UAAEC,MAAMlB;QAAO,CAAA;MAHJA,GAAAA,MAAAA;IAOnB,CAAA;AAEF,eACEV,0BAACoC,YAAAA;MAAWzC;MAAwBY;;YAClCT,yBAACL,cAAAA;UAAagC,SAAS,MAAMP,aAAaI,kBAAAA;oBACvCF,cAAc;YACbM,IAAI;YACJC,gBAAgB;UAClB,CAAA;;QAEDE;YACD/B,yBAACQ,UAAAA;UAASmB,SAAS,MAAMP,aAAaK,cAAAA;oBACnCH,cAAc;YACbM,IAAI;YACJC,gBAAgB;UAClB,CAAA;;;;EAIR;AAEA,MAAIU,qBAA+B,CAAA;AACnC,QAAMC,YAA2B,CAAA;AACjC,MAAIC,oBAA8B,CAAA;AAClC,QAAMC,cAA6B,CAAA;AAEnC,MAAIjC,YAAY,GAAG;AACjB+B,cAAUG,SACR3C,yBAACW,UAAAA;MAAyBC,QAAQH;MAAWkB,SAAS,MAAMP,aAAaX,SAAAA;gBACtEa,cACC;QAAEM,IAAI;QAA+BC,gBAAgB;SACrD;QAAEC,MAAMrB;MAAU,CAAA;IAHPA,GAAAA,SAAAA,CAAAA;EAOnB;AAEA,MAAIZ,eAAe,KAAKY,aAAa,GAAG;AACtC8B,yBAAqB;MAAC;IAAE;EAC1B;AAEA,MAAI1C,eAAe,KAAKY,aAAa,GAAG;AACtC,QAAIA,cAAc,GAAG;AACnB8B,2BAAqB;QAAC;QAAG;QAAG;MAAE;eACrB9B,cAAc,GAAG;AAC1B8B,2BAAqB;QAAC;MAAE;WACnB;AACLA,2BAAqB;QAAC;QAAG;MAAE;IAC7B;EACF;AAEA,MAAI1C,eAAe,KAAKY,aAAa,GAAG;AACtC8B,yBAAqB;MAAC;IAAE;EAC1B;AAEA,MAAI1C,eAAeY,aAAaA,aAAa,GAAG;AAC9CgC,wBAAoB;MAAChC,YAAY;IAAE;EACrC;AAEA,MAAIZ,eAAeY,YAAY,KAAKA,YAAY,GAAG;AACjDgC,wBAAoB;MAAC5C,aAAa;MAAGA;MAAYA,aAAa;IAAE;EAClE;AAEA,MAAIA,eAAeY,YAAY,KAAKA,YAAY,KAAKZ,aAAa,GAAG;AACnE4C,wBAAoB;MAAC5C,aAAa;MAAGA,aAAa;MAAGA;MAAYA,aAAa;IAAE;EAClF;AAEA,MAAIA,eAAeY,YAAY,KAAKA,YAAY,GAAG;AACjDgC,wBAAoB;MAAC5C;MAAYA,aAAa;IAAE;EAClD;AAEA4C,oBAAkBG,QAAQ,CAAChC,WAAAA;AACzB4B,cAAUK,YACR3C,0BAACS,UAAAA;MAAsBC;MAAgBe,SAAS,MAAMP,aAAaR,MAAAA;;QAAS;QAC9DA;;IADCA,GAAAA,MAAAA,CAAAA;EAInB,CAAA;AAEA2B,qBAAmBK,QAAQ,CAAChC,WAAAA;AAC1Bc,eAAWiB,SACT3C,yBAACW,UAAAA;MAAsBC;MAAgBe,SAAS,MAAMP,aAAaR,MAAAA;gBAChEU,cACC;QAAEM,IAAI;QAA+BC,gBAAgB;SACrD;QAAEC,MAAMlB;MAAO,CAAA;IAHJA,GAAAA,MAAAA,CAAAA;EAOnB,CAAA;AAEA,MACE,CAAC;IAAC;IAAG;EAAE,EAACkC,SAASjD,UACjBA,KAAAA,cAAcY,YAAY,KAC1BiB,WAAWQ,SAASM,UAAUN,SAAS,GACvC;AACA,UAAMa,sBAAsB;MAAClD,aAAa;MAAGA;MAAYA,aAAa;IAAE;AAExEkD,wBAAoBH,QAAQ,CAAChC,WAAAA;AAC3B8B,kBAAYC,SACV3C,yBAACW,UAAAA;QAAsBC;QAAgBe,SAAS,MAAMP,aAAaR,MAAAA;kBAChEU,cACC;UAAEM,IAAI;UAA+BC,gBAAgB;WACrD;UAAEC,MAAMlB;QAAO,CAAA;MAHJA,GAAAA,MAAAA,CAAAA;IAOnB,CAAA;EACF;AAEA,QAAMoC,+BACJvC,YAAY,KAAMA,cAAc,MAAMZ,eAAe,KAAKA,eAAe;AAC3E,QAAMoD,uBAAuBP,YAAYR,SAAS,KAAKrC,aAAa,KAAKY,YAAY;AAErF,QAAMyC,wBAAwBD,uBAC1BxC,YAAYZ,aAAa,IACzBY,YAAYiB,WAAWQ,SAASM,UAAUN;AAC9C,QAAMiB,kBAAkBF,uBACpBxC,YAAYiB,WAAWQ,SAASM,UAAUN,SAC1CzB,YAAYZ,aAAa;AAE7B,aACEK,0BAACoC,YAAAA;IAAWzC;IAAwBY;;UAClCT,yBAACL,cAAAA;QAAagC,SAAS,MAAMP,aAAaI,kBAAAA;kBACvCF,cAAc;UACbM,IAAI;UACJC,gBAAgB;QAClB,CAAA;;MAEDH;MACAuB,4BACCjD,yBAACgB,MAAAA;kBACEM,cACC;UACEM,IAAI;UACJC,gBAAgB;WAElB;UAAEjB,QAAQsC;QAAsB,CAAA;;MAIrCR;MACAM,oCACChD,yBAACgB,MAAAA;kBACEM,cACC;UACEM,IAAI;UACJC,gBAAgB;WAElB;UAAEjB,QAAQuC;QAAgB,CAAA;;MAI/BX;UACDxC,yBAACQ,UAAAA;QAASmB,SAAS,MAAMP,aAAaK,cAAAA;kBACnCH,cAAc;UACbM,IAAI;UACJC,gBAAgB;QAClB,CAAA;;;;AAIR;;;;;;AC9WO,IAAMuB,cAAc,CAAC,EAAEC,gBAAgBC,aAAa,KAAI,MAAoB;AACjF,QAAM,EAAEC,cAAa,IAAKC,QAAAA;AAC1B,QAAM,EAAEC,WAAU,IAAKC,YAAAA;AACvB,QAAM,CAACC,QAAQC,SAAU,IAASC,gBAAS,CAAC,CAACP,UAAAA;AAC7C,QAAM,CAACQ,OAAOC,QAAAA,IAAkBF,gBAASP,cAAc,EAAA;AACvD,QAAMU,aAAmBC,cAAuB,IAAA;AAEhDC,EAAMC,uBAAgB,MAAA;AACpB,QAAIR,QAAQ;AACVS,iBAAW,MAAA;;AACTJ,+BAAWK,YAAXL,mBAAoBM,cAAc,aAAlCN,mBAA4CO;SAC3C,CAAA;IACL;KACC;IAACZ;EAAO,CAAA;AAEX,QAAMa,eAAe,MAAA;AACnBZ,cAAU,CAACa,SAAS,CAACA,IAAAA;EACvB;AAEA,QAAMC,cAAc,MAAA;AAClBF,iBAAAA;AACAnB,mBAAe,IAAA;EACjB;AAEA,QAAMsB,eAAe,CAACC,MAAAA;AACpBA,MAAEC,eAAc;AAChBD,MAAEE,gBAAe;AAEjBrB,eAAW,iCAAiC;MAAEsB,UAAU;IAAkB,CAAA;AAC1E1B,mBAAeS,KAAAA;EACjB;AAEA,MAAIH,QAAQ;AACV,eACEqB,yBAACC,OAAAA;MAAIC,KAAKlB;MACR,cAAAgB,yBAACG,YAAAA;QAAWC,UAAUT;QACpB,cAAAK,yBAACK,WAAAA;UACCC,MAAK;UACLC,SAASb;UACTc,UAAU,CAACZ,MAAMb,SAASa,EAAEa,OAAO3B,KAAK;UACxC4B,YAAYnC,cAAc;YACxBoC,IAAIC,QAAQ,oBAAA;YACZC,gBAAgB;UAClB,CAAA;UACAC,cAAW;UACXC,MAAK;UACLjC;UACAkC,aAAazC,cAAc;YACzBoC,IAAIC,QAAQ,oBAAA;YACZC,gBAAgB;UAClB,CAAA;oBAECtC,cAAc;YAAEoC,IAAIC,QAAQ,cAAA;YAAiBC,gBAAgB;UAAsB,CAAA;;;;EAK9F;AAEA,aACEb,yBAACiB,YAAAA;IAAWC,OAAM;IAASC,SAAS3B;IAClC,cAAAQ,yBAACoB,cAAAA,CAAAA,CAAAA;;AAGP;;;ACjFaC,IAAAA,eAAe,CAACC,cAAwBC,OAAO,OAAE;AAC5D,MAAI,CAACA,KAAM,QAAO;AAElB,QAAMC,WAAWD,KAAKE,MAAM,GAAA,EAAK,CAAE;AAEnC,SACEH,aAAaI,SAASF,QAAAA,KACrBF,aAAaI,SAAS,MAAA,KAAW,CAAC;IAAC;IAAS;IAAS;EAAQ,EAACA,SAASF,QAAAA;AAE5E;;;ACsCA,IAAMG,qBAAqBC,GAAOC,UAAAA;;;AAIlC,IAAMC,kBAAkBF,GAAOG,GAAAA;;;cAGjB,CAAC,EAAEC,MAAK,MAAOA,MAAMC,OAAOC,UAAU;;;;AA2E7C,IAAMC,aAAa,CAAC,EACzBC,eAAe,CAAA,GACfC,QAAQC,WACRC,WACAC,SACAC,UAAU,CAAA,GACVC,WAAW,OACXC,YACAC,iBACAC,cACAC,kBACAC,gBACAC,cACAC,gBACAC,aACAC,cACAC,kBACAC,eACAC,YACAC,aACAC,eAAc,MACE;;AAChB,QAAM,EAAEC,cAAa,IAAKC,QAAAA;AAC1B,QAAM,CAACC,MAAMC,OAAQ,IAAGC,mBAAmBC,iBAAiBC,WAAWC,YAAYC,IAAI;AACvF,QAAMC,aAAaP,SAASK,YAAYC;AAExC,QAAM,EAAEE,MAAMC,eAAeC,WAAWC,uBAAsB,IAAKC,UACjEhB,2CAAaiB,QACb;IACEC,SAASjC,WAAW,CAAC,EAACe,2CAAaiB;EACrC,CAAA;AAGF,QAAME,gBAAgBC,gBAAgBvC,YAAAA;AACtC,QAAMC,SAASC,UAAUsC,IAAI,CAACC,WAAW;IACvC,GAAGA;IACHC,cAAcA,aAAaJ,eAAeG,+BAAOE,IAAAA;IACjDC,MAAM;IACR;AAEA,QAAMC,cAAc,CAACX,yBACjBY,oBAAoBd,aACpBe,IAAAA;AAEJ,QAAMC,kBAAkBC,gBAAgBjD,cAAcC,MAAAA;AACtD,QAAMiD,sBACJF,gBAAgBG,SAAS,KACzB/B,eAAe+B,SAAS,KACxBH,gBAAgBI,MACd,CAACX,UAAUrB,eAAeiC,UAAU,CAACC,cAAcA,UAAUC,OAAOd,MAAMc,EAAE,MAAM,EAAC;AAEvF,QAAMC,uBAAuBR,gBAAgBS,KAC3C,CAAChB,UAAUrB,eAAeiC,UAAU,CAACC,cAAcA,UAAUC,OAAOd,MAAMc,EAAE,MAAM,EAAC;AAErF,QAAMG,cAAc,CAAC,EAACvC,2CAAawC;AACnC,QAAMC,cAAc,CAAC,GAACzC,sDAAa0C,YAAb1C,mBAAsB2C,SAAtB3C,mBAA4BgC,WAAUhC,YAAY0C,QAAQC,KAAKX,SAAS;AAC9F,QAAMY,yBAAyBL,eAAeE;AAC9C,QAAMI,aAAa/D,OAAOkD;AAC1B,QAAMc,cAAc5D,QAAQ8C;AAC5B,QAAMe,wBAAwB,IAAIC,SAAAA;AAGhCxD,mBAAe,EAAA;AACfE,mBAAkBsD,GAAAA,IAAAA;EACpB;AAEA,aACEC,0BAACzE,KAAAA;;MACEqB,wBACCqD,yBAAC1E,KAAAA;QAAI2E,eAAe;QAClB,cAAAF,0BAACG,MAAAA;UAAKC,gBAAe;UAAgBC,YAAW;;aAC5CT,aAAa,KAAKC,cAAc,KAAKL,oBACrCQ,0BAACG,MAAAA;cAAKG,KAAK;cAAGC,MAAK;;gBAChBrE,YAAYwB,kBACXuC,yBAACE,MAAAA;kBACCK,aAAa;kBACbC,cAAc;kBACdC,YAAW;kBACXC,WAAS;kBACTC,aAAY;kBACZC,QAAO;kBAEP,cAAAZ,yBAACa,cAAAA;oBACCC,cAAY9D,cAAc;sBACxBkC,IAAI6B,QAAQ,mBAAA;sBACZC,gBAAgB;oBAClB,CAAA;oBACAC,SACE,CAACpC,uBAAuBM,uBACpB,kBACAN;oBAENqC,iBAAiBvE;;;gBAItBc,kBAAcuC,yBAACmB,YAAAA;kBAAW5E;kBAA4B6E,OAAOtE,2CAAauE;;oBAC3ErB,yBAACsB,SAAAA;kBACCC,iBAAgBzE,gDAAa0C,YAAb1C,mBAAsB2C;kBACtCtD;;;;aAKJwD,aAAa,KAAKC,cAAc,KAAKP,oBACrCU,0BAACG,MAAAA;cAAKsB,YAAW;cAAOC,QAAQ;cAAGpB,KAAK;;oBACtCL,yBAAC3E,iBAAAA;kBAAgBqG,YAAY;kBAAGzB,eAAe;kBAC7C,cAAAD,yBAAC2B,YAAAA;oBACCC,OACEnE,aACIT,cAAc;sBACZkC,IAAI;sBACJ8B,gBAAgB;oBAClB,CAAA,IACAhE,cAAc;sBACZkC,IAAI;sBACJ8B,gBAAgB;oBAClB,CAAA;oBAENa,SAAS,MAAM1E,QAAQM,aAAaF,YAAYuE,OAAOvE,YAAYC,IAAI;8BAEtEC,iBAAauC,yBAAC+B,eAAAA,CAAAA,CAAAA,QAAU/B,yBAACgC,eAAAA,CAAAA,CAAAA;;;oBAG9BhC,yBAACiC,aAAAA;kBAAY3F;kBAAgC4F,YAAYpF,YAAYwC,MAAM;;;;;;;MAOpFvD,YAAWyC,2CAAaM,WAAUN,YAAYM,SAAS,KAAKnB,qBAC3DqC,yBAAC1E,KAAAA;QAAIoG,YAAY;QACf,cAAA1B,yBAACmC,aAAAA;UACC3F;UACAoF,OAAO5E,cAAc;YACnBkC,IAAI6B,QAAQ,8BAAA;YACZC,gBAAgB;UAClB,CAAA;UACAxC;UACA4D,iBAAiBtF,2CAAaiB;;;MAKnC4B,eAAe,KAAKC,gBAAgB,SACnCI,yBAAC1E,KAAAA;QAAI2E,eAAe;QAClB,cAAAD,yBAACqC,aAAAA;UACCC,MAAK;UACLC,OAAO;UACPC,QACE1G,aACA,CAACyD,eACD,CAACF,mBACCW,yBAACyC,QAAAA;YAAOC,SAAQ;YAAYC,eAAW3C,yBAAC4C,eAAAA,CAAAA,CAAAA;YAASf,SAAS3F;sBACvDc,cAAc;cACbkC,IAAI6B,QAAQ,2BAAA;cACZC,gBAAgB;YAClB,CAAA;;UAIN6B;;YAEEnD,yBACI1C,cAAc;cACZkC,IAAI6B,QAAQ,oCAAA;cACZC,gBAAgB;aAElBlF,IAAAA,aAAa,CAACuD,cACZrC,cAAc;cACZkC,IAAI6B,QAAQ,mBAAA;cACZC,gBAAgB;YAClB,CAAA,IACAhE,cAAc;cACZkC,IAAI6B,QAAQ,kCAAA;cACZC,gBAAgB;YAClB,CAAA;;;;MAMb,CAACvD,eAAemC,cAAc,KAAKD,aAAa,UAC/CK,yBAAC8C,WAAAA;QACCnH;QACAgE;QACAC;QACAmD,eAAe,CAAClE,uBAAuBM;QACvC6D,0BAA0B;QAC1BzG;QACAC,gBAAgBqD;QAChBpD;QACAC;QACAuG,aAAarG;QACbsG,aAAavG;QACbwG,MACE;UAAInH,GAAAA,QAAQmC,IAAI,CAACJ,YAAY;YAAE,GAAGA;YAAQQ,MAAM;YAAS;UAAQ3C,GAAAA;QAAO;QAI1EwH,UAAUrG;QACVsG,yBAAyB,CAACpH;QAC1BqH,YAAWxG,2CAAauE,SAAQ;;MAInC5D,kBACCsC,0BAAAwD,8BAAA;;UACG3D,cAAc,SACbI,yBAACwD,gBAAAA;YACCC,QACI,0BAA2B9D,aAAa,KAAM,CAACD,2BAC/C1C,cACE;cACEkC,IAAI6B,QAAQ,oBAAA;cACZC,gBAAgB;eAElB;cAAEuB,OAAO3C;aAEb,KAAA;sBAGD5D,QAAQmC,IAAI,CAACJ,WAAAA;;AACZ,yBACEiC,yBAAC0D,KAAKC,MAAI;gBACRC,KAAK;gBAELC,WAAU;gBACVzD,YAAW;gBAEX,cAAAJ,yBAAC8D,YAAAA;kBACCC,WAAWhG,OAAOiG;kBAClB9E,IAAI,UAAUnB,OAAOmB,EAAE;kBACvB2C,SAAS,MAAMhC,sBAAsB9B,OAAOmB,IAAInB,OAAOkG,IAAI;kBAC3DC,aACExH,oBACEsD,yBAAC2B,YAAAA;oBACCwC,aAAa;oBACbvC,OAAO5E,cAAc;sBACnBkC,IAAI6B,QAAQ,kBAAA;sBACZC,gBAAgB;oBAClB,CAAA;oBACAa,SAAS,MAAMnF,aAAaqB,MAAAA;oBAE5B,cAAAiC,yBAACoE,eAAAA,CAAAA,CAAAA;;kBAKP,cAAApE,yBAACqE,gBAAAA;oBACC,cAAArE,yBAACsE,sBAAAA;sBACCzC,SAAS,MAAMhC,sBAAsB9B,OAAOmB,IAAInB,OAAOkG,IAAI;sBAE3D,cAAAlE,0BAACG,MAAAA;wBAAKqE,KAAI;wBAAKV,WAAU;wBAASzD,YAAW;wBAAQoE,UAAS;;8BAC5DzE,0BAAC7E,oBAAAA;4BACCuJ,YAAW;4BACXC,UAAQ;4BACRC,WAAU;;8BAET5G,OAAOiG;kCAGRhE,yBAAC4E,gBAAAA;gCAAe,UAAA;;;;8BAElB5E,yBAAC9E,oBAAAA;4BACCqJ,KAAI;4BACJI,WAAU;4BACVjC,SAAQ;4BACRgC,UAAQ;sCAEP1H,cACC;8BACEkC,IAAI6B,QAAQ,sBAAA;8BACZC,gBACE;+BAEJ;8BACEpB,cAAa7B,MAAAA,OAAO8G,aAAP9G,gBAAAA,IAAiBwE;8BAC9BuC,aAAY/G,MAAAA,OAAOgH,UAAPhH,gBAAAA,IAAcwE;4BAC5B,CAAA;;;;;;;cArDP,GAAA,UAAUxE,OAAOmB,EAAE,EAAE;YA8DhC,CAAA;;UAIHS,aAAa,KAAKC,cAAc,SAC/BI,yBAAC1E,KAAAA;YAAIoG,YAAY;YACf,cAAA1B,yBAACgF,SAAAA,CAAAA,CAAAA;;UAIJrF,aAAa,SACZK,yBAAC1E,KAAAA;YAAIoG,YAAY;YACf,cAAA1B,yBAACiF,eAAAA;cACCtJ;cACA2G,MAAK;cACL1G;cACAgB;cACAG;cACAN;cACAgH,QACI,CAAC/D,0BAA2BA,0BAA0BE,cAAc,MACpE9C,YAAYoI,SAAS,KACrBlI,cACE;gBACEkC,IAAI6B,QAAQ,mBAAA;gBACZC,gBAAgB;iBAElB;gBAAEuB,OAAO5C;eAEb,KAAA;;;;;MAQX9C,WAAWsI,YAAY,SACtBpF,0BAACG,MAAAA;QAAKC,gBAAe;QAAgBuB,YAAY;QAAG0D,UAAS;QAAWC,QAAQ;;cAC9ErF,yBAACsF,UAAAA;YACCC,UAAUzI,YAAYyI;YACtBlJ;;cAEF2D,yBAACwF,kBAAAA;YACCC,YAAY3I,YAAYoI;YACxB9I;YACAS;;;;;;AAMZ;;;;IC9ca6I,eAAe,CAAC,EAAEC,SAASC,WAAU,MAAqB;AACrE,QAAM,EAAEC,cAAa,IAAKC,QAAAA;AAE1B,aACEC,0BAACC,MAAMC,QAAM;;UACXC,yBAACC,QAAAA;QAAOC,SAAST;QAASU,SAAQ;kBAC/BR,cAAc;UAAES,IAAI;UAAgCC,gBAAgB;QAAS,CAAA;;MAE/EX,kBACCM,yBAACC,QAAAA;QAAOC,SAASR;kBACdC,cAAc;UAAES,IAAI;UAAiBC,gBAAgB;QAAS,CAAA;;;;AAKzE;;;;;ACRO,IAAMC,eAAe,CAAC,EAC3BC,gBACAC,eACAC,eAAc,MACI;AAClB,QAAM,EAAEC,cAAa,IAAKC,QAAAA;AAE1B,aACEC,0BAACC,MAAAA;IAAKC,WAAU;IAASC,YAAW;IAAUC,KAAK;;UACjDJ,0BAACC,MAAAA;QAAKG,KAAK;QAAGF,WAAU;QAASC,YAAW;;cAC1CE,yBAACC,YAAAA;YAAWC,SAAQ;YAAKC,YAAW;YAAOC,WAAU;sBAClDX,cACC;cACEY,IAAIC,QAAQ,uBAAA;cACZC,gBACE;eAEJ;cAAEC,QAAQlB,eAAemB;YAAO,CAAA;;cAGpCT,yBAACC,YAAAA;YAAWC,SAAQ;YAAKE,WAAU;sBAChCX,cAAc;cACbY,IAAIC,QAAQ,uCAAA;cACZC,gBAAgB;YAClB,CAAA;;;;UAIJP,yBAACU,eAAAA;QACCC,MAAK;QACLC,QAAQtB;QACRC;QACAD;QACAE;;;;AAIR;;;AChBA,IAAMqB,cAAcC,GAAOC,IAAAA;;gBAEX,MAAM,mBAAmB;;AA4BlC,IAAMC,eAAe,CAAC,EAC3BC,eAAe,CAAA,GACfC,WAAW,MACXC,SACAC,YACAC,aACAC,gBACAC,YACAC,WAAW,OACXC,0BAA0B,CAAA,GAC1BC,gBAAe,MACG;AAClB,QAAM,CAACC,aAAaC,cAAAA,IAAwBC,gBAAmCC,MAAAA;AAC/E,QAAM,CAACC,cAAcC,eAAAA,IAAyBH,gBAAgCC,MAAAA;AAC9E,QAAM,EAAEG,cAAa,IAAKC,QAAAA;AAC1B,QAAM,EACJC,SACAC,WACAC,WAAWC,sBACXC,WACAC,aACAC,YAAW,IACTC,2BAAAA;AAEJ,QAAM,CACJ,EAAEC,YAAW,GACb,EACEC,iBACAC,cACAC,kBACAC,cACAC,gBACA1B,gBAAgB2B,oBAAmB,CACpC,IACCC,oBAAoB;IAAEC,QAAQjC;EAAS,CAAA;AAE3C,QAAM,EACJkC,MAAM,EAAEC,YAAYC,SAASC,OAAM,IAAK,CAAA,GACxClB,WAAWmB,iBACXC,OAAOC,YAAW,IAChBC,UAAU;IAAEC,UAAU,CAACzB;IAAS0B,OAAOlB;EAAY,CAAA;AAEvD,QAAM,EACJS,MAAMU,SACNzB,WAAW0B,kBACXN,OAAOO,aAAY,IACjBC,WAAW;IACbC,SAAS/B,WAAW,CAACgC,oBAAoBxB,WAAAA,MAAiBU,yCAAYe,UAAS;IAC/EP,OAAOlB;EACT,CAAA;AAEA,QAAM,CACJ0B,gBACA,EAAEC,WAAWC,YAAYC,eAAeC,gBAAgBC,iBAAgB,CAAE,IACxEC,kBAAkB;IAAC;KAAOlD,uBAAAA;AAE9B,QAAMmD,wBAAwB,MAAA;AAC5B,UAAMC,gBAAgBC,gBAAgB7D,cAAcsC,MAAAA;AAEpD,QAAI,CAAC/B,UAAU;AACb,aAAOM;IACT;AAGA,UAAMiD,kBAAkBF,cAAcG,OACpC,CAACC,UAAUZ,eAAea,UAAU,CAACC,kBAAkBA,cAAcC,OAAOH,MAAMG,EAAE,MAAM,EAAC;AAG7F,QAAIL,gBAAgBM,SAAS,GAAG;AAC9BX,uBAAiBK,eAAAA;WACZ;AACLN,qBAAeI,aAAAA;IACjB;EACF;AAEA,QAAMS,oBAAoB,CAACL,UAAAA;AACzB,WAAOzD,WAAW8C,UAAUW,KAAAA,IAAkBV,WAAWU,KAAAA;EAC3D;AAEA,QAAM5C,YAAYC,wBAAwBkB,mBAAmBO;AAC7D,QAAMwB,WAAW7B,eAAeM;AAEhC,QAAM,CAACwB,WAAWC,YAAAA,IAAsB5D,gBACtCwC,eAAegB,SAAS,IAAI,aAAa,QAAA;AAG3C,MAAIhD,WAAW;AACb,eACEqD,0BAAAC,8BAAA;;YACEC,yBAACC,MAAMC,QAAM;wBACXF,yBAACC,MAAME,OAAK;sBACT9D,cAAc;cACbmD,IAAIY,QAAQ,2BAAA;cACZC,gBAAgB;YAClB,CAAA;;;YAGJL,yBAAC/E,aAAAA;UAAYqF,gBAAe;UAASC,YAAY;UAAGC,eAAe;UACjE,cAAAR,yBAACS,QAAAA;sBACEpE,cAAc;cACbmD,IAAIY,QAAQ,mBAAA;cACZC,gBAAgB;YAClB,CAAA;;;YAGJL,yBAACU,cAAAA;UAAanF;;;;EAGpB;AAEA,MAAIoE,UAAU;AACZ,eACEG,0BAAAC,8BAAA;;YACEC,yBAACC,MAAMC,QAAM;wBACXF,yBAACC,MAAME,OAAK;sBACT9D,cAAc;cACbmD,IAAIY,QAAQ,2BAAA;cACZC,gBAAgB;YAClB,CAAA;;;YAGJL,yBAACW,KAAKC,OAAK,CAAA,CAAA;YACXZ,yBAACU,cAAAA;UAAanF;;;;EAGpB;AAEA,MAAI,CAACgB,SAAS;AACZ,eACEuD,0BAAAC,8BAAA;;YACEC,yBAACC,MAAMC,QAAM;wBACXF,yBAACC,MAAME,OAAK;sBACT9D,cAAc;cACbmD,IAAIY,QAAQ,2BAAA;cACZC,gBAAgB;YAClB,CAAA;;;YAGJL,yBAACW,KAAKE,eAAa,CAAA,CAAA;YACnBb,yBAACU,cAAAA;UAAanF;;;;EAGpB;AAEA,MAAIQ,aAAa;AACf,eACEiE,yBAACc,kBAAAA;MACCvF,SAAS,MAAMS,eAAeE,MAAAA;MAC9BmD,OAAOtD;MACPY;MACAC;MACAC;MACAf;;EAGN;AAEA,MAAIK,cAAc;AAChB,eACE6D,yBAACe,mBAAAA;MACCxD,QAAQpB;MACRZ,SAAS,MAAMa,gBAAgBF,MAAAA;MAC/B8E,UAAS;MACTC,gBAAgBlE,2CAAaQ;;EAGnC;AAEA,QAAM2D,iBAAiB,CAACC,YAAoBC,cAAAA;AAC1C,UAAMC,SAASD,YAAYD;AAC3B,UAAMG,qBAAqB7C,eAAe8C,MAAK;AAC/C,UAAMC,aAAaC,YAAmBH,oBAAoBH,YAAYE,MAAAA;AACtEzC,kBAAc4C,UAAAA;EAChB;AAEA,QAAME,qBAAqB,CAACpG,WAAkBqG,eAAAA;AAC5CjG,mBAAeJ,SAAAA;AACf,QAAI+B,qBAAqB;AACvBA,0BAAoB/B,WAAUqG,UAAAA;IAChC;EACF;AAEA,aACE7B,0BAAAC,8BAAA;;UACEC,yBAACC,MAAMC,QAAM;sBACXF,yBAACC,MAAME,OAAK;oBACT9D,cAAc;YACbmD,IAAIY,QAAQ,2BAAA;YACZC,gBAAgB;UAClB,CAAA;;;UAIJP,0BAAC8B,UAAAA;QAASC,SAAQ;QAASC,OAAOlC;QAAWmC,eAAelC;;cAC1DC,0BAAC3E,MAAAA;YAAK6G,aAAa;YAAGC,cAAc;YAAG1B,YAAY;YAAGD,gBAAe;;kBACnER,0BAACoC,KAAKC,MAAI;;sBACRnC,yBAACkC,KAAKE,SAAO;oBAACN,OAAM;8BACjBzF,cAAc;sBACbmD,IAAIY,QAAQ,kBAAA;sBACZC,gBAAgB;oBAClB,CAAA;;sBAEFP,0BAACoC,KAAKE,SAAO;oBAACN,OAAM;;sBACjBzF,cAAc;wBACbmD,IAAIY,QAAQ,2BAAA;wBACZC,gBAAgB;sBAClB,CAAA;0BACAL,yBAACqC,OAAAA;wBAAMC,YAAY;wBAAI7D,UAAAA,eAAegB;;;;;;kBAG1CK,0BAAC3E,MAAAA;gBAAKoH,KAAK;;sBACTvC,yBAACwC,QAAAA;oBACCX,SAAQ;oBACRY,SAAS,MAAMhH,YAAY;sBAAEH,UAAUyB,2CAAaQ;oBAAO,CAAA;8BAE1DlB,cAAc;sBACbmD,IAAIY,QAAQ,yCAAA;sBACZC,gBAAgB;oBAClB,CAAA;;sBAEFL,yBAACwC,QAAAA;oBAAOC,SAAS,MAAMjH,WAAW;sBAAEF,UAAUyB,2CAAaQ;oBAAO,CAAA;8BAC/DlB,cAAc;sBACbmD,IAAIY,QAAQ,qCAAA;sBACZC,gBAAgB;oBAClB,CAAA;;;;;;cAINL,yBAAC0C,SAAAA,CAAAA,CAAAA;cACD5C,0BAACG,MAAM0C,MAAI;;kBACT3C,yBAACkC,KAAKU,SAAO;gBAACd,OAAM;gBAClB,cAAA9B,yBAAC6C,YAAAA;kBACCxH;kBACAsC;kBACAnB;kBACAD;kBACA2B;kBACA4E,eAAepD;kBACfjB;kBACA7C;kBACAmH,kBAAkB/D;kBAClBgE,aAAahH;kBACbiH,cAAc7G;kBACdqB;kBACAV;kBACAvB;kBACAwB,iBAAiB,CAACkG,YAChBlG,gBAAiBkG,OAAAA;kBAEnBxH,gBAAgBgG;kBAChBzE;kBACAC;kBACAC,cAAc,CAACgG,SAA6BhG,aAAcgG,IAAAA;kBAC1D/F;;;kBAGJ4C,yBAACkC,KAAKU,SAAO;gBAACd,OAAM;gBAClB,cAAA9B,yBAACoD,cAAAA;kBACC3E;kBACAqE,eAAepD;kBACf2D,gBAAgBnC;;;;;;;UAKxBlB,yBAACU,cAAAA;QAAanF;QAAkBI,YAAY,MAAMA,WAAW8C,cAAAA;;;;AAGnE;AAMO,IAAM6E,cAAc,CAAC,EAAEC,OAAO,OAAOhI,SAAS,GAAGiI,UAA6B,MAAA;AACnF,aACExD,yBAACC,MAAMwD,MAAI;IAACF;IAAYG,cAAcnI;kBACpCyE,yBAACC,MAAM2C,SAAO;MACZ,cAAA5C,yBAAC5E,cAAAA;QAAaG;QAAmB,GAAGiI;;;;AAI5C;AAEA,IAAM5B,WAAW1G,GAAOgH,KAAKuB,IAAI;;;;;;;ACvVjC,IAAME,QAAQ;EACZC,aAAa;EACbC,aAAa;EACbC,cAAc;AAChB;AAUO,IAAMC,qBAAqB,CAAC,EACjCC,SACAC,gBACAC,eAAe;EAAC;EAAS;EAAU;EAAU;EAAS,MAC9B;AACxB,QAAM,CAACC,MAAMC,OAAQ,IAASC,gBAASV,MAAMC,WAAW;AACxD,QAAM,CAACU,UAAUC,WAAAA,IAAqBF,gBAAwB,IAAA;AAE9D,UAAQF,MAAAA;IACN,KAAKR,MAAMC;AACT,iBACEY,0BAACC,aAAAA;QACCP;QACAI;QACAI,MAAI;QACJV;QACAW,YAAYV;QACZW,YAAY,MAAMR,QAAQT,MAAME,WAAW;QAC3CgB,aAAa,MAAMT,QAAQT,MAAMG,YAAY;QAC7CgB,gBAAgB,CAACR,cAAaC,YAAYD,SAAAA;QAC1CS,UAAQ;;IAId,KAAKpB,MAAMG;AACT,iBACEU,0BAACQ,kBAAAA;QACCN,MAAI;QACJV,SAAS,MAAMI,QAAQT,MAAMC,WAAW;QACxCqB,gBAAgBX;;IAItB;AACE,iBACEE,0BAACU,mBAAAA;QAAkBR,MAAI;QAACV,SAAS,MAAMI,QAAQT,MAAMC,WAAW;QAAGU;;EAEzE;AACF;;;;;;;;;;;;;;AChDA,IAAMa,WAAWC,GAAOC,IAAAA;;;AAIxB,IAAMC,sBAAsBF,GAAOG,GAAAA;;;;;;;AAQnC,IAAMC,sBAAsBJ,GAAOG,GAAAA;;;;;;AAOtBE,IAAAA,gBAAgB,CAAC,EAAEC,MAAK,MAAwB;;AAC3D,OAAIA,WAAMC,SAAND,mBAAYE,SAASC,UAAUC,QAAQ;AACzC,eACEC,0BAACT,qBAAAA;MAAoBU,QAAO;MAC1B,cAAAD,0BAACE,cAAAA;QACCC,KAAKC,eAAeT,OAAO,IAAA;QAC3BC,MAAMD,MAAMC;QACZS,KAAKV,MAAMW,mBAAmBX,MAAMY;;;EAI5C;AAEA,OAAIZ,WAAMC,SAAND,mBAAYE,SAASC,UAAUU,QAAQ;AACzC,eACER,0BAACP,qBAAAA;MACC,cAAAO,0BAACS,cAAAA;QACCN,KAAKC,eAAeT,OAAO,IAAA;QAC3BU,KAAKV,MAAMW,mBAAmBX,MAAMY;;;EAI5C;AAEA,OAAIZ,WAAMC,SAAND,mBAAYE,SAASC,UAAUY,QAAQ;AACzC,UAAMC,WAAWP,eAAeT,OAAO,IAAA;AACvC,QAAI,CAACgB,SAAU,QAAO;AAItB,UAAMC,iBAAiBjB,MAAMkB,cACzBF,WACA,GAAGA,QAAAA,GAAWA,SAASd,SAAS,GAAA,IAAO,MAAM,GAAI,aAAYF,MAAMmB,SAAS;AAEhF,eACEd,0BAACR,KAAAA;MACCuB,KAAI;MACJC,WAAU;MACVC,UAAS;MACTC,KAAKN;MACLP,KAAKV,MAAMW,mBAAmBX,MAAMY;;EAG1C;AAEA,aACEP,0BAACZ,UAAAA;IAAS+B,OAAM;IAAOlB,QAAO;IAAOmB,gBAAe;IAASC,WAAS;IACnE1B,YAAAA,WAAM2B,QAAN3B,mBAAWE,SAAS,cACnBG,0BAACuB,eAAAA;MAAQC,cAAY7B,MAAMW,mBAAmBX,MAAMY;MAAMY,OAAM;MAAOlB,QAAO;aAE9ED,0BAACyB,eAAAA;MAAKD,cAAY7B,MAAMW,mBAAmBX,MAAMY;MAAMY,OAAM;MAAOlB,QAAO;;;AAInF;;;;;ACpEO,IAAMyB,uBAAuB,CAAC,EACnCC,OACAC,eACAC,YACAC,YAAW,MACe;AAC1B,QAAM,EAAEC,cAAa,IAAKC,QAAAA;AAE1B,aACEC,2BAACC,iBAAAA;;MACEL,kBACCM,0BAACC,YAAAA;QACCC,OAAON,cAAc;UACnBO,IAAIC,QAAQ,kBAAA;UACZC,gBAAgB;QAClB,CAAA;QACAC,SAAS,MAAMZ,WAAWF,KAAAA;QAE1B,cAAAQ,0BAACO,eAAAA,CAAAA,CAAAA;;UAILP,0BAACQ,gBAAAA;QAAeC,KAAKC,4BAA4BlB,MAAMiB,GAAG;;MAEzDhB,qBACCO,0BAACC,YAAAA;QACCC,OAAON,cAAc;UACnBO,IAAI;UACJE,gBAAgB;QAClB,CAAA;QACAC,SAAS,MAAMb,cAAcD,KAAAA;QAE7B,cAAAQ,0BAACW,cAAAA,CAAAA,CAAAA;;MAIJhB,mBACCK,0BAACC,YAAAA;QACCC,OAAON,cAAc;UACnBO,IAAIC,QAAQ,mBAAA;UACZC,gBAAgB;QAClB,CAAA;QACAC,SAASX;QAET,cAAAK,0BAACY,eAAAA,CAAAA,CAAAA;;;;AAKX;;;;;;ACrDA,IAAMC,sBAAsBC,GAAOC,UAAAA;;;AAY5B,IAAMC,kBAAkB,CAAC,EAC9BC,WAAW,OACXC,SACAC,YAAW,MACU;AACrB,QAAM,EAAEC,cAAa,IAAKC,QAAAA;AAC1B,QAAM,CAACC,UAAUC,WAAAA,IAAqBC,gBAAS,KAAA;AAE/C,QAAMC,kBAAkB,CAACC,MAAAA;AACvBA,MAAEC,eAAc;AAChBJ,gBAAY,IAAA;EACd;AAEA,QAAMK,kBAAkB,CAACF,MAAAA;AACvB,QAAI,CAACA,EAAEG,cAAcC,SAASJ,EAAEK,aAAa,GAAW;AACtDR,kBAAY,KAAA;IACd;EACF;AAEA,QAAMS,iBAAiB,CAACN,MAAAA;AACtBA,MAAEC,eAAc;EAClB;AAEA,QAAMM,aAAa,CAACP,MAAAA;;AAClBA,MAAEC,eAAc;AAEhB,SAAID,4BAAGQ,iBAAHR,mBAAiBS,OAAO;AAC1B,YAAMA,QAAQT,EAAEQ,aAAaC;AAC7B,YAAMC,SAA8B,CAAA;AAEpC,eAASC,IAAI,GAAGA,IAAIF,MAAMG,QAAQD,KAAK;AACrC,cAAME,OAAOJ,MAAMK,KAAKH,CAAAA;AACxB,YAAIE,MAAM;AACR,gBAAME,QAAQC,eAAeH,MAAMI,YAAYC,QAAQ;AAEvDR,iBAAOS,KAAKJ,KAAAA;QACd;MACF;AAEAtB,kBAAYiB,MAAAA;IACd;AAEAb,gBAAY,KAAA;EACd;AAEA,aACEuB,2BAACC,MAAAA;IACCC,aAAa1B,WAAW,WAAW2B;IACnCC,aAAa5B,WAAW,QAAQ2B;IAChCE,aAAa7B,WAAW,eAAe2B;IACvCG,WAAU;IACVC,gBAAe;IACfC,YAAW;IACXC,QAAO;IACPC,OAAM;IACNC,KAAI;IACJC,MAAK;IACLzC;IACAC;IACAyC,aAAalC;IACbmC,aAAahC;IACbiC,YAAY7B;IACZ8B,QAAQ7B;IACR8B,KAAK;IACLC,OAAO;MAAEC,QAAQhD,WAAW,gBAAgB;IAAU;;UAEtDiD,0BAACC,eAAAA;QACCC,eAAW;QACXZ,OAAM;QACND,QAAO;QACPc,MAAMpD,WAAW,eAAe;;UAElCiD,0BAACrD,qBAAAA;QACCyD,SAAQ;QACRC,YAAW;QACXC,WAAU;QACVR,OAAO;UAAES,WAAW;QAAS;QAC7BhB,KAAI;kBAEHrC,cAAc;UACbsD,IAAIC,QAAQ,+BAAA;UACZC,gBAAgB;QAClB,CAAA;;;;AAIR;;;ICrEaC,iBAAuBC,kBAClC,CACE,EACEC,QACAC,WAAW,OACXC,OACAC,MACAC,OACAC,aACAC,YACAC,eACAC,+BACAC,aACAC,aACAC,QACAC,YACAC,WAAW,OACXC,oBACAC,gBAAe,GAEjBC,iBAAAA;AAEA,QAAM,EAAEC,cAAa,IAAKC,QAAAA;AAC1B,QAAM,CAACC,gBAAgBC,iBAAAA,IAA2BC,gBAAS,KAAA;AAE3D,QAAMC,eAAetB,OAAOc,kBAAmB;AAE/C,aACES,2BAAAC,+BAAA;;UACEC,0BAACC,eAAAA;QACCC,KAAKX;QACLZ;QACAC;QACAuB,gBAAgBN,6CAAcO;QAC9BC,eAAehB;QACfiB,eAAed,cAAc;UAC3Be,IAAIC,QAAQ,yCAAA;UACZC,gBAAgB;QAClB,CAAA;QACAC,WAAWlB,cAAc;UACvBe,IAAIC,QAAQ,qCAAA;UACZC,gBAAgB;QAClB,CAAA;QACAvB;QACAC;QACAT;QACAD;QACAW;QACAuB,SACEd,mBACEG,0BAACY,sBAAAA;UACCC,OAAOhB;UACPf,eAAeN,WAAWsC,SAAYhC;UACtCD,YAAYL,WAAWsC,SAAYjC;UACnCI,aAAaA,cAAc,MAAMU,kBAAkB,IAAQmB,IAAAA;QAE3DA,CAAAA,IAAAA;kBAGLvC,OAAOwC,WAAW,QACjBf,0BAACgB,eAAAA;UACCrC,OAAOa,cACL;YACEe,IAAIC,QAAQ,8BAAA;YACZC,gBAAgB;aAElB;YAAEQ,GAAG;YAAGC,GAAG;UAAE,CAAA;UAGf,cAAAlB,0BAACmB,iBAAAA;YACC3C;YACA4C,SAASvC;YACTG;;QAIJT,CAAAA,IAAAA,OAAO8C,IAAI,CAACR,OAAOS,cACjBtB,0BAACgB,eAAAA;UAECrC,OAAOa,cACL;YACEe,IAAIC,QAAQ,8BAAA;YACZC,gBAAgB;aAElB;YAAEQ,GAAGK,QAAQ;YAAGJ,GAAG3C,OAAOwC;UAAO,CAAA;UAGnC,cAAAf,0BAACuB,eAAAA;YAAcV;;QATVA,GAAAA,MAAMN,EAAE,CAAA;;UAcrBP,0BAACwB,iBAAAA;QACCC,MAAM/B;QACNgC,SAAS,CAACC,gBAAAA;AACRhC,4BAAkB,KAAA;AAGlB,cAAIgC,gBAAgB,MAAM;AACxB5C,0CAAAA;UACF;AACA,cAAI4C,eAAe,OAAOA,gBAAgB,WAAW;AACnD1C,uDAAc0C;UAChB;QACF;QACAd,OAAOhB;QACP+B,WAAS;QACTC,aAAW;QACXC,aAAW;QACXxC;;;;AAIR,CACA;;;AC3IF,IAAMyC,SAAQ;EACZC,aAAa;EACbC,aAAa;EACbC,cAAc;AAChB;AAeaC,IAAAA,oBAA0BC,kBACrC,CACE,EACEC,WAAW,EAAEC,eAAe,MAAMC,WAAW,MAAK,IAAK,CAAA,GACvDC,OACAC,MACAC,WAAW,OACXC,cAAcC,QACdC,MAAAA,OACAC,WAAW,MAAK,GAElBC,iBAAAA;AAEA,QAAM,EAAEC,cAAa,IAAKC,QAAAA;AAC1B,QAAM,EAAEC,UAAUC,OAAOC,MAAK,IAAKC,SAASR,KAAAA;AAC5C,QAAM,CAACS,eAAeC,gBAAAA,IAA0BC,gBAA2B,CAAA,CAAE;AAC7E,QAAM,CAACC,MAAMC,OAAAA,IAAiBF,gBAA6BZ,MAAAA;AAC3D,QAAM,CAACe,eAAeC,gBAAAA,IAA0BJ,gBAAS,CAAA;AACzD,QAAM,CAACK,eAAeC,gBAAiB,IAASN,gBAAQ;AACxD,QAAM,CAACO,UAAUC,WAAAA,IAAqBR,gBAAwB,IAAA;AAC9D,QAAM,EAAES,mBAAkB,IAAKC,gBAAAA;AAE/BC,EAAMC,iBAAU,MAAA;AAEd,QAAIX,SAASb,QAAW;AACtBW,uBAAiB,CAAA,CAAE;IACrB;KACC;IAACE;EAAK,CAAA;AAET,MAAIY,iBAAyB,CAAA;AAE7B,MAAIC,MAAMC,QAAQpB,KAAQ,GAAA;AACxBkB,qBAAiBlB;EACnB,WAAWA,OAAO;AAChBkB,qBAAiB;MAAClB;IAAM;EAC1B;AAEA,QAAMqB,mBAAmB,CAACC,uBAAAA;AACxB,UAAMtB,SAAQZ,WAAWkC,qBAAqBA,mBAAmB,CAAE;AACnEvB,aAASL,OAAMM,MAAAA;AACfO,YAAQd,MAAAA;EACV;AAEA,QAAM8B,oCAAoC,MAAA;AACxC,QAAIC;AAEJ,QAAIpC,UAAU;AACZ,YAAMkC,qBAAqBJ,eAAeO,OACxC,CAACC,GAAGC,eAAeA,eAAenB,aAAAA;AAEpCgB,kBAAYF,mBAAmBM,SAAS,IAAIN,qBAAqB;WAC5D;AACLE,kBAAY;IACd;AAEA,UAAMxB,SAAQwB;AACdzB,aAASL,OAAMM,MAAAA;AAEfS,qBAAiB,CAAA;EACnB;AAEA,QAAMoB,oBAAoB,CAACC,UAAAA;AACzB,QAAIN;AAEJ,QAAIpC,UAAU;AACZ,YAAMkC,qBAAqBJ,eAAeO,OAAO,CAACM,cAAcA,UAAUC,OAAOF,MAAME,EAAE;AAEzFR,kBAAYF,mBAAmBM,SAAS,IAAIN,qBAAqB;WAC5D;AACLE,kBAAY;IACd;AAEAzB,aAASL,OAAM8B,SAAAA;AAEff,qBAAiB,CAAA;EACnB;AAEA,QAAMwB,kBAAkB,CAACH,UAAAA;AACvB,UAAMR,qBAAqBJ,eAAegB,IAAI,CAACH,cAC7CA,UAAUC,OAAOF,MAAME,KAAKF,QAAQC,SAAAA;AAGtChC,aAASL,OAAMN,WAAWkC,qBAAqBA,mBAAmB,CAAE,CAAA;EACtE;AAEA,QAAMa,sBAAsB,CAC1BC,QACAC,aAAAA;AAEA,UAAMC,gBAAgBC,gBAAgBpD,cAAciD,MAAAA;AAEpD,QAAIE,cAAcV,SAAS,GAAG;AAC5BS,eAASC,aAAAA;WACJ;AACLxB,yBAAmB;QACjB0B,MAAM;QACNC,SAAS;QACTC,SAAS7C,cACP;UACEmC,IAAIW,QAAQ,kCAAA;UACZC,gBAAgB;WAElB;UACEC,YAAY1D,gBAAgB,CAAA,GAAI2D,KAAK,GAAA;QACvC,CAAA;MAEJ,CAAA;IACF;EACF;AAEA,QAAMC,kBAAkB,CAACX,WAAAA;AACvBD,wBAAoBC,QAAQ,CAACE,kBAAAA;AAC3B3B,uBAAiB2B,aAAAA;AACjB/B,cAAQ3B,OAAME,WAAW;IAC3B,CAAA;EACF;AAEA,MAAIM,YAAY8B,eAAeU,SAAS,GAAG;AACzCvC,YAAQ,GAAGA,KAAM,KAAImB,gBAAgB,CAAE,MAAKU,eAAeU,MAAM;EACnE;AAEA,QAAMoB,aAAa,MAAA;AACjBvC,qBAAiB,CAACwC,YAAaA,UAAU/B,eAAeU,SAAS,IAAIqB,UAAU,IAAI,CAAA;EACrF;AAEA,QAAMC,iBAAiB,MAAA;AACrBzC,qBAAiB,CAACwC,YAAaA,UAAU,IAAIA,UAAU,IAAI/B,eAAeU,SAAS,CAAA;EACrF;AAEA,QAAMuB,6BAA6B,CAAChD,mBAAAA;AAClCC,qBAAiB,CAACgD,SAAS;MAAIA,GAAAA;MAASjD,GAAAA;IAAc,CAAA;EACxD;AAEA,MAAIkD,0BAA0BnC;AAE9B,MAAIf,cAAcyB,SAAS,GAAG;AAC5B,UAAM0B,uBAAuBf,gBAAgBpD,cAAcgB,aAAAA;AAE3DkD,8BAA0BjE,WACtB;MAAIkE,GAAAA;MAAyBpC,GAAAA;QAC7B;MAACoC,qBAAqB,CAAE;IAAC;EAC/B;AAEA,aACEC,2BAAAC,+BAAA;;UACEC,0BAACC,gBAAAA;QACCC,KAAK/D;QACLwC,QAAQlB;QACR3B;QACAF;QACAG;QACAoE,eAAe/B;QACfgC,+BAA+BtC;QAC/BuC,YAAY,MAAMvD,QAAQ3B,OAAMC,WAAW;QAC3CkF,aAAahB;QACbiB,aAAa/B;QACbgC,QAAQjB;QACRkB,YAAYhB;QACZjD;QACAX;QACAK;QACAwE,oBAAoB3D;QACpB4D,iBAAgB;;MAGjB9D,SAAS1B,OAAMC,mBACd4E,0BAACY,aAAAA;QACClF;QACAkE;QACAzC;QACA0D,SAAS,MAAA;AACP/D,kBAAQd,MAAAA;AACRoB,sBAAY,IAAA;QACd;QACA0D,MAAMjE,SAAS1B,OAAMC;QACrB2F,YAAYnD;QACZjC;QACA0E,YAAY,MAAMvD,QAAQ3B,OAAME,WAAW;QAC3C2F,aAAa,MAAMlE,QAAQ3B,OAAMG,YAAY;QAC7C2F,gBAAgB,CAACC,WAAW9D,YAAY8D,MAAAA;QACxCP,iBAAgB;;MAInB9D,SAAS1B,OAAME,mBACd2E,0BAACmB,mBAAAA;QACCL,MAAMjE,SAAS1B,OAAME;QACrBwF,SAAS,MAAM/D,QAAQ3B,OAAMC,WAAW;QACxCgG,oBAAoBnE;QACpBoE,kBAAkB3B;QAClBiB,iBAAgB;QAChBxD;QACAuB;;MAIH7B,SAAS1B,OAAMG,oBACd0E,0BAACsB,kBAAAA;QACCR,MAAMjE,SAAS1B,OAAMG;QACrBuF,SAAS,MAAM/D,QAAQ3B,OAAMC,WAAW;QACxCmG,gBAAgBpE;;;;AAK1B,CACA;;;;;;AC7OK,IAAMqE,2BAA2B,CAACC,MAAoBC,cAAAA;AAC3D,MAAI,CAACA,WAAU;AACb,UAAM,IAAIC,UAAU,yBAAA;EACtB;AAEA,SAAOC,OAAOC,KAAKJ,IAAAA,EAAMK,OAAO,CAACC,KAAmBC,YAAAA;AAClDD,QAAI,GAAGL,SAAAA,IAAYM,OAAQ,EAAC,IAAIP,KAAKO,OAAQ;AAE7C,WAAOD;EACT,GAAG,CAAA,CAAC;AACN;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACCA,IAAME,OAAOC,UAAUC,OAAOF;AAE9B,IAAMG,QAAkC;EACtCC,SAASC,KAAc;AACrBA,QAAIC,YAAY;MACdC,IAAI,WAAWC,QAAAA;MACfC,MAAMC;MACNC,WAAW;QACTC,IAAI,GAAGJ,QAAS;QAChBK,gBAAgB;MAClB;MACAC,aAAaC,YAAYC;MACzBC,WAAW,MAAM,OAAO,mBAAA,EAAmBC,KAAK,CAACC,SAAS;QAAEC,SAASD,IAAIE;QAAO;MAChFC,UAAU;IACZ,CAAA;AAEAjB,QAAIkB,gBAAgB,UAAU;MAC5BX,IAAI;MACJL,IAAI;MACJI,WAAW;QACTC,IAAIY,QAAQ,aAAA;QACZX,gBAAgB;MAClB;MACA,MAAMI,YAAAA;AACJ,cAAM,EAAEQ,sBAAqB,IAAK,MAAM,OAAO,4BAAA;AAC/C,eAAO;UAAEL,SAASK;QAAsB;MAC1C;MACAX,aAAaC,YAAYW;IAC3B,CAAA;AAEArB,QAAIsB,UAAU;MACZC,MAAM;MACNX,WAAWY;IACb,CAAA;AACAxB,QAAIyB,cAAc;MAChB;QACE9B,MAAM;QACNiB,WAAWc;MACb;IACD,CAAA;AAED1B,QAAI2B,eAAe;MACjBpB,IAAIJ;MACJR;IACF,CAAA;EACF;EACA,MAAMiC,cAAc,EAAEC,QAAO,GAAyB;AACpD,UAAMC,gBAAgB,MAAMC,QAAQC,IAClCH,QAAQI,IAAI,CAACC,WAAAA;AACX,aAAO,kCAAO,kBAAkBA,MAAO,OAAM,EAC1CrB,KAAK,CAAC,EAAEE,SAASoB,KAAI,MAAE;AACtB,eAAO;UACLA,MAAMC,yBAAyBD,MAAMhC,QAAAA;UACrC+B;QACF;MACF,CAAA,EACCG,MAAM,MAAA;AACL,eAAO;UACLF,MAAM,CAAA;UACND;QACF;MACF,CAAA;IACJ,CAAA,CAAA;AAGF,WAAOH,QAAQO,QAAQR,aAAAA;EACzB;AACF;",
  "names": ["useModalQueryParams", "initialState", "trackUsage", "useTracking", "config", "data", "useConfig", "queryObject", "setQueryObject", "useState", "page", "sort", "pageSize", "filters", "$and", "React", "useEffect", "prevQuery", "handleChangeFilters", "nextFilters", "location", "filter", "Object", "keys", "length", "prev", "handleChangePageSize", "parseInt", "handeChangePage", "handleChangeSort", "handleChangeSearch", "_q", "newState", "forEach", "key", "includes", "handleChangeFolder", "folder", "folderPath", "rawQuery", "stringify", "encode", "onChangeFilters", "onChangeFolder", "onChangePage", "onChangePageSize", "onChangeSort", "onChangeSearch", "toSingularTypes", "types", "map", "type", "substring", "length", "getAllowedFiles", "pluralTypes", "files", "singularTypes", "toSingularTypes", "allowedFiles", "filter", "file", "fileType", "mime", "split", "includes", "move", "array", "oldIndex", "newIndex", "length", "splice", "moveElement", "index", "offset", "getBreadcrumbDataCM", "folder", "data", "id", "label", "getTrad", "defaultMessage", "parent", "push", "name", "path", "Filters", "appliedFilters", "onChangeFilters", "open", "setOpen", "useState", "formatMessage", "useIntl", "_jsxs", "Popover", "Root", "onOpenChange", "_jsx", "Trigger", "Button", "variant", "startIcon", "Filter", "size", "id", "defaultMessage", "FilterPopover", "onToggle", "prev", "displayedFilters", "filters", "onSubmit", "FilterList", "filtersSchema", "onRemoveFilter", "PageSize", "onChangePageSize", "pageSize", "formatMessage", "useIntl", "handleChange", "value", "Number", "_jsxs", "Flex", "SingleSelect", "size", "aria-label", "id", "defaultMessage", "onChange", "toString", "_jsx", "SingleSelectOption", "Box", "paddingLeft", "Typography", "textColor", "tag", "htmlFor", "PaginationContext", "createContext", "activePage", "pageCount", "usePagination", "useContext", "Pagination", "children", "label", "paginationValue", "useMemo", "_jsx", "Provider", "value", "Box", "tag", "aria-label", "Flex", "gap", "PaginationText", "styled", "Typography", "linkWrapperStyles", "css", "theme", "spaces", "borderRadius", "$active", "shadows", "filterShadow", "undefined", "props", "colors", "primary600", "LinkWrapperButton", "button", "LinkWrapperDiv", "div", "defaultProps", "type", "PageLinkWrapper", "primary700", "neutral800", "neutral0", "ActionLinkWrapper", "p", "neutral300", "neutral600", "neutral700", "DotsWrapper", "PreviousLink", "children", "activePage", "usePagination", "disabled", "_jsx", "li", "_jsxs", "aria-disabled", "tabIndex", "VisuallyHidden", "ChevronLeft", "aria-hidden", "NextLink", "pageCount", "ChevronRight", "PageLink", "number", "isActive", "variant", "fontWeight", "Dots", "as", "small", "PaginationFooter", "onChangePage", "pagination", "formatMessage", "useIntl", "previousActivePage", "nextActivePage", "firstLinks", "onClick", "id", "defaultMessage", "page", "links", "Array", "from", "length", "map", "_", "i", "Pagination", "firstLinksToCreate", "lastLinks", "lastLinksToCreate", "middleLinks", "push", "forEach", "unshift", "includes", "middleLinksToCreate", "shouldShowDotsAfterFirstLink", "shouldShowMiddleDots", "beforeDotsLinksLength", "afterDotsLength", "SearchAsset", "onChangeSearch", "queryValue", "formatMessage", "useIntl", "trackUsage", "useTracking", "isOpen", "setIsOpen", "useState", "value", "setValue", "wrapperRef", "useRef", "React", "useLayoutEffect", "setTimeout", "current", "querySelector", "focus", "handleToggle", "prev", "handleClear", "handleSubmit", "e", "preventDefault", "stopPropagation", "location", "_jsx", "div", "ref", "SearchForm", "onSubmit", "Searchbar", "name", "onClear", "onChange", "target", "clearLabel", "id", "getTrad", "defaultMessage", "aria-label", "size", "placeholder", "IconButton", "label", "onClick", "Search", "isSelectable", "allowedTypes", "mime", "fileType", "split", "includes", "TypographyMaxWidth", "styled", "Typography", "ActionContainer", "Box", "theme", "colors", "neutral500", "BrowseStep", "allowedTypes", "assets", "rawAssets", "canCreate", "canRead", "folders", "multiple", "onAddAsset", "onChangeFilters", "onChangePage", "onChangePageSize", "onChangeSearch", "onChangeSort", "onChangeFolder", "onEditAsset", "onEditFolder", "onSelectAllAsset", "onSelectAsset", "pagination", "queryObject", "selectedAssets", "formatMessage", "useIntl", "view", "setView", "usePersistentState", "localStorageKeys", "modalView", "viewOptions", "GRID", "isGridView", "data", "currentFolder", "isLoading", "isCurrentFolderLoading", "useFolder", "folder", "enabled", "singularTypes", "toSingularTypes", "map", "asset", "isSelectable", "mime", "type", "breadcrumbs", "getBreadcrumbDataCM", "undefined", "allAllowedAsset", "getAllowedFiles", "areAllAssetSelected", "length", "every", "findIndex", "currAsset", "id", "hasSomeAssetSelected", "some", "isSearching", "_q", "isFiltering", "filters", "$and", "isSearchingOrFiltering", "assetCount", "folderCount", "handleClickFolderCard", "args", "_jsxs", "_jsx", "paddingBottom", "Flex", "justifyContent", "alignItems", "gap", "wrap", "paddingLeft", "paddingRight", "background", "hasRadius", "borderColor", "height", "Checkbox", "aria-label", "getTrad", "defaultMessage", "checked", "onCheckedChange", "SortPicker", "value", "sort", "Filters", "appliedFilters", "marginLeft", "shrink", "paddingTop", "IconButton", "label", "onClick", "LIST", "List", "GridIcon", "SearchAsset", "queryValue", "Breadcrumbs", "currentFolderId", "EmptyAssets", "size", "count", "action", "Button", "variant", "startIcon", "Plus", "content", "TableList", "indeterminate", "isFolderSelectionAllowed", "onSelectOne", "onSelectAll", "rows", "selected", "shouldDisableBulkSelect", "sortQuery", "_Fragment", "FolderGridList", "title", "Grid", "Item", "col", "direction", "FolderCard", "ariaLabel", "name", "path", "cardActions", "withTooltip", "Pencil", "FolderCardBody", "FolderCardBodyAction", "tag", "maxWidth", "fontWeight", "ellipsis", "textColor", "VisuallyHidden", "children", "filesCount", "files", "Divider", "AssetGridList", "page", "pageCount", "position", "zIndex", "PageSize", "pageSize", "PaginationFooter", "activePage", "DialogFooter", "onClose", "onValidate", "formatMessage", "useIntl", "_jsxs", "Modal", "Footer", "_jsx", "Button", "onClick", "variant", "id", "defaultMessage", "SelectedStep", "selectedAssets", "onSelectAsset", "onReorderAsset", "formatMessage", "useIntl", "_jsxs", "Flex", "direction", "alignItems", "gap", "_jsx", "Typography", "variant", "fontWeight", "textColor", "id", "getTrad", "defaultMessage", "number", "length", "AssetGridList", "size", "assets", "LoadingBody", "styled", "Flex", "AssetContent", "allowedTypes", "folderId", "onClose", "onAddAsset", "onAddFolder", "onChangeFolder", "onValidate", "multiple", "initiallySelectedAssets", "trackedLocation", "assetToEdit", "setAssetToEdit", "useState", "undefined", "folderToEdit", "setFolderToEdit", "formatMessage", "useIntl", "canRead", "canCreate", "isLoading", "isLoadingPermissions", "canUpdate", "canCopyLink", "canDownload", "useMediaLibraryPermissions", "queryObject", "onChangeFilters", "onChangePage", "onChangePageSize", "onChangeSort", "onChangeSearch", "onChangeFolderParam", "useModalQueryParams", "folder", "data", "pagination", "results", "assets", "isLoadingAssets", "error", "errorAssets", "useAssets", "skipWhen", "query", "folders", "isLoadingFolders", "errorFolders", "useFolders", "enabled", "containsAssetFilter", "page", "selectedAssets", "selectOne", "selectOnly", "setSelections", "selectMultiple", "deselectMultiple", "useSelectionState", "handleSelectAllAssets", "allowedAssets", "getAllowedFiles", "alreadySelected", "filter", "asset", "findIndex", "selectedAsset", "id", "length", "handleSelectAsset", "hasError", "activeTab", "setActiveTab", "_jsxs", "_Fragment", "_jsx", "Modal", "Header", "Title", "getTrad", "defaultMessage", "justifyContent", "paddingTop", "paddingBottom", "Loader", "DialogFooter", "Page", "Error", "NoPermissions", "EditAssetContent", "EditFolderContent", "location", "parentFolderId", "handleMoveItem", "hoverIndex", "destIndex", "offset", "orderedAssetsClone", "slice", "nextAssets", "moveElement", "handleFolderChange", "folderPath", "TabsRoot", "variant", "value", "onValueChange", "paddingLeft", "paddingRight", "Tabs", "List", "Trigger", "Badge", "marginLeft", "gap", "Button", "onClick", "Divider", "Body", "Content", "BrowseStep", "onSelectAsset", "onSelectAllAsset", "onEditAsset", "onEditFolder", "filters", "sort", "SelectedStep", "onReorderAsset", "AssetDialog", "open", "restProps", "Root", "onOpenChange", "STEPS", "AssetSelect", "AssetUpload", "FolderCreate", "MediaLibraryDialog", "onClose", "onSelectAssets", "allowedTypes", "step", "setStep", "useState", "folderId", "setFolderId", "_jsx", "AssetDialog", "open", "onValidate", "onAddAsset", "onAddFolder", "onChangeFolder", "multiple", "EditFolderDialog", "parentFolderId", "UploadAssetDialog", "DocAsset", "styled", "Flex", "VideoPreviewWrapper", "Box", "AudioPreviewWrapper", "CarouselAsset", "asset", "mime", "includes", "AssetType", "Video", "_jsx", "height", "VideoPreview", "url", "createAssetUrl", "alt", "alternativeText", "name", "Audio", "AudioPreview", "Image", "assetUrl", "cacheBustedUrl", "isUrlSigned", "updatedAt", "tag", "maxHeight", "maxWidth", "src", "width", "justifyContent", "hasRadius", "ext", "FilePdf", "aria-label", "File", "CarouselAssetActions", "asset", "onDeleteAsset", "onAddAsset", "onEditAsset", "formatMessage", "useIntl", "_jsxs", "CarouselActions", "_jsx", "IconButton", "label", "id", "getTrad", "defaultMessage", "onClick", "Plus", "CopyLinkButton", "url", "prefixFileUrlWithBackendUrl", "Trash", "Pencil", "TextAlignTypography", "styled", "Typography", "EmptyStateAsset", "disabled", "onClick", "onDropAsset", "formatMessage", "useIntl", "dragOver", "setDragOver", "useState", "handleDragEnter", "e", "preventDefault", "handleDragLeave", "currentTarget", "contains", "relatedTarget", "handleDragOver", "handleDrop", "dataTransfer", "files", "assets", "i", "length", "file", "item", "asset", "rawFileToAsset", "AssetSource", "Computer", "push", "_jsxs", "Flex", "borderStyle", "undefined", "borderWidth", "borderColor", "direction", "justifyContent", "alignItems", "height", "width", "tag", "type", "onDragEnter", "onDragLeave", "onDragOver", "onDrop", "gap", "style", "cursor", "_jsx", "PicturePlus", "aria-hidden", "fill", "variant", "fontWeight", "textColor", "textAlign", "id", "getTrad", "defaultMessage", "CarouselAssets", "forwardRef", "assets", "disabled", "error", "hint", "label", "labelAction", "onAddAsset", "onDeleteAsset", "onDeleteAssetFromMediaLibrary", "onDropAsset", "onEditAsset", "onNext", "onPrevious", "required", "selectedAssetIndex", "trackedLocation", "forwardedRef", "formatMessage", "useIntl", "isEditingAsset", "setIsEditingAsset", "useState", "currentAsset", "_jsxs", "_Fragment", "_jsx", "CarouselInput", "ref", "secondaryLabel", "name", "selectedSlide", "previousLabel", "id", "getTrad", "defaultMessage", "nextLabel", "actions", "CarouselAssetActions", "asset", "undefined", "length", "CarouselSlide", "n", "m", "EmptyStateAsset", "onClick", "map", "index", "CarouselAsset", "EditAssetDialog", "open", "onClose", "editedAsset", "canUpdate", "canCopyLink", "canDownload", "STEPS", "AssetSelect", "AssetUpload", "FolderCreate", "MediaLibraryInput", "forwardRef", "attribute", "allowedTypes", "multiple", "label", "hint", "disabled", "labelAction", "undefined", "name", "required", "forwardedRef", "formatMessage", "useIntl", "onChange", "value", "error", "useField", "uploadedFiles", "setUploadedFiles", "useState", "step", "setStep", "selectedIndex", "setSelectedIndex", "droppedAssets", "setDroppedAssets", "folderId", "setFolderId", "toggleNotification", "useNotification", "React", "useEffect", "selectedAssets", "Array", "isArray", "handleValidation", "nextSelectedAssets", "handleDeleteAssetFromMediaLibrary", "nextValue", "filter", "_", "assetIndex", "length", "handleDeleteAsset", "asset", "prevAsset", "id", "handleAssetEdit", "map", "validateAssetsTypes", "assets", "callback", "allowedAssets", "getAllowedFiles", "type", "timeout", "message", "getTrad", "defaultMessage", "fileTypes", "join", "handleAssetDrop", "handleNext", "current", "handlePrevious", "handleFilesUploadSucceeded", "prev", "initiallySelectedAssets", "allowedUploadedFiles", "_jsxs", "_Fragment", "_jsx", "CarouselAssets", "ref", "onDeleteAsset", "onDeleteAssetFromMediaLibrary", "onAddAsset", "onDropAsset", "onEditAsset", "onNext", "onPrevious", "selectedAssetIndex", "trackedLocation", "AssetDialog", "onClose", "open", "onValidate", "onAddFolder", "onChangeFolder", "folder", "UploadAssetDialog", "initialAssetsToAdd", "addUploadedFiles", "EditFolderDialog", "parentFolderId", "prefixPluginTranslations", "trad", "pluginId", "TypeError", "Object", "keys", "reduce", "acc", "current", "name", "pluginPkg", "strapi", "admin", "register", "app", "addMenuLink", "to", "pluginId", "icon", "Images", "intlLabel", "id", "defaultMessage", "permissions", "PERMISSIONS", "main", "Component", "then", "mod", "default", "Upload", "position", "addSettingsLink", "getTrad", "ProtectedSettingsPage", "settings", "addFields", "type", "MediaLibraryInput", "addComponents", "MediaLibraryDialog", "registerPlugin", "registerTrads", "locales", "importedTrads", "Promise", "all", "map", "locale", "data", "prefixPluginTranslations", "catch", "resolve"]
}
